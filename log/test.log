  [1m[35m (204.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "bookclub_test"[0m
  [1m[35m (498.4ms)[0m  [1m[35mCREATE DATABASE "bookclub_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "authors" CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "authors" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "book_authors" CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "book_authors" ("id" bigserial primary key, "book_id" bigint, "author_id" bigint)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_book_authors_on_author_id" ON "book_authors"  ("author_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_book_authors_on_book_id" ON "book_authors"  ("book_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "books" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "books" ("id" bigserial primary key, "title" character varying, "pages" integer, "pub_year" integer, "thumb_url" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "score" integer, "heading" character varying, "full_review" text, "book_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user" character varying)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_book_id" ON "reviews"  ("book_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "book_authors" ADD CONSTRAINT "fk_rails_0c0759568d"
FOREIGN KEY ("author_id")
  REFERENCES "authors" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "book_authors" ADD CONSTRAINT "fk_rails_b23f3934c1"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190509215220)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190507174304),
(20190507173936),
(20190507174149),
(20190507174053);

[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-05-15 15:49:32.513506"], ["updated_at", "2019-05-15 15:49:32.513506"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-05-15 15:49:32.652428"], ["updated_at", "2019-05-15 15:49:32.652428"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-05-15 15:49:32.690506"], ["updated_at", "2019-05-15 15:49:32.690506"]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 1], ["author_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-05-15 15:49:32.711012"], ["updated_at", "2019-05-15 15:49:32.711012"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 2], ["author_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 2]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 2]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 2]]
  Rendered books/index.html.erb within layouts/application (29.2ms)
Completed 500 Internal Server Error in 160ms (ActiveRecord: 4.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:49:32.891736"], ["updated_at", "2019-05-15 15:49:32.891736"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:49:32.898221"], ["updated_at", "2019-05-15 15:49:32.898221"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 3], ["author_id", 2]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:49:32.905102"], ["updated_at", "2019-05-15 15:49:32.905102"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 4], ["author_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 3], ["created_at", "2019-05-15 15:49:32.916004"], ["updated_at", "2019-05-15 15:49:32.916004"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/2" for 127.0.0.1 at 2019-05-15 09:49:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 2]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 4], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 4]]
  Rendered authors/show.html.erb within layouts/application (9.4ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-05-15 15:49:32.946686"], ["updated_at", "2019-05-15 15:49:32.946686"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-05-15 15:49:32.951660"], ["updated_at", "2019-05-15 15:49:32.951660"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 5], ["author_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-05-15 15:49:32.955317"], ["updated_at", "2019-05-15 15:49:32.955317"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 5], ["author_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-05-15 15:49:32.960038"], ["updated_at", "2019-05-15 15:49:32.960038"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 6], ["author_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/3" for 127.0.0.1 at 2019-05-15 09:49:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 3]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 5], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 5]]
  Rendered authors/show.html.erb within layouts/application (4.9ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:49:32.995025"], ["updated_at", "2019-05-15 15:49:32.995025"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:49:33.000049"], ["updated_at", "2019-05-15 15:49:33.000049"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 7], ["author_id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:49:33.003357"], ["updated_at", "2019-05-15 15:49:33.003357"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 7], ["author_id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:49:33.007765"], ["updated_at", "2019-05-15 15:49:33.007765"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 8], ["author_id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:49:33.012415"], ["updated_at", "2019-05-15 15:49:33.012415"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 9], ["author_id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/5" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 5]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 7], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 7]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 8], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 8]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 9], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 9]]
  Rendered authors/show.html.erb within layouts/application (8.2ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:49:33.035223"], ["updated_at", "2019-05-15 15:49:33.035223"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:49:33.040236"], ["updated_at", "2019-05-15 15:49:33.040236"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 10], ["author_id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:49:33.043720"], ["updated_at", "2019-05-15 15:49:33.043720"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 10], ["author_id", 8]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:49:33.047863"], ["updated_at", "2019-05-15 15:49:33.047863"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 11], ["author_id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:49:33.052722"], ["updated_at", "2019-05-15 15:49:33.052722"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 12], ["author_id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/7" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 7]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 10], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 10]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 11], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 11]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 12], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 12]]
  Rendered authors/show.html.erb within layouts/application (7.0ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.072824"], ["updated_at", "2019-05-15 15:49:33.072824"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 13], ["created_at", "2019-05-15 15:49:33.075010"], ["updated_at", "2019-05-15 15:49:33.075010"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 13], ["created_at", "2019-05-15 15:49:33.077053"], ["updated_at", "2019-05-15 15:49:33.077053"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 13], ["created_at", "2019-05-15 15:49:33.078927"], ["updated_at", "2019-05-15 15:49:33.078927"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 13], ["created_at", "2019-05-15 15:49:33.080767"], ["updated_at", "2019-05-15 15:49:33.080767"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 13]]
  Rendered books/index.html.erb within layouts/application (13.9ms)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 2.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.108419"], ["updated_at", "2019-05-15 15:49:33.108419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.111034"], ["updated_at", "2019-05-15 15:49:33.111034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.113386"], ["updated_at", "2019-05-15 15:49:33.113386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.115874"], ["updated_at", "2019-05-15 15:49:33.115874"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 14], ["created_at", "2019-05-15 15:49:33.120393"], ["updated_at", "2019-05-15 15:49:33.120393"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 15], ["created_at", "2019-05-15 15:49:33.122706"], ["updated_at", "2019-05-15 15:49:33.122706"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 16], ["created_at", "2019-05-15 15:49:33.124635"], ["updated_at", "2019-05-15 15:49:33.124635"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 17], ["created_at", "2019-05-15 15:49:33.126704"], ["updated_at", "2019-05-15 15:49:33.126704"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 14], ["created_at", "2019-05-15 15:49:33.128637"], ["updated_at", "2019-05-15 15:49:33.128637"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 15], ["created_at", "2019-05-15 15:49:33.130379"], ["updated_at", "2019-05-15 15:49:33.130379"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 16], ["created_at", "2019-05-15 15:49:33.133184"], ["updated_at", "2019-05-15 15:49:33.133184"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 14], ["created_at", "2019-05-15 15:49:33.136120"], ["updated_at", "2019-05-15 15:49:33.136120"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 15], ["created_at", "2019-05-15 15:49:33.139153"], ["updated_at", "2019-05-15 15:49:33.139153"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 14], ["created_at", "2019-05-15 15:49:33.141547"], ["updated_at", "2019-05-15 15:49:33.141547"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[36mAuthor Load (0.5ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 17]]
  Rendered books/index.html.erb within layouts/application (24.9ms)
Completed 500 Internal Server Error in 32ms (ActiveRecord: 4.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.179326"], ["updated_at", "2019-05-15 15:49:33.179326"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.183841"], ["updated_at", "2019-05-15 15:49:33.183841"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.187867"], ["updated_at", "2019-05-15 15:49:33.187867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.191689"], ["updated_at", "2019-05-15 15:49:33.191689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 18], ["created_at", "2019-05-15 15:49:33.194469"], ["updated_at", "2019-05-15 15:49:33.194469"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 19], ["created_at", "2019-05-15 15:49:33.197204"], ["updated_at", "2019-05-15 15:49:33.197204"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 20], ["created_at", "2019-05-15 15:49:33.199989"], ["updated_at", "2019-05-15 15:49:33.199989"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 21], ["created_at", "2019-05-15 15:49:33.203044"], ["updated_at", "2019-05-15 15:49:33.203044"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 18], ["created_at", "2019-05-15 15:49:33.205323"], ["updated_at", "2019-05-15 15:49:33.205323"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 19], ["created_at", "2019-05-15 15:49:33.207767"], ["updated_at", "2019-05-15 15:49:33.207767"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 20], ["created_at", "2019-05-15 15:49:33.210345"], ["updated_at", "2019-05-15 15:49:33.210345"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 18], ["created_at", "2019-05-15 15:49:33.212471"], ["updated_at", "2019-05-15 15:49:33.212471"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 19], ["created_at", "2019-05-15 15:49:33.215043"], ["updated_at", "2019-05-15 15:49:33.215043"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 18], ["created_at", "2019-05-15 15:49:33.217364"], ["updated_at", "2019-05-15 15:49:33.217364"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 18]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 21]]
  Rendered books/index.html.erb within layouts/application (24.2ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 4.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.254452"], ["updated_at", "2019-05-15 15:49:33.254452"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.259581"], ["updated_at", "2019-05-15 15:49:33.259581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.262209"], ["updated_at", "2019-05-15 15:49:33.262209"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.265072"], ["updated_at", "2019-05-15 15:49:33.265072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 22], ["created_at", "2019-05-15 15:49:33.268209"], ["updated_at", "2019-05-15 15:49:33.268209"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 23], ["created_at", "2019-05-15 15:49:33.270983"], ["updated_at", "2019-05-15 15:49:33.270983"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 24], ["created_at", "2019-05-15 15:49:33.273324"], ["updated_at", "2019-05-15 15:49:33.273324"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 25], ["created_at", "2019-05-15 15:49:33.275555"], ["updated_at", "2019-05-15 15:49:33.275555"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 22], ["created_at", "2019-05-15 15:49:33.278060"], ["updated_at", "2019-05-15 15:49:33.278060"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 23], ["created_at", "2019-05-15 15:49:33.280236"], ["updated_at", "2019-05-15 15:49:33.280236"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 24], ["created_at", "2019-05-15 15:49:33.282309"], ["updated_at", "2019-05-15 15:49:33.282309"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 22], ["created_at", "2019-05-15 15:49:33.284372"], ["updated_at", "2019-05-15 15:49:33.284372"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 23], ["created_at", "2019-05-15 15:49:33.286460"], ["updated_at", "2019-05-15 15:49:33.286460"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 22], ["created_at", "2019-05-15 15:49:33.289002"], ["updated_at", "2019-05-15 15:49:33.289002"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 25]]
  Rendered books/index.html.erb within layouts/application (16.6ms)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 3.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.322809"], ["updated_at", "2019-05-15 15:49:33.322809"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.326167"], ["updated_at", "2019-05-15 15:49:33.326167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.330406"], ["updated_at", "2019-05-15 15:49:33.330406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.333000"], ["updated_at", "2019-05-15 15:49:33.333000"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 26], ["created_at", "2019-05-15 15:49:33.335592"], ["updated_at", "2019-05-15 15:49:33.335592"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 27], ["created_at", "2019-05-15 15:49:33.337640"], ["updated_at", "2019-05-15 15:49:33.337640"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 28], ["created_at", "2019-05-15 15:49:33.339574"], ["updated_at", "2019-05-15 15:49:33.339574"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 29], ["created_at", "2019-05-15 15:49:33.341309"], ["updated_at", "2019-05-15 15:49:33.341309"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 26], ["created_at", "2019-05-15 15:49:33.342974"], ["updated_at", "2019-05-15 15:49:33.342974"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 27], ["created_at", "2019-05-15 15:49:33.344703"], ["updated_at", "2019-05-15 15:49:33.344703"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 28], ["created_at", "2019-05-15 15:49:33.346482"], ["updated_at", "2019-05-15 15:49:33.346482"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 26], ["created_at", "2019-05-15 15:49:33.348210"], ["updated_at", "2019-05-15 15:49:33.348210"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 27], ["created_at", "2019-05-15 15:49:33.349997"], ["updated_at", "2019-05-15 15:49:33.349997"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 26], ["created_at", "2019-05-15 15:49:33.351619"], ["updated_at", "2019-05-15 15:49:33.351619"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 29]]
  Rendered books/index.html.erb within layouts/application (16.8ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 3.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.378744"], ["updated_at", "2019-05-15 15:49:33.378744"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.383092"], ["updated_at", "2019-05-15 15:49:33.383092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.385364"], ["updated_at", "2019-05-15 15:49:33.385364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.387340"], ["updated_at", "2019-05-15 15:49:33.387340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 30], ["created_at", "2019-05-15 15:49:33.389231"], ["updated_at", "2019-05-15 15:49:33.389231"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 31], ["created_at", "2019-05-15 15:49:33.391199"], ["updated_at", "2019-05-15 15:49:33.391199"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 32], ["created_at", "2019-05-15 15:49:33.393063"], ["updated_at", "2019-05-15 15:49:33.393063"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 33], ["created_at", "2019-05-15 15:49:33.394896"], ["updated_at", "2019-05-15 15:49:33.394896"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 30], ["created_at", "2019-05-15 15:49:33.396653"], ["updated_at", "2019-05-15 15:49:33.396653"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 31], ["created_at", "2019-05-15 15:49:33.398390"], ["updated_at", "2019-05-15 15:49:33.398390"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 32], ["created_at", "2019-05-15 15:49:33.400654"], ["updated_at", "2019-05-15 15:49:33.400654"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 30], ["created_at", "2019-05-15 15:49:33.402615"], ["updated_at", "2019-05-15 15:49:33.402615"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 31], ["created_at", "2019-05-15 15:49:33.404217"], ["updated_at", "2019-05-15 15:49:33.404217"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 30], ["created_at", "2019-05-15 15:49:33.406013"], ["updated_at", "2019-05-15 15:49:33.406013"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 30]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 33]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 30]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 30]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 30]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 31]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 32]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 33]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 33]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 33]]
  Rendered books/index.html.erb within layouts/application (17.1ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 3.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.433436"], ["updated_at", "2019-05-15 15:49:33.433436"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.437717"], ["updated_at", "2019-05-15 15:49:33.437717"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 34], ["author_id", 9]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 34], ["created_at", "2019-05-15 15:49:33.441347"], ["updated_at", "2019-05-15 15:49:33.441347"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 34], ["created_at", "2019-05-15 15:49:33.443137"], ["updated_at", "2019-05-15 15:49:33.443137"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 34], ["created_at", "2019-05-15 15:49:33.444759"], ["updated_at", "2019-05-15 15:49:33.444759"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 34], ["created_at", "2019-05-15 15:49:33.446334"], ["updated_at", "2019-05-15 15:49:33.446334"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/34" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"34"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 34]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 34]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 34], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 34], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 34]]
  Rendered books/show.html.erb within layouts/application (7.7ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.468756"], ["updated_at", "2019-05-15 15:49:33.468756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.471026"], ["updated_at", "2019-05-15 15:49:33.471026"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 35], ["author_id", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 35], ["created_at", "2019-05-15 15:49:33.474613"], ["updated_at", "2019-05-15 15:49:33.474613"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 35], ["created_at", "2019-05-15 15:49:33.476362"], ["updated_at", "2019-05-15 15:49:33.476362"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 35], ["created_at", "2019-05-15 15:49:33.478126"], ["updated_at", "2019-05-15 15:49:33.478126"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 35], ["created_at", "2019-05-15 15:49:33.479958"], ["updated_at", "2019-05-15 15:49:33.479958"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/35" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"35"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 35]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 35]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 35], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 35], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 35]]
  Rendered books/show.html.erb within layouts/application (7.6ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.497994"], ["updated_at", "2019-05-15 15:49:33.497994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.502102"], ["updated_at", "2019-05-15 15:49:33.502102"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 36], ["author_id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 36], ["created_at", "2019-05-15 15:49:33.507127"], ["updated_at", "2019-05-15 15:49:33.507127"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 36], ["created_at", "2019-05-15 15:49:33.508919"], ["updated_at", "2019-05-15 15:49:33.508919"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 36], ["created_at", "2019-05-15 15:49:33.510641"], ["updated_at", "2019-05-15 15:49:33.510641"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 36], ["created_at", "2019-05-15 15:49:33.512340"], ["updated_at", "2019-05-15 15:49:33.512340"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/36" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"36"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 36]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 36]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 36], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 36], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 36]]
  Rendered books/show.html.erb within layouts/application (7.1ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-05-15 15:49:33.534887"], ["updated_at", "2019-05-15 15:49:33.534887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/37" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"37"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 37]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 37]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 37], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 37], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 37]]
  Rendered books/show.html.erb within layouts/application (3.7ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.549400"], ["updated_at", "2019-05-15 15:49:33.549400"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.553504"], ["updated_at", "2019-05-15 15:49:33.553504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.555687"], ["updated_at", "2019-05-15 15:49:33.555687"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 38], ["author_id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:49:33.558739"], ["updated_at", "2019-05-15 15:49:33.558739"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 38], ["author_id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:49:33.561955"], ["updated_at", "2019-05-15 15:49:33.561955"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 39], ["author_id", 14]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 38]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 38]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 38]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 39]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 39]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 39]]
  Rendered books/index.html.erb within layouts/application (10.1ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.584236"], ["updated_at", "2019-05-15 15:49:33.584236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.586481"], ["updated_at", "2019-05-15 15:49:33.586481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.588471"], ["updated_at", "2019-05-15 15:49:33.588471"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 40], ["author_id", 15]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:49:33.591793"], ["updated_at", "2019-05-15 15:49:33.591793"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 40], ["author_id", 16]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:49:33.594902"], ["updated_at", "2019-05-15 15:49:33.594902"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 41], ["author_id", 17]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 40]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 40]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 40]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 41]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 41]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 41]]
  Rendered books/index.html.erb within layouts/application (11.3ms)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.5ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (25.0ms)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.7ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.9ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:49:33.698573"], ["updated_at", "2019-05-15 15:49:33.698573"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.702157"], ["updated_at", "2019-05-15 15:49:33.702157"]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 42], ["author_id", 18]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:49:33.707243"], ["updated_at", "2019-05-15 15:49:33.707243"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 42], ["author_id", 19]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 42], ["created_at", "2019-05-15 15:49:33.710564"], ["updated_at", "2019-05-15 15:49:33.710564"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 42], ["created_at", "2019-05-15 15:49:33.712287"], ["updated_at", "2019-05-15 15:49:33.712287"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 42], ["created_at", "2019-05-15 15:49:33.714020"], ["updated_at", "2019-05-15 15:49:33.714020"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/42" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"42"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 42]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 42]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 42], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 42], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 42]]
  Rendered books/show.html.erb within layouts/application (7.2ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:49:33.733129"], ["updated_at", "2019-05-15 15:49:33.733129"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.737285"], ["updated_at", "2019-05-15 15:49:33.737285"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 43], ["author_id", 20]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:49:33.740593"], ["updated_at", "2019-05-15 15:49:33.740593"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 43], ["author_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 43], ["created_at", "2019-05-15 15:49:33.743811"], ["updated_at", "2019-05-15 15:49:33.743811"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 43], ["created_at", "2019-05-15 15:49:33.745623"], ["updated_at", "2019-05-15 15:49:33.745623"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 43], ["created_at", "2019-05-15 15:49:33.747159"], ["updated_at", "2019-05-15 15:49:33.747159"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/43" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"43"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 43]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 43]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 43], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 43], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 43]]
  Rendered books/show.html.erb within layouts/application (5.9ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.4ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.782081"], ["updated_at", "2019-05-15 15:49:33.782081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.786651"], ["updated_at", "2019-05-15 15:49:33.786651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.788976"], ["updated_at", "2019-05-15 15:49:33.788976"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 44], ["author_id", 22]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.792679"], ["updated_at", "2019-05-15 15:49:33.792679"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 45], ["author_id", 23]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 44], ["created_at", "2019-05-15 15:49:33.796159"], ["updated_at", "2019-05-15 15:49:33.796159"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 45], ["created_at", "2019-05-15 15:49:33.797929"], ["updated_at", "2019-05-15 15:49:33.797929"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/44" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"44"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 44]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 44]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 44], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 44], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 44]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.814010"], ["updated_at", "2019-05-15 15:49:33.814010"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.818101"], ["updated_at", "2019-05-15 15:49:33.818101"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 46], ["author_id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/46" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"46"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 46]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 46]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 46], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 46], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 46]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.834909"], ["updated_at", "2019-05-15 15:49:33.834909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.837200"], ["updated_at", "2019-05-15 15:49:33.837200"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 47], ["author_id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/47" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"47"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 47]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 47]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 47], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 47], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 47]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.855288"], ["updated_at", "2019-05-15 15:49:33.855288"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.857376"], ["updated_at", "2019-05-15 15:49:33.857376"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.859546"], ["updated_at", "2019-05-15 15:49:33.859546"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 48], ["author_id", 26]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.863134"], ["updated_at", "2019-05-15 15:49:33.863134"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 49], ["author_id", 27]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 48], ["created_at", "2019-05-15 15:49:33.866987"], ["updated_at", "2019-05-15 15:49:33.866987"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 49], ["created_at", "2019-05-15 15:49:33.870274"], ["updated_at", "2019-05-15 15:49:33.870274"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 48], ["created_at", "2019-05-15 15:49:33.873052"], ["updated_at", "2019-05-15 15:49:33.873052"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/48" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"48"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 48]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 48]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 48], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 48], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 48]]
  Rendered books/show.html.erb within layouts/application (5.1ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.889589"], ["updated_at", "2019-05-15 15:49:33.889589"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.893917"], ["updated_at", "2019-05-15 15:49:33.893917"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.896025"], ["updated_at", "2019-05-15 15:49:33.896025"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 50], ["author_id", 28]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.899683"], ["updated_at", "2019-05-15 15:49:33.899683"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 51], ["author_id", 29]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 50], ["created_at", "2019-05-15 15:49:33.903949"], ["updated_at", "2019-05-15 15:49:33.903949"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 51], ["created_at", "2019-05-15 15:49:33.906163"], ["updated_at", "2019-05-15 15:49:33.906163"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 50], ["created_at", "2019-05-15 15:49:33.907772"], ["updated_at", "2019-05-15 15:49:33.907772"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/50" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"50"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 50]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 50]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 50], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 50], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 50]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.923158"], ["updated_at", "2019-05-15 15:49:33.923158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.925471"], ["updated_at", "2019-05-15 15:49:33.925471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 52], ["created_at", "2019-05-13 15:49:33.926523"], ["updated_at", "2019-05-15 15:49:33.930642"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 53], ["created_at", "2019-05-12 15:49:33.932137"], ["updated_at", "2019-05-15 15:49:33.933361"], ["user", "Mills"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.7ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.959120"], ["updated_at", "2019-05-15 15:49:33.959120"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.963582"], ["updated_at", "2019-05-15 15:49:33.963582"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 54], ["created_at", "2019-05-13 15:49:33.964702"], ["updated_at", "2019-05-15 15:49:33.965920"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 55], ["created_at", "2019-05-12 15:49:33.967137"], ["updated_at", "2019-05-15 15:49:33.968407"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.1ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:33.983063"], ["updated_at", "2019-05-15 15:49:33.983063"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:33.987265"], ["updated_at", "2019-05-15 15:49:33.987265"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 56], ["author_id", 30]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 56], ["created_at", "2019-05-15 15:49:33.991461"], ["updated_at", "2019-05-15 15:49:33.991461"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:49:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 56]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 56]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 56]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 56]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 56]]
  Rendered books/index.html.erb within layouts/application (8.0ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.088921"], ["updated_at", "2019-05-15 15:49:34.088921"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:34.091194"], ["updated_at", "2019-05-15 15:49:34.091194"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 57], ["author_id", 31]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 57], ["created_at", "2019-05-15 15:49:34.094589"], ["updated_at", "2019-05-15 15:49:34.094589"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 57], ["created_at", "2019-05-15 15:49:34.096265"], ["updated_at", "2019-05-15 15:49:34.096265"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 57]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.105344"], ["updated_at", "2019-05-15 15:49:34.105344"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:34.108933"], ["updated_at", "2019-05-15 15:49:34.108933"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 58], ["author_id", 32]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 58], ["created_at", "2019-05-15 15:49:34.112389"], ["updated_at", "2019-05-15 15:49:34.112389"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 58], ["created_at", "2019-05-15 15:49:34.114100"], ["updated_at", "2019-05-15 15:49:34.114100"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 58]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.120044"], ["updated_at", "2019-05-15 15:49:34.120044"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 59], ["created_at", "2019-05-15 15:49:34.123607"], ["updated_at", "2019-05-15 15:49:34.123607"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 59], ["created_at", "2019-05-15 15:49:34.125657"], ["updated_at", "2019-05-15 15:49:34.125657"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 59], ["created_at", "2019-05-15 15:49:34.127399"], ["updated_at", "2019-05-15 15:49:34.127399"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 59], ["created_at", "2019-05-15 15:49:34.129004"], ["updated_at", "2019-05-15 15:49:34.129004"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 59], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.134091"], ["updated_at", "2019-05-15 15:49:34.134091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 60], ["created_at", "2019-05-15 15:49:34.138807"], ["updated_at", "2019-05-15 15:49:34.138807"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 60], ["created_at", "2019-05-15 15:49:34.140706"], ["updated_at", "2019-05-15 15:49:34.140706"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 60], ["created_at", "2019-05-15 15:49:34.142382"], ["updated_at", "2019-05-15 15:49:34.142382"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 60], ["created_at", "2019-05-15 15:49:34.143992"], ["updated_at", "2019-05-15 15:49:34.143992"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 60], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.148366"], ["updated_at", "2019-05-15 15:49:34.148366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 61], ["created_at", "2019-05-15 15:49:34.151762"], ["updated_at", "2019-05-15 15:49:34.151762"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 61], ["created_at", "2019-05-15 15:49:34.154147"], ["updated_at", "2019-05-15 15:49:34.154147"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 61], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.159785"], ["updated_at", "2019-05-15 15:49:34.159785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.161946"], ["updated_at", "2019-05-15 15:49:34.161946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.163884"], ["updated_at", "2019-05-15 15:49:34.163884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.169140"], ["updated_at", "2019-05-15 15:49:34.169140"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.172878"], ["updated_at", "2019-05-15 15:49:34.172878"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.175106"], ["updated_at", "2019-05-15 15:49:34.175106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.178938"], ["updated_at", "2019-05-15 15:49:34.178938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.181203"], ["updated_at", "2019-05-15 15:49:34.181203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 68], ["created_at", "2019-05-15 15:49:34.184892"], ["updated_at", "2019-05-15 15:49:34.184892"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 68], ["created_at", "2019-05-15 15:49:34.187712"], ["updated_at", "2019-05-15 15:49:34.187712"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 69], ["created_at", "2019-05-15 15:49:34.190323"], ["updated_at", "2019-05-15 15:49:34.190323"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (69, 68)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.195726"], ["updated_at", "2019-05-15 15:49:34.195726"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.197839"], ["updated_at", "2019-05-15 15:49:34.197839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 70], ["created_at", "2019-05-15 15:49:34.200411"], ["updated_at", "2019-05-15 15:49:34.200411"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 70], ["created_at", "2019-05-15 15:49:34.203382"], ["updated_at", "2019-05-15 15:49:34.203382"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 71], ["created_at", "2019-05-15 15:49:34.206543"], ["updated_at", "2019-05-15 15:49:34.206543"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (70, 71)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.212167"], ["updated_at", "2019-05-15 15:49:34.212167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.214510"], ["updated_at", "2019-05-15 15:49:34.214510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.216827"], ["updated_at", "2019-05-15 15:49:34.216827"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.220559"], ["updated_at", "2019-05-15 15:49:34.220559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 72], ["created_at", "2019-05-15 15:49:34.223771"], ["updated_at", "2019-05-15 15:49:34.223771"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 73], ["created_at", "2019-05-15 15:49:34.225796"], ["updated_at", "2019-05-15 15:49:34.225796"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 74], ["created_at", "2019-05-15 15:49:34.234317"], ["updated_at", "2019-05-15 15:49:34.234317"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 75], ["created_at", "2019-05-15 15:49:34.236804"], ["updated_at", "2019-05-15 15:49:34.236804"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.241753"], ["updated_at", "2019-05-15 15:49:34.241753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.245850"], ["updated_at", "2019-05-15 15:49:34.245850"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.248138"], ["updated_at", "2019-05-15 15:49:34.248138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.252802"], ["updated_at", "2019-05-15 15:49:34.252802"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 76], ["created_at", "2019-05-15 15:49:34.255101"], ["updated_at", "2019-05-15 15:49:34.255101"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 77], ["created_at", "2019-05-15 15:49:34.257359"], ["updated_at", "2019-05-15 15:49:34.257359"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 78], ["created_at", "2019-05-15 15:49:34.259305"], ["updated_at", "2019-05-15 15:49:34.259305"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 79], ["created_at", "2019-05-15 15:49:34.261259"], ["updated_at", "2019-05-15 15:49:34.261259"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.268266"], ["updated_at", "2019-05-15 15:49:34.268266"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.270559"], ["updated_at", "2019-05-15 15:49:34.270559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.272918"], ["updated_at", "2019-05-15 15:49:34.272918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.275257"], ["updated_at", "2019-05-15 15:49:34.275257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 80], ["created_at", "2019-05-15 15:49:34.277299"], ["updated_at", "2019-05-15 15:49:34.277299"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 81], ["created_at", "2019-05-15 15:49:34.279239"], ["updated_at", "2019-05-15 15:49:34.279239"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 82], ["created_at", "2019-05-15 15:49:34.281100"], ["updated_at", "2019-05-15 15:49:34.281100"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 83], ["created_at", "2019-05-15 15:49:34.283293"], ["updated_at", "2019-05-15 15:49:34.283293"], ["user", "Pam"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.289657"], ["updated_at", "2019-05-15 15:49:34.289657"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.291884"], ["updated_at", "2019-05-15 15:49:34.291884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.293798"], ["updated_at", "2019-05-15 15:49:34.293798"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.295859"], ["updated_at", "2019-05-15 15:49:34.295859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 84], ["created_at", "2019-05-15 15:49:34.298468"], ["updated_at", "2019-05-15 15:49:34.298468"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 85], ["created_at", "2019-05-15 15:49:34.301240"], ["updated_at", "2019-05-15 15:49:34.301240"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 86], ["created_at", "2019-05-15 15:49:34.304396"], ["updated_at", "2019-05-15 15:49:34.304396"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 87], ["created_at", "2019-05-15 15:49:34.307386"], ["updated_at", "2019-05-15 15:49:34.307386"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.314662"], ["updated_at", "2019-05-15 15:49:34.314662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:49:34.317690"], ["updated_at", "2019-05-15 15:49:34.317690"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 88], ["author_id", 33]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 88], ["created_at", "2019-05-15 15:49:34.324113"], ["updated_at", "2019-05-15 15:49:34.324113"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.327811"], ["updated_at", "2019-05-15 15:49:34.327811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.330081"], ["updated_at", "2019-05-15 15:49:34.330081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.332193"], ["updated_at", "2019-05-15 15:49:34.332193"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.337186"], ["updated_at", "2019-05-15 15:49:34.337186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 89], ["created_at", "2019-05-15 15:49:34.339441"], ["updated_at", "2019-05-15 15:49:34.339441"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 90], ["created_at", "2019-05-15 15:49:34.341628"], ["updated_at", "2019-05-15 15:49:34.341628"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 91], ["created_at", "2019-05-15 15:49:34.343747"], ["updated_at", "2019-05-15 15:49:34.343747"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 92], ["created_at", "2019-05-15 15:49:34.345697"], ["updated_at", "2019-05-15 15:49:34.345697"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 89], ["created_at", "2019-05-15 15:49:34.347555"], ["updated_at", "2019-05-15 15:49:34.347555"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 90], ["created_at", "2019-05-15 15:49:34.349533"], ["updated_at", "2019-05-15 15:49:34.349533"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 91], ["created_at", "2019-05-15 15:49:34.351534"], ["updated_at", "2019-05-15 15:49:34.351534"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 89], ["created_at", "2019-05-15 15:49:34.353368"], ["updated_at", "2019-05-15 15:49:34.353368"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 90], ["created_at", "2019-05-15 15:49:34.355294"], ["updated_at", "2019-05-15 15:49:34.355294"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 89], ["created_at", "2019-05-15 15:49:34.356905"], ["updated_at", "2019-05-15 15:49:34.356905"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.363740"], ["updated_at", "2019-05-15 15:49:34.363740"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 93], ["created_at", "2019-05-13 15:49:34.365969"], ["updated_at", "2019-05-15 15:49:34.367824"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 93], ["created_at", "2019-05-12 15:49:34.368922"], ["updated_at", "2019-05-15 15:49:34.369710"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 93], ["created_at", "2019-05-11 15:49:34.370700"], ["updated_at", "2019-05-15 15:49:34.371468"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:49:34.375690"], ["updated_at", "2019-05-15 15:49:34.375690"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 94], ["created_at", "2019-05-13 15:49:34.378047"], ["updated_at", "2019-05-15 15:49:34.379674"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 94], ["created_at", "2019-05-12 15:49:34.380750"], ["updated_at", "2019-05-15 15:49:34.381527"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 94], ["created_at", "2019-05-11 15:49:34.382476"], ["updated_at", "2019-05-15 15:49:34.383410"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-05-15 15:51:10.590864"], ["updated_at", "2019-05-15 15:51:10.590864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-05-15 15:51:10.615556"], ["updated_at", "2019-05-15 15:51:10.615556"]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 95], ["author_id", 34]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-05-15 15:51:10.626224"], ["updated_at", "2019-05-15 15:51:10.626224"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 96], ["author_id", 34]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:10 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 95]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 95]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 95]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 96]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 96]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 96]]
  Rendered books/index.html.erb within layouts/application (20.9ms)
Completed 500 Internal Server Error in 177ms (ActiveRecord: 4.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:51:10.818559"], ["updated_at", "2019-05-15 15:51:10.818559"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:51:10.824500"], ["updated_at", "2019-05-15 15:51:10.824500"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 97], ["author_id", 35]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:51:10.830675"], ["updated_at", "2019-05-15 15:51:10.830675"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 98], ["author_id", 35]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 97], ["created_at", "2019-05-15 15:51:10.842558"], ["updated_at", "2019-05-15 15:51:10.842558"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/35" for 127.0.0.1 at 2019-05-15 09:51:10 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"35"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 35]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 97], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 97], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 97], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 97], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 97], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 97]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 98], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 98]]
  Rendered authors/show.html.erb within layouts/application (9.6ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-05-15 15:51:10.870184"], ["updated_at", "2019-05-15 15:51:10.870184"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-05-15 15:51:10.875355"], ["updated_at", "2019-05-15 15:51:10.875355"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 99], ["author_id", 36]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-05-15 15:51:10.879523"], ["updated_at", "2019-05-15 15:51:10.879523"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 99], ["author_id", 37]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-05-15 15:51:10.884310"], ["updated_at", "2019-05-15 15:51:10.884310"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 100], ["author_id", 37]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/36" for 127.0.0.1 at 2019-05-15 09:51:10 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"36"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 36]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 99], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 99]]
  Rendered authors/show.html.erb within layouts/application (3.7ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:51:10.901260"], ["updated_at", "2019-05-15 15:51:10.901260"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:51:10.903500"], ["updated_at", "2019-05-15 15:51:10.903500"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 101], ["author_id", 38]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:51:10.909577"], ["updated_at", "2019-05-15 15:51:10.909577"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 101], ["author_id", 39]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:51:10.914457"], ["updated_at", "2019-05-15 15:51:10.914457"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 102], ["author_id", 38]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:51:10.918773"], ["updated_at", "2019-05-15 15:51:10.918773"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 103], ["author_id", 38]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/38" for 127.0.0.1 at 2019-05-15 09:51:10 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"38"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 38]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 101], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 101]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 102], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 102]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 103], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 103]]
  Rendered authors/show.html.erb within layouts/application (8.3ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:51:10.940052"], ["updated_at", "2019-05-15 15:51:10.940052"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:51:10.945124"], ["updated_at", "2019-05-15 15:51:10.945124"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 104], ["author_id", 40]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:51:10.948553"], ["updated_at", "2019-05-15 15:51:10.948553"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 104], ["author_id", 41]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:51:10.952685"], ["updated_at", "2019-05-15 15:51:10.952685"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 105], ["author_id", 40]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:51:10.957637"], ["updated_at", "2019-05-15 15:51:10.957637"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 106], ["author_id", 40]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/40" for 127.0.0.1 at 2019-05-15 09:51:10 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"40"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 40]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 104], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 104]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 105], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 105]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 106], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 106]]
  Rendered authors/show.html.erb within layouts/application (7.3ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:10.977830"], ["updated_at", "2019-05-15 15:51:10.977830"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 107], ["created_at", "2019-05-15 15:51:10.981775"], ["updated_at", "2019-05-15 15:51:10.981775"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 107], ["created_at", "2019-05-15 15:51:10.983553"], ["updated_at", "2019-05-15 15:51:10.983553"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 107], ["created_at", "2019-05-15 15:51:10.985081"], ["updated_at", "2019-05-15 15:51:10.985081"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 107], ["created_at", "2019-05-15 15:51:10.986642"], ["updated_at", "2019-05-15 15:51:10.986642"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:10 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 107]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 107]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 107]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 107]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 107]]
  Rendered books/index.html.erb within layouts/application (8.3ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.006067"], ["updated_at", "2019-05-15 15:51:11.006067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.010304"], ["updated_at", "2019-05-15 15:51:11.010304"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.012366"], ["updated_at", "2019-05-15 15:51:11.012366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.014365"], ["updated_at", "2019-05-15 15:51:11.014365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 108], ["created_at", "2019-05-15 15:51:11.016263"], ["updated_at", "2019-05-15 15:51:11.016263"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 109], ["created_at", "2019-05-15 15:51:11.018218"], ["updated_at", "2019-05-15 15:51:11.018218"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 110], ["created_at", "2019-05-15 15:51:11.020196"], ["updated_at", "2019-05-15 15:51:11.020196"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 111], ["created_at", "2019-05-15 15:51:11.022110"], ["updated_at", "2019-05-15 15:51:11.022110"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 108], ["created_at", "2019-05-15 15:51:11.023875"], ["updated_at", "2019-05-15 15:51:11.023875"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 109], ["created_at", "2019-05-15 15:51:11.025583"], ["updated_at", "2019-05-15 15:51:11.025583"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 110], ["created_at", "2019-05-15 15:51:11.027420"], ["updated_at", "2019-05-15 15:51:11.027420"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 108], ["created_at", "2019-05-15 15:51:11.029476"], ["updated_at", "2019-05-15 15:51:11.029476"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 109], ["created_at", "2019-05-15 15:51:11.031248"], ["updated_at", "2019-05-15 15:51:11.031248"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 108], ["created_at", "2019-05-15 15:51:11.032922"], ["updated_at", "2019-05-15 15:51:11.032922"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 108]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 109]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 110]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 111]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 110]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 109]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 108]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 108]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 108]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 109]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 109]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 109]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 110]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 110]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 110]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 111]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 111]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 111]]
  Rendered books/index.html.erb within layouts/application (17.6ms)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 3.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.060905"], ["updated_at", "2019-05-15 15:51:11.060905"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.065224"], ["updated_at", "2019-05-15 15:51:11.065224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.067379"], ["updated_at", "2019-05-15 15:51:11.067379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.069395"], ["updated_at", "2019-05-15 15:51:11.069395"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 112], ["created_at", "2019-05-15 15:51:11.071654"], ["updated_at", "2019-05-15 15:51:11.071654"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 113], ["created_at", "2019-05-15 15:51:11.074022"], ["updated_at", "2019-05-15 15:51:11.074022"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 114], ["created_at", "2019-05-15 15:51:11.075929"], ["updated_at", "2019-05-15 15:51:11.075929"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 115], ["created_at", "2019-05-15 15:51:11.078052"], ["updated_at", "2019-05-15 15:51:11.078052"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 112], ["created_at", "2019-05-15 15:51:11.080263"], ["updated_at", "2019-05-15 15:51:11.080263"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 113], ["created_at", "2019-05-15 15:51:11.082097"], ["updated_at", "2019-05-15 15:51:11.082097"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 114], ["created_at", "2019-05-15 15:51:11.083710"], ["updated_at", "2019-05-15 15:51:11.083710"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 112], ["created_at", "2019-05-15 15:51:11.085278"], ["updated_at", "2019-05-15 15:51:11.085278"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 113], ["created_at", "2019-05-15 15:51:11.086779"], ["updated_at", "2019-05-15 15:51:11.086779"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 112], ["created_at", "2019-05-15 15:51:11.088413"], ["updated_at", "2019-05-15 15:51:11.088413"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 112]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 112]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 113]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 115]]
  Rendered books/index.html.erb within layouts/application (16.4ms)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 3.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.115029"], ["updated_at", "2019-05-15 15:51:11.115029"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.119339"], ["updated_at", "2019-05-15 15:51:11.119339"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.122600"], ["updated_at", "2019-05-15 15:51:11.122600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.125430"], ["updated_at", "2019-05-15 15:51:11.125430"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 116], ["created_at", "2019-05-15 15:51:11.127634"], ["updated_at", "2019-05-15 15:51:11.127634"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 117], ["created_at", "2019-05-15 15:51:11.129846"], ["updated_at", "2019-05-15 15:51:11.129846"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 118], ["created_at", "2019-05-15 15:51:11.131946"], ["updated_at", "2019-05-15 15:51:11.131946"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 119], ["created_at", "2019-05-15 15:51:11.143038"], ["updated_at", "2019-05-15 15:51:11.143038"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 116], ["created_at", "2019-05-15 15:51:11.144697"], ["updated_at", "2019-05-15 15:51:11.144697"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 117], ["created_at", "2019-05-15 15:51:11.146400"], ["updated_at", "2019-05-15 15:51:11.146400"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 118], ["created_at", "2019-05-15 15:51:11.148207"], ["updated_at", "2019-05-15 15:51:11.148207"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 116], ["created_at", "2019-05-15 15:51:11.149921"], ["updated_at", "2019-05-15 15:51:11.149921"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 117], ["created_at", "2019-05-15 15:51:11.151643"], ["updated_at", "2019-05-15 15:51:11.151643"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 116], ["created_at", "2019-05-15 15:51:11.153402"], ["updated_at", "2019-05-15 15:51:11.153402"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 117]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 118]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 119]]
  Rendered books/index.html.erb within layouts/application (16.3ms)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 3.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.180213"], ["updated_at", "2019-05-15 15:51:11.180213"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.184660"], ["updated_at", "2019-05-15 15:51:11.184660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.186995"], ["updated_at", "2019-05-15 15:51:11.186995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.189045"], ["updated_at", "2019-05-15 15:51:11.189045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 120], ["created_at", "2019-05-15 15:51:11.191174"], ["updated_at", "2019-05-15 15:51:11.191174"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 121], ["created_at", "2019-05-15 15:51:11.193066"], ["updated_at", "2019-05-15 15:51:11.193066"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 122], ["created_at", "2019-05-15 15:51:11.194910"], ["updated_at", "2019-05-15 15:51:11.194910"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 123], ["created_at", "2019-05-15 15:51:11.197054"], ["updated_at", "2019-05-15 15:51:11.197054"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 120], ["created_at", "2019-05-15 15:51:11.198934"], ["updated_at", "2019-05-15 15:51:11.198934"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 121], ["created_at", "2019-05-15 15:51:11.200591"], ["updated_at", "2019-05-15 15:51:11.200591"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 122], ["created_at", "2019-05-15 15:51:11.202174"], ["updated_at", "2019-05-15 15:51:11.202174"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 120], ["created_at", "2019-05-15 15:51:11.203721"], ["updated_at", "2019-05-15 15:51:11.203721"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 121], ["created_at", "2019-05-15 15:51:11.205207"], ["updated_at", "2019-05-15 15:51:11.205207"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 120], ["created_at", "2019-05-15 15:51:11.207156"], ["updated_at", "2019-05-15 15:51:11.207156"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 121]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 123]]
  Rendered books/index.html.erb within layouts/application (16.5ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 3.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.233903"], ["updated_at", "2019-05-15 15:51:11.233903"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.237995"], ["updated_at", "2019-05-15 15:51:11.237995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.240085"], ["updated_at", "2019-05-15 15:51:11.240085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.241995"], ["updated_at", "2019-05-15 15:51:11.241995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 124], ["created_at", "2019-05-15 15:51:11.243868"], ["updated_at", "2019-05-15 15:51:11.243868"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 125], ["created_at", "2019-05-15 15:51:11.245993"], ["updated_at", "2019-05-15 15:51:11.245993"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 126], ["created_at", "2019-05-15 15:51:11.247928"], ["updated_at", "2019-05-15 15:51:11.247928"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 127], ["created_at", "2019-05-15 15:51:11.249719"], ["updated_at", "2019-05-15 15:51:11.249719"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 124], ["created_at", "2019-05-15 15:51:11.251360"], ["updated_at", "2019-05-15 15:51:11.251360"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 125], ["created_at", "2019-05-15 15:51:11.252877"], ["updated_at", "2019-05-15 15:51:11.252877"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 126], ["created_at", "2019-05-15 15:51:11.254417"], ["updated_at", "2019-05-15 15:51:11.254417"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 124], ["created_at", "2019-05-15 15:51:11.256048"], ["updated_at", "2019-05-15 15:51:11.256048"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 125], ["created_at", "2019-05-15 15:51:11.257796"], ["updated_at", "2019-05-15 15:51:11.257796"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 124], ["created_at", "2019-05-15 15:51:11.259468"], ["updated_at", "2019-05-15 15:51:11.259468"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 127]]
  Rendered books/index.html.erb within layouts/application (17.5ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 3.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.286750"], ["updated_at", "2019-05-15 15:51:11.286750"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.290796"], ["updated_at", "2019-05-15 15:51:11.290796"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 128], ["author_id", 42]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 128], ["created_at", "2019-05-15 15:51:11.294742"], ["updated_at", "2019-05-15 15:51:11.294742"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 128], ["created_at", "2019-05-15 15:51:11.297071"], ["updated_at", "2019-05-15 15:51:11.297071"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 128], ["created_at", "2019-05-15 15:51:11.298823"], ["updated_at", "2019-05-15 15:51:11.298823"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 128], ["created_at", "2019-05-15 15:51:11.300622"], ["updated_at", "2019-05-15 15:51:11.300622"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/128" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"128"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 128], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 128], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 128], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  Rendered books/show.html.erb within layouts/application (7.0ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.320152"], ["updated_at", "2019-05-15 15:51:11.320152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.322624"], ["updated_at", "2019-05-15 15:51:11.322624"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 129], ["author_id", 43]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 129], ["created_at", "2019-05-15 15:51:11.328358"], ["updated_at", "2019-05-15 15:51:11.328358"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 129], ["created_at", "2019-05-15 15:51:11.330028"], ["updated_at", "2019-05-15 15:51:11.330028"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 129], ["created_at", "2019-05-15 15:51:11.331561"], ["updated_at", "2019-05-15 15:51:11.331561"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 129], ["created_at", "2019-05-15 15:51:11.333205"], ["updated_at", "2019-05-15 15:51:11.333205"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/129" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"129"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 129], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 129]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 129], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 129], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  Rendered books/show.html.erb within layouts/application (6.3ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.350988"], ["updated_at", "2019-05-15 15:51:11.350988"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.355015"], ["updated_at", "2019-05-15 15:51:11.355015"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 130], ["author_id", 44]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 130], ["created_at", "2019-05-15 15:51:11.358570"], ["updated_at", "2019-05-15 15:51:11.358570"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 130], ["created_at", "2019-05-15 15:51:11.360209"], ["updated_at", "2019-05-15 15:51:11.360209"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 130], ["created_at", "2019-05-15 15:51:11.361881"], ["updated_at", "2019-05-15 15:51:11.361881"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 130], ["created_at", "2019-05-15 15:51:11.363825"], ["updated_at", "2019-05-15 15:51:11.363825"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/130" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"130"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 130], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 130]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 130]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 130], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 130], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 130]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-05-15 15:51:11.380285"], ["updated_at", "2019-05-15 15:51:11.380285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/131" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"131"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 131]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 131]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 131], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 131], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 131]]
  Rendered books/show.html.erb within layouts/application (3.7ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.395780"], ["updated_at", "2019-05-15 15:51:11.395780"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.398029"], ["updated_at", "2019-05-15 15:51:11.398029"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.400206"], ["updated_at", "2019-05-15 15:51:11.400206"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 132], ["author_id", 45]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:51:11.403341"], ["updated_at", "2019-05-15 15:51:11.403341"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 132], ["author_id", 46]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:51:11.407477"], ["updated_at", "2019-05-15 15:51:11.407477"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 133], ["author_id", 47]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 132]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 132]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 132]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 133]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 133]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 133]]
  Rendered books/index.html.erb within layouts/application (9.1ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.429809"], ["updated_at", "2019-05-15 15:51:11.429809"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.434198"], ["updated_at", "2019-05-15 15:51:11.434198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.436313"], ["updated_at", "2019-05-15 15:51:11.436313"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 134], ["author_id", 48]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:51:11.439612"], ["updated_at", "2019-05-15 15:51:11.439612"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 134], ["author_id", 49]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:51:11.442881"], ["updated_at", "2019-05-15 15:51:11.442881"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 135], ["author_id", 50]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 134]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 134]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 134]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 135]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 135]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 135]]
  Rendered books/index.html.erb within layouts/application (9.8ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (5.0ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (10.9ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.7ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.8ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.8ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:51:11.541627"], ["updated_at", "2019-05-15 15:51:11.541627"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.545815"], ["updated_at", "2019-05-15 15:51:11.545815"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 136], ["author_id", 51]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:51:11.549797"], ["updated_at", "2019-05-15 15:51:11.549797"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 136], ["author_id", 52]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 136], ["created_at", "2019-05-15 15:51:11.553372"], ["updated_at", "2019-05-15 15:51:11.553372"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 136], ["created_at", "2019-05-15 15:51:11.555036"], ["updated_at", "2019-05-15 15:51:11.555036"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 136], ["created_at", "2019-05-15 15:51:11.556681"], ["updated_at", "2019-05-15 15:51:11.556681"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/136" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"136"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 136]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 136]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 136], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 136], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 136]]
  Rendered books/show.html.erb within layouts/application (6.7ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:51:11.574448"], ["updated_at", "2019-05-15 15:51:11.574448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.576789"], ["updated_at", "2019-05-15 15:51:11.576789"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 137], ["author_id", 53]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:51:11.580355"], ["updated_at", "2019-05-15 15:51:11.580355"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 137], ["author_id", 54]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 137], ["created_at", "2019-05-15 15:51:11.583799"], ["updated_at", "2019-05-15 15:51:11.583799"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 137], ["created_at", "2019-05-15 15:51:11.585642"], ["updated_at", "2019-05-15 15:51:11.585642"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 137], ["created_at", "2019-05-15 15:51:11.587339"], ["updated_at", "2019-05-15 15:51:11.587339"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/137" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"137"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 137]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 137]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 137], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 137], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 137]]
  Rendered books/show.html.erb within layouts/application (6.7ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.4ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.620919"], ["updated_at", "2019-05-15 15:51:11.620919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.623454"], ["updated_at", "2019-05-15 15:51:11.623454"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.627682"], ["updated_at", "2019-05-15 15:51:11.627682"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 138], ["author_id", 55]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.631285"], ["updated_at", "2019-05-15 15:51:11.631285"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 139], ["author_id", 56]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 138], ["created_at", "2019-05-15 15:51:11.634547"], ["updated_at", "2019-05-15 15:51:11.634547"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 139], ["created_at", "2019-05-15 15:51:11.636357"], ["updated_at", "2019-05-15 15:51:11.636357"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/138" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"138"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 138], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 138]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 138]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 138], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 138], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 138]]
  Rendered books/show.html.erb within layouts/application (4.4ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.652269"], ["updated_at", "2019-05-15 15:51:11.652269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.656808"], ["updated_at", "2019-05-15 15:51:11.656808"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 140], ["author_id", 57]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/140" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"140"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 140], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 140]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 140]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 140], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 140], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 140]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.673508"], ["updated_at", "2019-05-15 15:51:11.673508"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.675948"], ["updated_at", "2019-05-15 15:51:11.675948"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 141], ["author_id", 58]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/141" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"141"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 141], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 141]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 141]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 141], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 141], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 141]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.693068"], ["updated_at", "2019-05-15 15:51:11.693068"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.695531"], ["updated_at", "2019-05-15 15:51:11.695531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.697570"], ["updated_at", "2019-05-15 15:51:11.697570"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 142], ["author_id", 59]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.700879"], ["updated_at", "2019-05-15 15:51:11.700879"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 143], ["author_id", 60]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 142], ["created_at", "2019-05-15 15:51:11.704139"], ["updated_at", "2019-05-15 15:51:11.704139"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 143], ["created_at", "2019-05-15 15:51:11.705983"], ["updated_at", "2019-05-15 15:51:11.705983"], ["user", "Mills"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 142], ["created_at", "2019-05-15 15:51:11.709389"], ["updated_at", "2019-05-15 15:51:11.709389"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/142" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"142"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 142], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 142]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 142]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 142], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 142], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 142]]
  Rendered books/show.html.erb within layouts/application (5.0ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.725570"], ["updated_at", "2019-05-15 15:51:11.725570"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.729739"], ["updated_at", "2019-05-15 15:51:11.729739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.731920"], ["updated_at", "2019-05-15 15:51:11.731920"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 144], ["author_id", 61]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.735446"], ["updated_at", "2019-05-15 15:51:11.735446"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 145], ["author_id", 62]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 144], ["created_at", "2019-05-15 15:51:11.738706"], ["updated_at", "2019-05-15 15:51:11.738706"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 145], ["created_at", "2019-05-15 15:51:11.740635"], ["updated_at", "2019-05-15 15:51:11.740635"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 144], ["created_at", "2019-05-15 15:51:11.742224"], ["updated_at", "2019-05-15 15:51:11.742224"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/144" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"144"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 144], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 144]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 144]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 144], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 144], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 144]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.758312"], ["updated_at", "2019-05-15 15:51:11.758312"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.762386"], ["updated_at", "2019-05-15 15:51:11.762386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 146], ["created_at", "2019-05-13 15:51:11.763531"], ["updated_at", "2019-05-15 15:51:11.764740"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 147], ["created_at", "2019-05-12 15:51:11.765794"], ["updated_at", "2019-05-15 15:51:11.766656"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 146], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 147], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.7ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.787116"], ["updated_at", "2019-05-15 15:51:11.787116"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.791339"], ["updated_at", "2019-05-15 15:51:11.791339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 148], ["created_at", "2019-05-13 15:51:11.792426"], ["updated_at", "2019-05-15 15:51:11.793584"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 149], ["created_at", "2019-05-12 15:51:11.794623"], ["updated_at", "2019-05-15 15:51:11.795743"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.809612"], ["updated_at", "2019-05-15 15:51:11.809612"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.813941"], ["updated_at", "2019-05-15 15:51:11.813941"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 150], ["author_id", 63]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 150], ["created_at", "2019-05-15 15:51:11.817714"], ["updated_at", "2019-05-15 15:51:11.817714"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:51:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 150]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 150]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 150]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 150]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 150]]
  Rendered books/index.html.erb within layouts/application (8.0ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.912996"], ["updated_at", "2019-05-15 15:51:11.912996"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.915602"], ["updated_at", "2019-05-15 15:51:11.915602"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 151], ["author_id", 64]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 151], ["created_at", "2019-05-15 15:51:11.919254"], ["updated_at", "2019-05-15 15:51:11.919254"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 151], ["created_at", "2019-05-15 15:51:11.920967"], ["updated_at", "2019-05-15 15:51:11.920967"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 151]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.929092"], ["updated_at", "2019-05-15 15:51:11.929092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:11.931911"], ["updated_at", "2019-05-15 15:51:11.931911"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 152], ["author_id", 65]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 152], ["created_at", "2019-05-15 15:51:11.940657"], ["updated_at", "2019-05-15 15:51:11.940657"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 152], ["created_at", "2019-05-15 15:51:11.944168"], ["updated_at", "2019-05-15 15:51:11.944168"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 152]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.949149"], ["updated_at", "2019-05-15 15:51:11.949149"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 153], ["created_at", "2019-05-15 15:51:11.951191"], ["updated_at", "2019-05-15 15:51:11.951191"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 153], ["created_at", "2019-05-15 15:51:11.952850"], ["updated_at", "2019-05-15 15:51:11.952850"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 153], ["created_at", "2019-05-15 15:51:11.954382"], ["updated_at", "2019-05-15 15:51:11.954382"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 153], ["created_at", "2019-05-15 15:51:11.956100"], ["updated_at", "2019-05-15 15:51:11.956100"], ["user", "Vince"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 153], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.962862"], ["updated_at", "2019-05-15 15:51:11.962862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 154], ["created_at", "2019-05-15 15:51:11.965254"], ["updated_at", "2019-05-15 15:51:11.965254"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 154], ["created_at", "2019-05-15 15:51:11.967025"], ["updated_at", "2019-05-15 15:51:11.967025"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 154], ["created_at", "2019-05-15 15:51:11.968583"], ["updated_at", "2019-05-15 15:51:11.968583"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 154], ["created_at", "2019-05-15 15:51:11.970120"], ["updated_at", "2019-05-15 15:51:11.970120"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 154], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.976157"], ["updated_at", "2019-05-15 15:51:11.976157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 155], ["created_at", "2019-05-15 15:51:11.978785"], ["updated_at", "2019-05-15 15:51:11.978785"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 155], ["created_at", "2019-05-15 15:51:11.980431"], ["updated_at", "2019-05-15 15:51:11.980431"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 155], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.984665"], ["updated_at", "2019-05-15 15:51:11.984665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.986847"], ["updated_at", "2019-05-15 15:51:11.986847"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.988741"], ["updated_at", "2019-05-15 15:51:11.988741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.994909"], ["updated_at", "2019-05-15 15:51:11.994909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.997472"], ["updated_at", "2019-05-15 15:51:11.997472"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:11.999705"], ["updated_at", "2019-05-15 15:51:11.999705"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.003565"], ["updated_at", "2019-05-15 15:51:12.003565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.005599"], ["updated_at", "2019-05-15 15:51:12.005599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 162], ["created_at", "2019-05-15 15:51:12.007859"], ["updated_at", "2019-05-15 15:51:12.007859"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 162], ["created_at", "2019-05-15 15:51:12.011243"], ["updated_at", "2019-05-15 15:51:12.011243"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 163], ["created_at", "2019-05-15 15:51:12.013544"], ["updated_at", "2019-05-15 15:51:12.013544"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (163, 162)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.019097"], ["updated_at", "2019-05-15 15:51:12.019097"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.021197"], ["updated_at", "2019-05-15 15:51:12.021197"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 164], ["created_at", "2019-05-15 15:51:12.023119"], ["updated_at", "2019-05-15 15:51:12.023119"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 164], ["created_at", "2019-05-15 15:51:12.026517"], ["updated_at", "2019-05-15 15:51:12.026517"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 165], ["created_at", "2019-05-15 15:51:12.029055"], ["updated_at", "2019-05-15 15:51:12.029055"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (164, 165)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.034678"], ["updated_at", "2019-05-15 15:51:12.034678"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.036746"], ["updated_at", "2019-05-15 15:51:12.036746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.038643"], ["updated_at", "2019-05-15 15:51:12.038643"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.041651"], ["updated_at", "2019-05-15 15:51:12.041651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 166], ["created_at", "2019-05-15 15:51:12.044940"], ["updated_at", "2019-05-15 15:51:12.044940"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 167], ["created_at", "2019-05-15 15:51:12.047333"], ["updated_at", "2019-05-15 15:51:12.047333"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 168], ["created_at", "2019-05-15 15:51:12.049463"], ["updated_at", "2019-05-15 15:51:12.049463"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 169], ["created_at", "2019-05-15 15:51:12.051374"], ["updated_at", "2019-05-15 15:51:12.051374"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.055900"], ["updated_at", "2019-05-15 15:51:12.055900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.059978"], ["updated_at", "2019-05-15 15:51:12.059978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.062761"], ["updated_at", "2019-05-15 15:51:12.062761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.065538"], ["updated_at", "2019-05-15 15:51:12.065538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 170], ["created_at", "2019-05-15 15:51:12.067675"], ["updated_at", "2019-05-15 15:51:12.067675"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 171], ["created_at", "2019-05-15 15:51:12.069444"], ["updated_at", "2019-05-15 15:51:12.069444"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 172], ["created_at", "2019-05-15 15:51:12.071142"], ["updated_at", "2019-05-15 15:51:12.071142"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 173], ["created_at", "2019-05-15 15:51:12.072949"], ["updated_at", "2019-05-15 15:51:12.072949"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.077798"], ["updated_at", "2019-05-15 15:51:12.077798"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.082096"], ["updated_at", "2019-05-15 15:51:12.082096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.084167"], ["updated_at", "2019-05-15 15:51:12.084167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.086077"], ["updated_at", "2019-05-15 15:51:12.086077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 174], ["created_at", "2019-05-15 15:51:12.087953"], ["updated_at", "2019-05-15 15:51:12.087953"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 175], ["created_at", "2019-05-15 15:51:12.090004"], ["updated_at", "2019-05-15 15:51:12.090004"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 176], ["created_at", "2019-05-15 15:51:12.091900"], ["updated_at", "2019-05-15 15:51:12.091900"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 177], ["created_at", "2019-05-15 15:51:12.093550"], ["updated_at", "2019-05-15 15:51:12.093550"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.097912"], ["updated_at", "2019-05-15 15:51:12.097912"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.102792"], ["updated_at", "2019-05-15 15:51:12.102792"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.105244"], ["updated_at", "2019-05-15 15:51:12.105244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.107434"], ["updated_at", "2019-05-15 15:51:12.107434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 178], ["created_at", "2019-05-15 15:51:12.109343"], ["updated_at", "2019-05-15 15:51:12.109343"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 179], ["created_at", "2019-05-15 15:51:12.111101"], ["updated_at", "2019-05-15 15:51:12.111101"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 180], ["created_at", "2019-05-15 15:51:12.112895"], ["updated_at", "2019-05-15 15:51:12.112895"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 181], ["created_at", "2019-05-15 15:51:12.114700"], ["updated_at", "2019-05-15 15:51:12.114700"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.125963"], ["updated_at", "2019-05-15 15:51:12.125963"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:51:12.128805"], ["updated_at", "2019-05-15 15:51:12.128805"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 182], ["author_id", 66]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 182], ["created_at", "2019-05-15 15:51:12.132320"], ["updated_at", "2019-05-15 15:51:12.132320"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.136442"], ["updated_at", "2019-05-15 15:51:12.136442"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.138708"], ["updated_at", "2019-05-15 15:51:12.138708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.141219"], ["updated_at", "2019-05-15 15:51:12.141219"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.144916"], ["updated_at", "2019-05-15 15:51:12.144916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 183], ["created_at", "2019-05-15 15:51:12.146805"], ["updated_at", "2019-05-15 15:51:12.146805"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 184], ["created_at", "2019-05-15 15:51:12.148693"], ["updated_at", "2019-05-15 15:51:12.148693"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 185], ["created_at", "2019-05-15 15:51:12.150636"], ["updated_at", "2019-05-15 15:51:12.150636"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 186], ["created_at", "2019-05-15 15:51:12.152951"], ["updated_at", "2019-05-15 15:51:12.152951"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 183], ["created_at", "2019-05-15 15:51:12.154730"], ["updated_at", "2019-05-15 15:51:12.154730"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 184], ["created_at", "2019-05-15 15:51:12.156407"], ["updated_at", "2019-05-15 15:51:12.156407"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 185], ["created_at", "2019-05-15 15:51:12.157988"], ["updated_at", "2019-05-15 15:51:12.157988"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 183], ["created_at", "2019-05-15 15:51:12.159540"], ["updated_at", "2019-05-15 15:51:12.159540"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 184], ["created_at", "2019-05-15 15:51:12.161029"], ["updated_at", "2019-05-15 15:51:12.161029"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 183], ["created_at", "2019-05-15 15:51:12.162574"], ["updated_at", "2019-05-15 15:51:12.162574"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.169307"], ["updated_at", "2019-05-15 15:51:12.169307"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 187], ["created_at", "2019-05-13 15:51:12.171653"], ["updated_at", "2019-05-15 15:51:12.173654"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 187], ["created_at", "2019-05-12 15:51:12.174874"], ["updated_at", "2019-05-15 15:51:12.175671"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 187], ["created_at", "2019-05-11 15:51:12.176617"], ["updated_at", "2019-05-15 15:51:12.177420"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:51:12.182420"], ["updated_at", "2019-05-15 15:51:12.182420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 188], ["created_at", "2019-05-13 15:51:12.185208"], ["updated_at", "2019-05-15 15:51:12.187066"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 188], ["created_at", "2019-05-12 15:51:12.188291"], ["updated_at", "2019-05-15 15:51:12.189226"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 188], ["created_at", "2019-05-11 15:51:12.190290"], ["updated_at", "2019-05-15 15:51:12.191049"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-05-15 15:52:15.829968"], ["updated_at", "2019-05-15 15:52:15.829968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-05-15 15:52:15.858904"], ["updated_at", "2019-05-15 15:52:15.858904"]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 189], ["author_id", 67]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-05-15 15:52:15.870261"], ["updated_at", "2019-05-15 15:52:15.870261"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 190], ["author_id", 67]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:15 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 189]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 189]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 189]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 190]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 190]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 190]]
  Rendered books/index.html.erb within layouts/application (27.6ms)
Completed 500 Internal Server Error in 162ms (ActiveRecord: 4.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:52:16.048991"], ["updated_at", "2019-05-15 15:52:16.048991"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:52:16.051538"], ["updated_at", "2019-05-15 15:52:16.051538"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 191], ["author_id", 68]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:52:16.056586"], ["updated_at", "2019-05-15 15:52:16.056586"]]
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 192], ["author_id", 68]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 191], ["created_at", "2019-05-15 15:52:16.071151"], ["updated_at", "2019-05-15 15:52:16.071151"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/68" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"68"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 68]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 191], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 191], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 191], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 191], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 191], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 191]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 192], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 192]]
  Rendered authors/show.html.erb within layouts/application (10.9ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-05-15 15:52:16.103331"], ["updated_at", "2019-05-15 15:52:16.103331"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-05-15 15:52:16.106217"], ["updated_at", "2019-05-15 15:52:16.106217"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 193], ["author_id", 69]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-05-15 15:52:16.110819"], ["updated_at", "2019-05-15 15:52:16.110819"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 193], ["author_id", 70]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-05-15 15:52:16.120022"], ["updated_at", "2019-05-15 15:52:16.120022"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 194], ["author_id", 70]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/69" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"69"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 69]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 193], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.9ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 193]]
  Rendered authors/show.html.erb within layouts/application (7.5ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:52:16.146775"], ["updated_at", "2019-05-15 15:52:16.146775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:52:16.149889"], ["updated_at", "2019-05-15 15:52:16.149889"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 195], ["author_id", 71]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:52:16.154083"], ["updated_at", "2019-05-15 15:52:16.154083"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 195], ["author_id", 72]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:52:16.158615"], ["updated_at", "2019-05-15 15:52:16.158615"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 196], ["author_id", 71]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:52:16.165432"], ["updated_at", "2019-05-15 15:52:16.165432"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 197], ["author_id", 71]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/71" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"71"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 71]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 195], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 195]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 196], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 196]]
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 197], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 197]]
  Rendered authors/show.html.erb within layouts/application (10.7ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:52:16.189773"], ["updated_at", "2019-05-15 15:52:16.189773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:52:16.192359"], ["updated_at", "2019-05-15 15:52:16.192359"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 198], ["author_id", 73]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:52:16.198207"], ["updated_at", "2019-05-15 15:52:16.198207"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 198], ["author_id", 74]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:52:16.203003"], ["updated_at", "2019-05-15 15:52:16.203003"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 199], ["author_id", 73]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:52:16.207568"], ["updated_at", "2019-05-15 15:52:16.207568"]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 200], ["author_id", 73]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/73" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"73"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 73]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 198], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 198]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 199], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 199]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 200], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 200]]
  Rendered authors/show.html.erb within layouts/application (7.4ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.232205"], ["updated_at", "2019-05-15 15:52:16.232205"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 201], ["created_at", "2019-05-15 15:52:16.234960"], ["updated_at", "2019-05-15 15:52:16.234960"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 201], ["created_at", "2019-05-15 15:52:16.237069"], ["updated_at", "2019-05-15 15:52:16.237069"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 201], ["created_at", "2019-05-15 15:52:16.238682"], ["updated_at", "2019-05-15 15:52:16.238682"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 201], ["created_at", "2019-05-15 15:52:16.240329"], ["updated_at", "2019-05-15 15:52:16.240329"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 201]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 201]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 201]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 201]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 201]]
  Rendered books/index.html.erb within layouts/application (10.0ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.266172"], ["updated_at", "2019-05-15 15:52:16.266172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.269399"], ["updated_at", "2019-05-15 15:52:16.269399"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.271863"], ["updated_at", "2019-05-15 15:52:16.271863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.275187"], ["updated_at", "2019-05-15 15:52:16.275187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 202], ["created_at", "2019-05-15 15:52:16.279884"], ["updated_at", "2019-05-15 15:52:16.279884"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 203], ["created_at", "2019-05-15 15:52:16.282146"], ["updated_at", "2019-05-15 15:52:16.282146"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 204], ["created_at", "2019-05-15 15:52:16.284444"], ["updated_at", "2019-05-15 15:52:16.284444"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 205], ["created_at", "2019-05-15 15:52:16.286441"], ["updated_at", "2019-05-15 15:52:16.286441"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 202], ["created_at", "2019-05-15 15:52:16.287999"], ["updated_at", "2019-05-15 15:52:16.287999"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 203], ["created_at", "2019-05-15 15:52:16.289530"], ["updated_at", "2019-05-15 15:52:16.289530"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 204], ["created_at", "2019-05-15 15:52:16.291460"], ["updated_at", "2019-05-15 15:52:16.291460"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 202], ["created_at", "2019-05-15 15:52:16.295383"], ["updated_at", "2019-05-15 15:52:16.295383"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 203], ["created_at", "2019-05-15 15:52:16.297480"], ["updated_at", "2019-05-15 15:52:16.297480"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 202], ["created_at", "2019-05-15 15:52:16.299308"], ["updated_at", "2019-05-15 15:52:16.299308"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 202]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 203]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 204]]
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 205]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 204]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 203]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 202]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 202]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 202]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 203]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 203]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 203]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 204]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 204]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 204]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 205]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 205]]
  [1m[36mAuthor Load (0.5ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 205]]
  Rendered books/index.html.erb within layouts/application (21.6ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 4.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.336596"], ["updated_at", "2019-05-15 15:52:16.336596"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.339077"], ["updated_at", "2019-05-15 15:52:16.339077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.342025"], ["updated_at", "2019-05-15 15:52:16.342025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.344675"], ["updated_at", "2019-05-15 15:52:16.344675"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 206], ["created_at", "2019-05-15 15:52:16.348045"], ["updated_at", "2019-05-15 15:52:16.348045"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 207], ["created_at", "2019-05-15 15:52:16.353269"], ["updated_at", "2019-05-15 15:52:16.353269"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 208], ["created_at", "2019-05-15 15:52:16.355222"], ["updated_at", "2019-05-15 15:52:16.355222"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 209], ["created_at", "2019-05-15 15:52:16.358802"], ["updated_at", "2019-05-15 15:52:16.358802"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 206], ["created_at", "2019-05-15 15:52:16.361620"], ["updated_at", "2019-05-15 15:52:16.361620"], ["user", "Rob"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 207], ["created_at", "2019-05-15 15:52:16.365420"], ["updated_at", "2019-05-15 15:52:16.365420"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 208], ["created_at", "2019-05-15 15:52:16.367669"], ["updated_at", "2019-05-15 15:52:16.367669"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 206], ["created_at", "2019-05-15 15:52:16.369409"], ["updated_at", "2019-05-15 15:52:16.369409"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 207], ["created_at", "2019-05-15 15:52:16.371162"], ["updated_at", "2019-05-15 15:52:16.371162"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 206], ["created_at", "2019-05-15 15:52:16.372865"], ["updated_at", "2019-05-15 15:52:16.372865"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 206]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 207]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 208]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 209]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 208]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 207]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 206]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 206]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 206]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 207]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 207]]
  [1m[36mAuthor Load (2.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 207]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 208]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 208]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 208]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 209]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 209]]
  [1m[36mAuthor Load (0.6ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 209]]
  Rendered books/index.html.erb within layouts/application (30.8ms)
Completed 500 Internal Server Error in 39ms (ActiveRecord: 7.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.418543"], ["updated_at", "2019-05-15 15:52:16.418543"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.422793"], ["updated_at", "2019-05-15 15:52:16.422793"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.427090"], ["updated_at", "2019-05-15 15:52:16.427090"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.431156"], ["updated_at", "2019-05-15 15:52:16.431156"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 210], ["created_at", "2019-05-15 15:52:16.435525"], ["updated_at", "2019-05-15 15:52:16.435525"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 211], ["created_at", "2019-05-15 15:52:16.438721"], ["updated_at", "2019-05-15 15:52:16.438721"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 212], ["created_at", "2019-05-15 15:52:16.440855"], ["updated_at", "2019-05-15 15:52:16.440855"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 213], ["created_at", "2019-05-15 15:52:16.444514"], ["updated_at", "2019-05-15 15:52:16.444514"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 210], ["created_at", "2019-05-15 15:52:16.447091"], ["updated_at", "2019-05-15 15:52:16.447091"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 211], ["created_at", "2019-05-15 15:52:16.449464"], ["updated_at", "2019-05-15 15:52:16.449464"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 212], ["created_at", "2019-05-15 15:52:16.451510"], ["updated_at", "2019-05-15 15:52:16.451510"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 210], ["created_at", "2019-05-15 15:52:16.453647"], ["updated_at", "2019-05-15 15:52:16.453647"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 211], ["created_at", "2019-05-15 15:52:16.455681"], ["updated_at", "2019-05-15 15:52:16.455681"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 210], ["created_at", "2019-05-15 15:52:16.457376"], ["updated_at", "2019-05-15 15:52:16.457376"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 210]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 211]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 212]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 212]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 211]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 210]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 210]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 210]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 211]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 211]]
  [1m[36mAuthor Load (0.5ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 211]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 212]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 212]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 212]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 213]]
  Rendered books/index.html.erb within layouts/application (26.7ms)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 6.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.497460"], ["updated_at", "2019-05-15 15:52:16.497460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.502885"], ["updated_at", "2019-05-15 15:52:16.502885"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.505982"], ["updated_at", "2019-05-15 15:52:16.505982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.508439"], ["updated_at", "2019-05-15 15:52:16.508439"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 214], ["created_at", "2019-05-15 15:52:16.512797"], ["updated_at", "2019-05-15 15:52:16.512797"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 215], ["created_at", "2019-05-15 15:52:16.515177"], ["updated_at", "2019-05-15 15:52:16.515177"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 216], ["created_at", "2019-05-15 15:52:16.517505"], ["updated_at", "2019-05-15 15:52:16.517505"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 217], ["created_at", "2019-05-15 15:52:16.520586"], ["updated_at", "2019-05-15 15:52:16.520586"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 214], ["created_at", "2019-05-15 15:52:16.522683"], ["updated_at", "2019-05-15 15:52:16.522683"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 215], ["created_at", "2019-05-15 15:52:16.524535"], ["updated_at", "2019-05-15 15:52:16.524535"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 216], ["created_at", "2019-05-15 15:52:16.528477"], ["updated_at", "2019-05-15 15:52:16.528477"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 214], ["created_at", "2019-05-15 15:52:16.547436"], ["updated_at", "2019-05-15 15:52:16.547436"], ["user", "Stella"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 215], ["created_at", "2019-05-15 15:52:16.550090"], ["updated_at", "2019-05-15 15:52:16.550090"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 214], ["created_at", "2019-05-15 15:52:16.552050"], ["updated_at", "2019-05-15 15:52:16.552050"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 217]]
  Rendered books/index.html.erb within layouts/application (24.6ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 5.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.588364"], ["updated_at", "2019-05-15 15:52:16.588364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.590669"], ["updated_at", "2019-05-15 15:52:16.590669"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.594617"], ["updated_at", "2019-05-15 15:52:16.594617"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.597602"], ["updated_at", "2019-05-15 15:52:16.597602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 218], ["created_at", "2019-05-15 15:52:16.600046"], ["updated_at", "2019-05-15 15:52:16.600046"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 219], ["created_at", "2019-05-15 15:52:16.602273"], ["updated_at", "2019-05-15 15:52:16.602273"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 220], ["created_at", "2019-05-15 15:52:16.604404"], ["updated_at", "2019-05-15 15:52:16.604404"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 221], ["created_at", "2019-05-15 15:52:16.606498"], ["updated_at", "2019-05-15 15:52:16.606498"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 218], ["created_at", "2019-05-15 15:52:16.608937"], ["updated_at", "2019-05-15 15:52:16.608937"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 219], ["created_at", "2019-05-15 15:52:16.610841"], ["updated_at", "2019-05-15 15:52:16.610841"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 220], ["created_at", "2019-05-15 15:52:16.612570"], ["updated_at", "2019-05-15 15:52:16.612570"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 218], ["created_at", "2019-05-15 15:52:16.614997"], ["updated_at", "2019-05-15 15:52:16.614997"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 219], ["created_at", "2019-05-15 15:52:16.616719"], ["updated_at", "2019-05-15 15:52:16.616719"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 218], ["created_at", "2019-05-15 15:52:16.618353"], ["updated_at", "2019-05-15 15:52:16.618353"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 218]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 221]]
  Rendered books/index.html.erb within layouts/application (19.0ms)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 3.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.648580"], ["updated_at", "2019-05-15 15:52:16.648580"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:16.650989"], ["updated_at", "2019-05-15 15:52:16.650989"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 222], ["author_id", 75]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 222], ["created_at", "2019-05-15 15:52:16.654706"], ["updated_at", "2019-05-15 15:52:16.654706"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 222], ["created_at", "2019-05-15 15:52:16.656528"], ["updated_at", "2019-05-15 15:52:16.656528"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 222], ["created_at", "2019-05-15 15:52:16.658474"], ["updated_at", "2019-05-15 15:52:16.658474"], ["user", "Stella"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 222], ["created_at", "2019-05-15 15:52:16.661856"], ["updated_at", "2019-05-15 15:52:16.661856"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/222" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"222"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 222], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 222], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  Rendered books/show.html.erb within layouts/application (7.9ms)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.684585"], ["updated_at", "2019-05-15 15:52:16.684585"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:16.687075"], ["updated_at", "2019-05-15 15:52:16.687075"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 223], ["author_id", 76]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 223], ["created_at", "2019-05-15 15:52:16.690940"], ["updated_at", "2019-05-15 15:52:16.690940"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 223], ["created_at", "2019-05-15 15:52:16.693789"], ["updated_at", "2019-05-15 15:52:16.693789"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 223], ["created_at", "2019-05-15 15:52:16.697084"], ["updated_at", "2019-05-15 15:52:16.697084"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 223], ["created_at", "2019-05-15 15:52:16.699404"], ["updated_at", "2019-05-15 15:52:16.699404"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/223" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"223"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 223], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 223], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 223], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  Rendered books/show.html.erb within layouts/application (7.1ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.718995"], ["updated_at", "2019-05-15 15:52:16.718995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:16.721490"], ["updated_at", "2019-05-15 15:52:16.721490"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 224], ["author_id", 77]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 224], ["created_at", "2019-05-15 15:52:16.725580"], ["updated_at", "2019-05-15 15:52:16.725580"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 224], ["created_at", "2019-05-15 15:52:16.729688"], ["updated_at", "2019-05-15 15:52:16.729688"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 224], ["created_at", "2019-05-15 15:52:16.731938"], ["updated_at", "2019-05-15 15:52:16.731938"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 224], ["created_at", "2019-05-15 15:52:16.733687"], ["updated_at", "2019-05-15 15:52:16.733687"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/224" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"224"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 224], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 224], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 224], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  Rendered books/show.html.erb within layouts/application (6.7ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-05-15 15:52:16.753525"], ["updated_at", "2019-05-15 15:52:16.753525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/225" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"225"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 225]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 225], ["LIMIT", 3]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 225], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  Rendered books/show.html.erb within layouts/application (6.9ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.771911"], ["updated_at", "2019-05-15 15:52:16.771911"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.774394"], ["updated_at", "2019-05-15 15:52:16.774394"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:16.779390"], ["updated_at", "2019-05-15 15:52:16.779390"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 226], ["author_id", 78]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:52:16.783550"], ["updated_at", "2019-05-15 15:52:16.783550"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 226], ["author_id", 79]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:52:16.787519"], ["updated_at", "2019-05-15 15:52:16.787519"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 227], ["author_id", 80]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 227]]
  Rendered books/index.html.erb within layouts/application (13.8ms)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.820023"], ["updated_at", "2019-05-15 15:52:16.820023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:16.822652"], ["updated_at", "2019-05-15 15:52:16.822652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:16.825927"], ["updated_at", "2019-05-15 15:52:16.825927"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 228], ["author_id", 81]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:52:16.832803"], ["updated_at", "2019-05-15 15:52:16.832803"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 228], ["author_id", 82]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:52:16.837719"], ["updated_at", "2019-05-15 15:52:16.837719"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 229], ["author_id", 83]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 229]]
  Rendered books/index.html.erb within layouts/application (12.5ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (6.4ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (15.3ms)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.1ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.4ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (4.1ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:52:16.954952"], ["updated_at", "2019-05-15 15:52:16.954952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:16.957725"], ["updated_at", "2019-05-15 15:52:16.957725"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 230], ["author_id", 84]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:52:16.964983"], ["updated_at", "2019-05-15 15:52:16.964983"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 230], ["author_id", 85]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 230], ["created_at", "2019-05-15 15:52:16.968910"], ["updated_at", "2019-05-15 15:52:16.968910"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 230], ["created_at", "2019-05-15 15:52:16.971249"], ["updated_at", "2019-05-15 15:52:16.971249"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 230], ["created_at", "2019-05-15 15:52:16.973239"], ["updated_at", "2019-05-15 15:52:16.973239"], ["user", "Mills"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/230" for 127.0.0.1 at 2019-05-15 09:52:16 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"230"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 230], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 230]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 230]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 230], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 230], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 230]]
  Rendered books/show.html.erb within layouts/application (6.8ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:52:16.993863"], ["updated_at", "2019-05-15 15:52:16.993863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:16.997442"], ["updated_at", "2019-05-15 15:52:16.997442"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 231], ["author_id", 86]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:52:17.000932"], ["updated_at", "2019-05-15 15:52:17.000932"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 231], ["author_id", 87]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 231], ["created_at", "2019-05-15 15:52:17.005434"], ["updated_at", "2019-05-15 15:52:17.005434"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 231], ["created_at", "2019-05-15 15:52:17.007798"], ["updated_at", "2019-05-15 15:52:17.007798"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 231], ["created_at", "2019-05-15 15:52:17.011744"], ["updated_at", "2019-05-15 15:52:17.011744"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/231" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"231"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 231], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 231]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 231]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 231], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 231], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 231]]
  Rendered books/show.html.erb within layouts/application (7.3ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.6ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.051603"], ["updated_at", "2019-05-15 15:52:17.051603"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.054098"], ["updated_at", "2019-05-15 15:52:17.054098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.056463"], ["updated_at", "2019-05-15 15:52:17.056463"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 232], ["author_id", 88]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.065012"], ["updated_at", "2019-05-15 15:52:17.065012"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 233], ["author_id", 89]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 232], ["created_at", "2019-05-15 15:52:17.072440"], ["updated_at", "2019-05-15 15:52:17.072440"], ["user", "Mills"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 233], ["created_at", "2019-05-15 15:52:17.077113"], ["updated_at", "2019-05-15 15:52:17.077113"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/232" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"232"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 232], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 232]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 232]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 232], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 232], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 232]]
  Rendered books/show.html.erb within layouts/application (6.0ms)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.110763"], ["updated_at", "2019-05-15 15:52:17.110763"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.114090"], ["updated_at", "2019-05-15 15:52:17.114090"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 234], ["author_id", 90]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/234" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"234"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 234]]
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 234], ["LIMIT", 3]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 234], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 234]]
  Rendered books/show.html.erb within layouts/application (8.1ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.138404"], ["updated_at", "2019-05-15 15:52:17.138404"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.141673"], ["updated_at", "2019-05-15 15:52:17.141673"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 235], ["author_id", 91]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/235" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"235"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 235]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 235]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 235], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 235], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 235]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.166084"], ["updated_at", "2019-05-15 15:52:17.166084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.168969"], ["updated_at", "2019-05-15 15:52:17.168969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.171008"], ["updated_at", "2019-05-15 15:52:17.171008"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 236], ["author_id", 92]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.174970"], ["updated_at", "2019-05-15 15:52:17.174970"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 237], ["author_id", 93]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 236], ["created_at", "2019-05-15 15:52:17.181374"], ["updated_at", "2019-05-15 15:52:17.181374"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 237], ["created_at", "2019-05-15 15:52:17.183360"], ["updated_at", "2019-05-15 15:52:17.183360"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 236], ["created_at", "2019-05-15 15:52:17.184935"], ["updated_at", "2019-05-15 15:52:17.184935"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/236" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"236"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 236], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 236]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 236]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 236], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 236], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 236]]
  Rendered books/show.html.erb within layouts/application (5.5ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.201261"], ["updated_at", "2019-05-15 15:52:17.201261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.203346"], ["updated_at", "2019-05-15 15:52:17.203346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.205530"], ["updated_at", "2019-05-15 15:52:17.205530"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 238], ["author_id", 94]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.211374"], ["updated_at", "2019-05-15 15:52:17.211374"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 239], ["author_id", 95]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 238], ["created_at", "2019-05-15 15:52:17.215407"], ["updated_at", "2019-05-15 15:52:17.215407"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 239], ["created_at", "2019-05-15 15:52:17.217180"], ["updated_at", "2019-05-15 15:52:17.217180"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 238], ["created_at", "2019-05-15 15:52:17.218677"], ["updated_at", "2019-05-15 15:52:17.218677"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/238" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"238"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 238]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 238]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 238], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 238], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 238]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.235327"], ["updated_at", "2019-05-15 15:52:17.235327"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.239948"], ["updated_at", "2019-05-15 15:52:17.239948"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 240], ["created_at", "2019-05-13 15:52:17.241429"], ["updated_at", "2019-05-15 15:52:17.243214"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 241], ["created_at", "2019-05-12 15:52:17.244890"], ["updated_at", "2019-05-15 15:52:17.246425"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 241], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (6.7ms)
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.277613"], ["updated_at", "2019-05-15 15:52:17.277613"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.282244"], ["updated_at", "2019-05-15 15:52:17.282244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 242], ["created_at", "2019-05-13 15:52:17.283448"], ["updated_at", "2019-05-15 15:52:17.284760"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 243], ["created_at", "2019-05-12 15:52:17.286058"], ["updated_at", "2019-05-15 15:52:17.287187"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 242], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 243], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.9ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.309282"], ["updated_at", "2019-05-15 15:52:17.309282"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.312786"], ["updated_at", "2019-05-15 15:52:17.312786"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 244], ["author_id", 96]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 244], ["created_at", "2019-05-15 15:52:17.316708"], ["updated_at", "2019-05-15 15:52:17.316708"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:52:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 244]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 244]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 244]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 244]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 244]]
  Rendered books/index.html.erb within layouts/application (9.9ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.422473"], ["updated_at", "2019-05-15 15:52:17.422473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.425171"], ["updated_at", "2019-05-15 15:52:17.425171"]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 245], ["author_id", 97]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 245], ["created_at", "2019-05-15 15:52:17.432693"], ["updated_at", "2019-05-15 15:52:17.432693"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 245], ["created_at", "2019-05-15 15:52:17.434637"], ["updated_at", "2019-05-15 15:52:17.434637"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 245]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.439832"], ["updated_at", "2019-05-15 15:52:17.439832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.443635"], ["updated_at", "2019-05-15 15:52:17.443635"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 246], ["author_id", 98]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 246], ["created_at", "2019-05-15 15:52:17.448489"], ["updated_at", "2019-05-15 15:52:17.448489"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 246], ["created_at", "2019-05-15 15:52:17.450337"], ["updated_at", "2019-05-15 15:52:17.450337"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 246]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.454607"], ["updated_at", "2019-05-15 15:52:17.454607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 247], ["created_at", "2019-05-15 15:52:17.456912"], ["updated_at", "2019-05-15 15:52:17.456912"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 247], ["created_at", "2019-05-15 15:52:17.460775"], ["updated_at", "2019-05-15 15:52:17.460775"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 247], ["created_at", "2019-05-15 15:52:17.463811"], ["updated_at", "2019-05-15 15:52:17.463811"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 247], ["created_at", "2019-05-15 15:52:17.465824"], ["updated_at", "2019-05-15 15:52:17.465824"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 247], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.471084"], ["updated_at", "2019-05-15 15:52:17.471084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 248], ["created_at", "2019-05-15 15:52:17.473570"], ["updated_at", "2019-05-15 15:52:17.473570"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 248], ["created_at", "2019-05-15 15:52:17.475669"], ["updated_at", "2019-05-15 15:52:17.475669"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 248], ["created_at", "2019-05-15 15:52:17.480710"], ["updated_at", "2019-05-15 15:52:17.480710"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 248], ["created_at", "2019-05-15 15:52:17.482582"], ["updated_at", "2019-05-15 15:52:17.482582"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 248], ["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.488731"], ["updated_at", "2019-05-15 15:52:17.488731"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 249], ["created_at", "2019-05-15 15:52:17.491067"], ["updated_at", "2019-05-15 15:52:17.491067"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 249], ["created_at", "2019-05-15 15:52:17.496289"], ["updated_at", "2019-05-15 15:52:17.496289"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 249], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.502988"], ["updated_at", "2019-05-15 15:52:17.502988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.505733"], ["updated_at", "2019-05-15 15:52:17.505733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.508183"], ["updated_at", "2019-05-15 15:52:17.508183"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.516485"], ["updated_at", "2019-05-15 15:52:17.516485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.518853"], ["updated_at", "2019-05-15 15:52:17.518853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.521292"], ["updated_at", "2019-05-15 15:52:17.521292"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.530326"], ["updated_at", "2019-05-15 15:52:17.530326"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.533505"], ["updated_at", "2019-05-15 15:52:17.533505"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 256], ["created_at", "2019-05-15 15:52:17.536050"], ["updated_at", "2019-05-15 15:52:17.536050"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 256], ["created_at", "2019-05-15 15:52:17.538067"], ["updated_at", "2019-05-15 15:52:17.538067"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 257], ["created_at", "2019-05-15 15:52:17.540051"], ["updated_at", "2019-05-15 15:52:17.540051"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (257, 256)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.548368"], ["updated_at", "2019-05-15 15:52:17.548368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.552575"], ["updated_at", "2019-05-15 15:52:17.552575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 258], ["created_at", "2019-05-15 15:52:17.555085"], ["updated_at", "2019-05-15 15:52:17.555085"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 258], ["created_at", "2019-05-15 15:52:17.557788"], ["updated_at", "2019-05-15 15:52:17.557788"], ["user", "Rob"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 259], ["created_at", "2019-05-15 15:52:17.561463"], ["updated_at", "2019-05-15 15:52:17.561463"], ["user", "Joe"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (258, 259)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.571611"], ["updated_at", "2019-05-15 15:52:17.571611"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.576882"], ["updated_at", "2019-05-15 15:52:17.576882"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.581727"], ["updated_at", "2019-05-15 15:52:17.581727"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.586067"], ["updated_at", "2019-05-15 15:52:17.586067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 260], ["created_at", "2019-05-15 15:52:17.589352"], ["updated_at", "2019-05-15 15:52:17.589352"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 261], ["created_at", "2019-05-15 15:52:17.593142"], ["updated_at", "2019-05-15 15:52:17.593142"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 262], ["created_at", "2019-05-15 15:52:17.596710"], ["updated_at", "2019-05-15 15:52:17.596710"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 263], ["created_at", "2019-05-15 15:52:17.601277"], ["updated_at", "2019-05-15 15:52:17.601277"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.608301"], ["updated_at", "2019-05-15 15:52:17.608301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.613603"], ["updated_at", "2019-05-15 15:52:17.613603"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.616869"], ["updated_at", "2019-05-15 15:52:17.616869"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.620123"], ["updated_at", "2019-05-15 15:52:17.620123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 264], ["created_at", "2019-05-15 15:52:17.622090"], ["updated_at", "2019-05-15 15:52:17.622090"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 265], ["created_at", "2019-05-15 15:52:17.623938"], ["updated_at", "2019-05-15 15:52:17.623938"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 266], ["created_at", "2019-05-15 15:52:17.626778"], ["updated_at", "2019-05-15 15:52:17.626778"], ["user", "Joe"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 267], ["created_at", "2019-05-15 15:52:17.630222"], ["updated_at", "2019-05-15 15:52:17.630222"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.636151"], ["updated_at", "2019-05-15 15:52:17.636151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.641892"], ["updated_at", "2019-05-15 15:52:17.641892"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.647553"], ["updated_at", "2019-05-15 15:52:17.647553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.650405"], ["updated_at", "2019-05-15 15:52:17.650405"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 268], ["created_at", "2019-05-15 15:52:17.652765"], ["updated_at", "2019-05-15 15:52:17.652765"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 269], ["created_at", "2019-05-15 15:52:17.655019"], ["updated_at", "2019-05-15 15:52:17.655019"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 270], ["created_at", "2019-05-15 15:52:17.657271"], ["updated_at", "2019-05-15 15:52:17.657271"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 271], ["created_at", "2019-05-15 15:52:17.659565"], ["updated_at", "2019-05-15 15:52:17.659565"], ["user", "Pam"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.668643"], ["updated_at", "2019-05-15 15:52:17.668643"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.670932"], ["updated_at", "2019-05-15 15:52:17.670932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.673309"], ["updated_at", "2019-05-15 15:52:17.673309"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.676027"], ["updated_at", "2019-05-15 15:52:17.676027"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 272], ["created_at", "2019-05-15 15:52:17.679165"], ["updated_at", "2019-05-15 15:52:17.679165"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 273], ["created_at", "2019-05-15 15:52:17.683976"], ["updated_at", "2019-05-15 15:52:17.683976"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 274], ["created_at", "2019-05-15 15:52:17.686745"], ["updated_at", "2019-05-15 15:52:17.686745"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 275], ["created_at", "2019-05-15 15:52:17.688942"], ["updated_at", "2019-05-15 15:52:17.688942"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.699701"], ["updated_at", "2019-05-15 15:52:17.699701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:52:17.703333"], ["updated_at", "2019-05-15 15:52:17.703333"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 276], ["author_id", 99]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 276], ["created_at", "2019-05-15 15:52:17.716899"], ["updated_at", "2019-05-15 15:52:17.716899"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.721440"], ["updated_at", "2019-05-15 15:52:17.721440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.723828"], ["updated_at", "2019-05-15 15:52:17.723828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.728175"], ["updated_at", "2019-05-15 15:52:17.728175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.731601"], ["updated_at", "2019-05-15 15:52:17.731601"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 277], ["created_at", "2019-05-15 15:52:17.733790"], ["updated_at", "2019-05-15 15:52:17.733790"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 278], ["created_at", "2019-05-15 15:52:17.735612"], ["updated_at", "2019-05-15 15:52:17.735612"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 279], ["created_at", "2019-05-15 15:52:17.737723"], ["updated_at", "2019-05-15 15:52:17.737723"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 280], ["created_at", "2019-05-15 15:52:17.739552"], ["updated_at", "2019-05-15 15:52:17.739552"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 277], ["created_at", "2019-05-15 15:52:17.741087"], ["updated_at", "2019-05-15 15:52:17.741087"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 278], ["created_at", "2019-05-15 15:52:17.742899"], ["updated_at", "2019-05-15 15:52:17.742899"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 279], ["created_at", "2019-05-15 15:52:17.745288"], ["updated_at", "2019-05-15 15:52:17.745288"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 277], ["created_at", "2019-05-15 15:52:17.747076"], ["updated_at", "2019-05-15 15:52:17.747076"], ["user", "Stella"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 278], ["created_at", "2019-05-15 15:52:17.748943"], ["updated_at", "2019-05-15 15:52:17.748943"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 277], ["created_at", "2019-05-15 15:52:17.750761"], ["updated_at", "2019-05-15 15:52:17.750761"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.761007"], ["updated_at", "2019-05-15 15:52:17.761007"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 281], ["created_at", "2019-05-13 15:52:17.762751"], ["updated_at", "2019-05-15 15:52:17.763916"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 281], ["created_at", "2019-05-12 15:52:17.764910"], ["updated_at", "2019-05-15 15:52:17.765678"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 281], ["created_at", "2019-05-11 15:52:17.766591"], ["updated_at", "2019-05-15 15:52:17.767382"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:52:17.771846"], ["updated_at", "2019-05-15 15:52:17.771846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 282], ["created_at", "2019-05-13 15:52:17.772973"], ["updated_at", "2019-05-15 15:52:17.774082"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 282], ["created_at", "2019-05-12 15:52:17.775223"], ["updated_at", "2019-05-15 15:52:17.776932"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 282], ["created_at", "2019-05-11 15:52:17.779160"], ["updated_at", "2019-05-15 15:52:17.780122"], ["user", "Stella"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-05-15 15:55:59.123719"], ["updated_at", "2019-05-15 15:55:59.123719"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-05-15 15:55:59.147980"], ["updated_at", "2019-05-15 15:55:59.147980"]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 283], ["author_id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-05-15 15:55:59.163325"], ["updated_at", "2019-05-15 15:55:59.163325"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 284], ["author_id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 283]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 283]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 283]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 284]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 284]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 284]]
  Rendered books/index.html.erb within layouts/application (23.8ms)
Completed 200 OK in 231ms (Views: 223.9ms | ActiveRecord: 4.3ms)
Started GET "/authors/100" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"100"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 100]]
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 283], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 283]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 284], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 284]]
  Rendered authors/show.html.erb within layouts/application (10.4ms)
Completed 200 OK in 18ms (Views: 12.0ms | ActiveRecord: 2.1ms)
Started GET "/books/283" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"283"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 283]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 283]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 283], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 283], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 283]]
  Rendered books/show.html.erb within layouts/application (7.5ms)
Completed 200 OK in 12ms (Views: 7.0ms | ActiveRecord: 2.0ms)
Started GET "/authors/100" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"100"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 100]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 283], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 283]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 284], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 284]]
  Rendered authors/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:55:59.485459"], ["updated_at", "2019-05-15 15:55:59.485459"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:55:59.490436"], ["updated_at", "2019-05-15 15:55:59.490436"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 285], ["author_id", 101]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:55:59.495567"], ["updated_at", "2019-05-15 15:55:59.495567"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 286], ["author_id", 101]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 285], ["created_at", "2019-05-15 15:55:59.507040"], ["updated_at", "2019-05-15 15:55:59.507040"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/101" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"101"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 101]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 285], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 285], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 285], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 285], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 285], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 285]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 286], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 286]]
  Rendered authors/show.html.erb within layouts/application (7.3ms)
Completed 200 OK in 9ms (Views: 7.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-05-15 15:55:59.525820"], ["updated_at", "2019-05-15 15:55:59.525820"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-05-15 15:55:59.531069"], ["updated_at", "2019-05-15 15:55:59.531069"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 287], ["author_id", 102]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-05-15 15:55:59.534737"], ["updated_at", "2019-05-15 15:55:59.534737"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 287], ["author_id", 103]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-05-15 15:55:59.539279"], ["updated_at", "2019-05-15 15:55:59.539279"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 288], ["author_id", 103]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/102" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"102"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 102]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 287], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 287]]
  Rendered authors/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.0ms)
Started DELETE "/authors/102" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"102"}
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 102]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 287[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 287]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 287]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 125]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 126]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 287]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 102]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 102]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 3.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 288]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 288]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 288]]
  Rendered books/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:55:59.587275"], ["updated_at", "2019-05-15 15:55:59.587275"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:55:59.592432"], ["updated_at", "2019-05-15 15:55:59.592432"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 289], ["author_id", 104]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:55:59.596052"], ["updated_at", "2019-05-15 15:55:59.596052"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 289], ["author_id", 105]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:55:59.601520"], ["updated_at", "2019-05-15 15:55:59.601520"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 290], ["author_id", 104]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:55:59.606013"], ["updated_at", "2019-05-15 15:55:59.606013"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 291], ["author_id", 104]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/104" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"104"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 104]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 289], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 289]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 290], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 290]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 291], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 291]]
  Rendered authors/show.html.erb within layouts/application (7.4ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:55:59.629046"], ["updated_at", "2019-05-15 15:55:59.629046"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:55:59.634368"], ["updated_at", "2019-05-15 15:55:59.634368"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 292], ["author_id", 106]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:55:59.637927"], ["updated_at", "2019-05-15 15:55:59.637927"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 292], ["author_id", 107]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:55:59.642147"], ["updated_at", "2019-05-15 15:55:59.642147"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 293], ["author_id", 106]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:55:59.646657"], ["updated_at", "2019-05-15 15:55:59.646657"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 294], ["author_id", 106]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/106" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"106"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 106]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 292], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 292]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 293], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 293]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 294], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 294]]
  Rendered authors/show.html.erb within layouts/application (8.3ms)
Completed 200 OK in 10ms (Views: 7.8ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.667070"], ["updated_at", "2019-05-15 15:55:59.667070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 295], ["created_at", "2019-05-15 15:55:59.669377"], ["updated_at", "2019-05-15 15:55:59.669377"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 295], ["created_at", "2019-05-15 15:55:59.671099"], ["updated_at", "2019-05-15 15:55:59.671099"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 295], ["created_at", "2019-05-15 15:55:59.672736"], ["updated_at", "2019-05-15 15:55:59.672736"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 295], ["created_at", "2019-05-15 15:55:59.674381"], ["updated_at", "2019-05-15 15:55:59.674381"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 295]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 295]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 295]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 295]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 295]]
  Rendered books/index.html.erb within layouts/application (11.1ms)
Completed 200 OK in 13ms (Views: 9.4ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 295]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 295]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.696695"], ["updated_at", "2019-05-15 15:55:59.696695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.702050"], ["updated_at", "2019-05-15 15:55:59.702050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.704249"], ["updated_at", "2019-05-15 15:55:59.704249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.706181"], ["updated_at", "2019-05-15 15:55:59.706181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 296], ["created_at", "2019-05-15 15:55:59.708106"], ["updated_at", "2019-05-15 15:55:59.708106"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 297], ["created_at", "2019-05-15 15:55:59.710005"], ["updated_at", "2019-05-15 15:55:59.710005"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 298], ["created_at", "2019-05-15 15:55:59.711887"], ["updated_at", "2019-05-15 15:55:59.711887"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 299], ["created_at", "2019-05-15 15:55:59.713857"], ["updated_at", "2019-05-15 15:55:59.713857"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 296], ["created_at", "2019-05-15 15:55:59.715793"], ["updated_at", "2019-05-15 15:55:59.715793"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 297], ["created_at", "2019-05-15 15:55:59.717798"], ["updated_at", "2019-05-15 15:55:59.717798"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 298], ["created_at", "2019-05-15 15:55:59.719478"], ["updated_at", "2019-05-15 15:55:59.719478"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 296], ["created_at", "2019-05-15 15:55:59.721043"], ["updated_at", "2019-05-15 15:55:59.721043"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 297], ["created_at", "2019-05-15 15:55:59.722711"], ["updated_at", "2019-05-15 15:55:59.722711"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 296], ["created_at", "2019-05-15 15:55:59.724354"], ["updated_at", "2019-05-15 15:55:59.724354"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 296]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 297]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 298]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 299]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 298]]
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 297]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 296]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 296]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 296]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 297]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 297]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 297]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 298]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 298]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 298]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 299]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 299]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 299]]
  Rendered books/index.html.erb within layouts/application (17.1ms)
Completed 200 OK in 19ms (Views: 14.6ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 296]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 297]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 298]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 299]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 298]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 297]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 296]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 296]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 296]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 297]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 297]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 297]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 298]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 298]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 298]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 299]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 299]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 299]]
  Rendered books/index.html.erb within layouts/application (30.7ms)
Completed 200 OK in 32ms (Views: 27.7ms | ActiveRecord: 4.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.784697"], ["updated_at", "2019-05-15 15:55:59.784697"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.787612"], ["updated_at", "2019-05-15 15:55:59.787612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.790060"], ["updated_at", "2019-05-15 15:55:59.790060"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.793485"], ["updated_at", "2019-05-15 15:55:59.793485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 300], ["created_at", "2019-05-15 15:55:59.795490"], ["updated_at", "2019-05-15 15:55:59.795490"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 301], ["created_at", "2019-05-15 15:55:59.797872"], ["updated_at", "2019-05-15 15:55:59.797872"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 302], ["created_at", "2019-05-15 15:55:59.799833"], ["updated_at", "2019-05-15 15:55:59.799833"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 303], ["created_at", "2019-05-15 15:55:59.801770"], ["updated_at", "2019-05-15 15:55:59.801770"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 300], ["created_at", "2019-05-15 15:55:59.803408"], ["updated_at", "2019-05-15 15:55:59.803408"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 301], ["created_at", "2019-05-15 15:55:59.805061"], ["updated_at", "2019-05-15 15:55:59.805061"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 302], ["created_at", "2019-05-15 15:55:59.806669"], ["updated_at", "2019-05-15 15:55:59.806669"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 300], ["created_at", "2019-05-15 15:55:59.808222"], ["updated_at", "2019-05-15 15:55:59.808222"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 301], ["created_at", "2019-05-15 15:55:59.809927"], ["updated_at", "2019-05-15 15:55:59.809927"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 300], ["created_at", "2019-05-15 15:55:59.811578"], ["updated_at", "2019-05-15 15:55:59.811578"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 300]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 303]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 300]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 300]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 300]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 302]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 303]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 303]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 303]]
  Rendered books/index.html.erb within layouts/application (17.9ms)
Completed 200 OK in 20ms (Views: 15.4ms | ActiveRecord: 3.7ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 300]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 303]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 303]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 303]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 303]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 302]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 300]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 300]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 300]]
  Rendered books/index.html.erb within layouts/application (17.5ms)
Completed 200 OK in 19ms (Views: 14.9ms | ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.858647"], ["updated_at", "2019-05-15 15:55:59.858647"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.863087"], ["updated_at", "2019-05-15 15:55:59.863087"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.865334"], ["updated_at", "2019-05-15 15:55:59.865334"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.867367"], ["updated_at", "2019-05-15 15:55:59.867367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 304], ["created_at", "2019-05-15 15:55:59.869337"], ["updated_at", "2019-05-15 15:55:59.869337"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 305], ["created_at", "2019-05-15 15:55:59.871251"], ["updated_at", "2019-05-15 15:55:59.871251"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 306], ["created_at", "2019-05-15 15:55:59.873051"], ["updated_at", "2019-05-15 15:55:59.873051"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 307], ["created_at", "2019-05-15 15:55:59.874945"], ["updated_at", "2019-05-15 15:55:59.874945"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 304], ["created_at", "2019-05-15 15:55:59.876767"], ["updated_at", "2019-05-15 15:55:59.876767"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 305], ["created_at", "2019-05-15 15:55:59.878714"], ["updated_at", "2019-05-15 15:55:59.878714"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 306], ["created_at", "2019-05-15 15:55:59.880968"], ["updated_at", "2019-05-15 15:55:59.880968"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 304], ["created_at", "2019-05-15 15:55:59.883058"], ["updated_at", "2019-05-15 15:55:59.883058"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 305], ["created_at", "2019-05-15 15:55:59.884917"], ["updated_at", "2019-05-15 15:55:59.884917"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 304], ["created_at", "2019-05-15 15:55:59.886683"], ["updated_at", "2019-05-15 15:55:59.886683"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 304]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 307]]
  Rendered books/index.html.erb within layouts/application (17.6ms)
Completed 200 OK in 19ms (Views: 15.1ms | ActiveRecord: 3.7ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 304]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 307]]
  Rendered books/index.html.erb within layouts/application (17.7ms)
Completed 200 OK in 19ms (Views: 15.3ms | ActiveRecord: 3.5ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 307]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 307]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 304]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 304]]
  Rendered books/index.html.erb within layouts/application (18.4ms)
Completed 200 OK in 20ms (Views: 15.8ms | ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.956587"], ["updated_at", "2019-05-15 15:55:59.956587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.960347"], ["updated_at", "2019-05-15 15:55:59.960347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.963107"], ["updated_at", "2019-05-15 15:55:59.963107"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:55:59.965713"], ["updated_at", "2019-05-15 15:55:59.965713"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 308], ["created_at", "2019-05-15 15:55:59.967905"], ["updated_at", "2019-05-15 15:55:59.967905"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 309], ["created_at", "2019-05-15 15:55:59.969839"], ["updated_at", "2019-05-15 15:55:59.969839"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 310], ["created_at", "2019-05-15 15:55:59.971751"], ["updated_at", "2019-05-15 15:55:59.971751"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 311], ["created_at", "2019-05-15 15:55:59.973573"], ["updated_at", "2019-05-15 15:55:59.973573"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 308], ["created_at", "2019-05-15 15:55:59.975234"], ["updated_at", "2019-05-15 15:55:59.975234"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 309], ["created_at", "2019-05-15 15:55:59.977212"], ["updated_at", "2019-05-15 15:55:59.977212"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 310], ["created_at", "2019-05-15 15:55:59.979184"], ["updated_at", "2019-05-15 15:55:59.979184"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 308], ["created_at", "2019-05-15 15:55:59.981635"], ["updated_at", "2019-05-15 15:55:59.981635"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 309], ["created_at", "2019-05-15 15:55:59.983602"], ["updated_at", "2019-05-15 15:55:59.983602"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 308], ["created_at", "2019-05-15 15:55:59.985699"], ["updated_at", "2019-05-15 15:55:59.985699"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:55:59 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 308]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 311]]
  Rendered books/index.html.erb within layouts/application (27.6ms)
Completed 200 OK in 30ms (Views: 24.6ms | ActiveRecord: 4.5ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (308, 309, 310, 311)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 308]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 311]]
  Rendered books/index.html.erb within layouts/application (20.7ms)
Completed 200 OK in 25ms (Views: 17.8ms | ActiveRecord: 4.8ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (311, 310, 309, 308)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 311]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 311]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 310]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 310]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 309]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 309]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 308]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 308]]
  Rendered books/index.html.erb within layouts/application (21.3ms)
Completed 200 OK in 25ms (Views: 18.3ms | ActiveRecord: 5.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.080451"], ["updated_at", "2019-05-15 15:56:00.080451"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.084971"], ["updated_at", "2019-05-15 15:56:00.084971"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.087438"], ["updated_at", "2019-05-15 15:56:00.087438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.089855"], ["updated_at", "2019-05-15 15:56:00.089855"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 312], ["created_at", "2019-05-15 15:56:00.092412"], ["updated_at", "2019-05-15 15:56:00.092412"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 313], ["created_at", "2019-05-15 15:56:00.094876"], ["updated_at", "2019-05-15 15:56:00.094876"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 314], ["created_at", "2019-05-15 15:56:00.097644"], ["updated_at", "2019-05-15 15:56:00.097644"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 315], ["created_at", "2019-05-15 15:56:00.100227"], ["updated_at", "2019-05-15 15:56:00.100227"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 312], ["created_at", "2019-05-15 15:56:00.102300"], ["updated_at", "2019-05-15 15:56:00.102300"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 313], ["created_at", "2019-05-15 15:56:00.104369"], ["updated_at", "2019-05-15 15:56:00.104369"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 314], ["created_at", "2019-05-15 15:56:00.106319"], ["updated_at", "2019-05-15 15:56:00.106319"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 312], ["created_at", "2019-05-15 15:56:00.108520"], ["updated_at", "2019-05-15 15:56:00.108520"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 313], ["created_at", "2019-05-15 15:56:00.110679"], ["updated_at", "2019-05-15 15:56:00.110679"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 312], ["created_at", "2019-05-15 15:56:00.112655"], ["updated_at", "2019-05-15 15:56:00.112655"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 312]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 312]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 312]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 312]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 313]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 315]]
  Rendered books/index.html.erb within layouts/application (22.3ms)
Completed 200 OK in 24ms (Views: 19.1ms | ActiveRecord: 4.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 312]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.152651"], ["updated_at", "2019-05-15 15:56:00.152651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.157249"], ["updated_at", "2019-05-15 15:56:00.157249"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 316], ["author_id", 108]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 316], ["created_at", "2019-05-15 15:56:00.161775"], ["updated_at", "2019-05-15 15:56:00.161775"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 316], ["created_at", "2019-05-15 15:56:00.165447"], ["updated_at", "2019-05-15 15:56:00.165447"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 316], ["created_at", "2019-05-15 15:56:00.168328"], ["updated_at", "2019-05-15 15:56:00.168328"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 316], ["created_at", "2019-05-15 15:56:00.170605"], ["updated_at", "2019-05-15 15:56:00.170605"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/316" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"316"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 316], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 316]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 316], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 316], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  Rendered books/show.html.erb within layouts/application (6.8ms)
Completed 200 OK in 10ms (Views: 7.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.187839"], ["updated_at", "2019-05-15 15:56:00.187839"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.192222"], ["updated_at", "2019-05-15 15:56:00.192222"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 317], ["author_id", 109]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 317], ["created_at", "2019-05-15 15:56:00.197353"], ["updated_at", "2019-05-15 15:56:00.197353"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 317], ["created_at", "2019-05-15 15:56:00.199716"], ["updated_at", "2019-05-15 15:56:00.199716"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 317], ["created_at", "2019-05-15 15:56:00.202048"], ["updated_at", "2019-05-15 15:56:00.202048"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 317], ["created_at", "2019-05-15 15:56:00.204015"], ["updated_at", "2019-05-15 15:56:00.204015"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/317" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"317"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 317], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 317]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 317]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 317], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 317], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 317]]
  Rendered books/show.html.erb within layouts/application (6.8ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.225359"], ["updated_at", "2019-05-15 15:56:00.225359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.229467"], ["updated_at", "2019-05-15 15:56:00.229467"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 318], ["author_id", 110]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 318], ["created_at", "2019-05-15 15:56:00.246951"], ["updated_at", "2019-05-15 15:56:00.246951"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 318], ["created_at", "2019-05-15 15:56:00.248925"], ["updated_at", "2019-05-15 15:56:00.248925"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 318], ["created_at", "2019-05-15 15:56:00.250661"], ["updated_at", "2019-05-15 15:56:00.250661"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 318], ["created_at", "2019-05-15 15:56:00.252489"], ["updated_at", "2019-05-15 15:56:00.252489"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/318" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"318"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 318]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 318], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 318], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  Rendered books/show.html.erb within layouts/application (5.6ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-05-15 15:56:00.268736"], ["updated_at", "2019-05-15 15:56:00.268736"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/319" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"319"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 319]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 319], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 319], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  Rendered books/show.html.erb within layouts/application (4.0ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.1ms)
Started DELETE "/books/319" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"319"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 319]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 319]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.295237"], ["updated_at", "2019-05-15 15:56:00.295237"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.297448"], ["updated_at", "2019-05-15 15:56:00.297448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.299380"], ["updated_at", "2019-05-15 15:56:00.299380"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 320], ["author_id", 111]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:56:00.302633"], ["updated_at", "2019-05-15 15:56:00.302633"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 320], ["author_id", 112]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:56:00.305940"], ["updated_at", "2019-05-15 15:56:00.305940"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 321], ["author_id", 113]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 320]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 321]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 321]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 321]]
  Rendered books/index.html.erb within layouts/application (10.3ms)
Completed 200 OK in 12ms (Views: 8.9ms | ActiveRecord: 2.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.346662"], ["updated_at", "2019-05-15 15:56:00.346662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.348799"], ["updated_at", "2019-05-15 15:56:00.348799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.350742"], ["updated_at", "2019-05-15 15:56:00.350742"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 322], ["author_id", 114]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:56:00.354069"], ["updated_at", "2019-05-15 15:56:00.354069"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 322], ["author_id", 115]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:56:00.357303"], ["updated_at", "2019-05-15 15:56:00.357303"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 323], ["author_id", 116]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 323]]
  Rendered books/index.html.erb within layouts/application (9.0ms)
Completed 200 OK in 12ms (Views: 8.4ms | ActiveRecord: 2.1ms)
Started GET "/books/322" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"322"}
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 322], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 322], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 322], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  Rendered books/show.html.erb within layouts/application (4.2ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.2ms)
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (9.8ms)
Completed 200 OK in 13ms (Views: 11.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-05-15 15:56:00.413696"], ["updated_at", "2019-05-15 15:56:00.413696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:56:00.424648"], ["updated_at", "2019-05-15 15:56:00.424648"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:56:00.427056"], ["updated_at", "2019-05-15 15:56:00.427056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 324], ["author_id", 118]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 324], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.3ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 324]]
  Rendered books/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.5ms)
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 324], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.7ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:56:00.463332"], ["updated_at", "2019-05-15 15:56:00.463332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:56:00.465985"], ["updated_at", "2019-05-15 15:56:00.465985"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 325], ["author_id", 119]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:56:00.470867"], ["updated_at", "2019-05-15 15:56:00.470867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 325], ["author_id", 120]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 325], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.3ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 325]]
  Rendered books/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.6ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:56:00.492350"], ["updated_at", "2019-05-15 15:56:00.492350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:56:00.506160"], ["updated_at", "2019-05-15 15:56:00.506160"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 326], ["author_id", 121]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:56:00.511827"], ["updated_at", "2019-05-15 15:56:00.511827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 326], ["author_id", 122]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 326], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 326]]
  Rendered books/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.5ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:56:00.546821"], ["updated_at", "2019-05-15 15:56:00.546821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:56:00.550281"], ["updated_at", "2019-05-15 15:56:00.550281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 2.8ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 3.2ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-05-15 15:56:00.594684"], ["updated_at", "2019-05-15 15:56:00.594684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 13ms (ActiveRecord: 2.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 327]]
  Rendered books/index.html.erb within layouts/application (6.5ms)
Completed 200 OK in 13ms (Views: 10.4ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:56:00.649673"], ["updated_at", "2019-05-15 15:56:00.649673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:56:00.651859"], ["updated_at", "2019-05-15 15:56:00.651859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 328], ["author_id", 125]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:56:00.656088"], ["updated_at", "2019-05-15 15:56:00.656088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 328], ["author_id", 126]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 328], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 3.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 328]]
  Rendered books/index.html.erb within layouts/application (7.9ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 2.3ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:56:00.674913"], ["updated_at", "2019-05-15 15:56:00.674913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.677314"], ["updated_at", "2019-05-15 15:56:00.677314"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 329], ["author_id", 127]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:56:00.682541"], ["updated_at", "2019-05-15 15:56:00.682541"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 329], ["author_id", 128]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 329], ["created_at", "2019-05-15 15:56:00.685771"], ["updated_at", "2019-05-15 15:56:00.685771"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 329], ["created_at", "2019-05-15 15:56:00.687362"], ["updated_at", "2019-05-15 15:56:00.687362"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 329], ["created_at", "2019-05-15 15:56:00.688880"], ["updated_at", "2019-05-15 15:56:00.688880"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/329" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"329"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 329], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 329]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 329], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 329], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  Rendered books/show.html.erb within layouts/application (5.7ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:56:00.710575"], ["updated_at", "2019-05-15 15:56:00.710575"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.717130"], ["updated_at", "2019-05-15 15:56:00.717130"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 330], ["author_id", 129]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:56:00.722172"], ["updated_at", "2019-05-15 15:56:00.722172"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 330], ["author_id", 130]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 330], ["created_at", "2019-05-15 15:56:00.725793"], ["updated_at", "2019-05-15 15:56:00.725793"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 330], ["created_at", "2019-05-15 15:56:00.728089"], ["updated_at", "2019-05-15 15:56:00.728089"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 330], ["created_at", "2019-05-15 15:56:00.730394"], ["updated_at", "2019-05-15 15:56:00.730394"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/330" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"330"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 330]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 330]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 330], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 330], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 330]]
  Rendered books/show.html.erb within layouts/application (6.5ms)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.6ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.1ms)
Started GET "/" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.783222"], ["updated_at", "2019-05-15 15:56:00.783222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.787363"], ["updated_at", "2019-05-15 15:56:00.787363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.789858"], ["updated_at", "2019-05-15 15:56:00.789858"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 331], ["author_id", 131]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.793598"], ["updated_at", "2019-05-15 15:56:00.793598"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 332], ["author_id", 132]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 331], ["created_at", "2019-05-15 15:56:00.799429"], ["updated_at", "2019-05-15 15:56:00.799429"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 332], ["created_at", "2019-05-15 15:56:00.801560"], ["updated_at", "2019-05-15 15:56:00.801560"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/331" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"331"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 331], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 331]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 331]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 331], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 331], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 331]]
  Rendered books/show.html.erb within layouts/application (4.6ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.815268"], ["updated_at", "2019-05-15 15:56:00.815268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.819555"], ["updated_at", "2019-05-15 15:56:00.819555"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 333], ["author_id", 133]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/333" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"333"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 333]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 333]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 333], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 333], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 333]]
  Rendered books/show.html.erb within layouts/application (4.1ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 1.0ms)
Started GET "/books/333/reviews/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"333"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (6.7ms)
Completed 200 OK in 16ms (Views: 11.6ms | ActiveRecord: 0.2ms)
Started POST "/books/333/reviews" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"333"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 333], ["created_at", "2019-05-15 15:56:00.863116"], ["updated_at", "2019-05-15 15:56:00.863116"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/333
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/333" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"333"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 333]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 333]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 333], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 333], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 333]]
  Rendered books/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.885069"], ["updated_at", "2019-05-15 15:56:00.885069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.887480"], ["updated_at", "2019-05-15 15:56:00.887480"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 334], ["author_id", 134]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/334" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"334"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 334]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 334]]
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 334], ["LIMIT", 3]]
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 334], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 334]]
  Rendered books/show.html.erb within layouts/application (7.7ms)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 3.1ms)
Started GET "/books/334/reviews/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"334"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.2ms)
Started POST "/books/334/reviews" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"334"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 334], ["created_at", "2019-05-15 15:56:00.916556"], ["updated_at", "2019-05-15 15:56:00.916556"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/334
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/books/334" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"334"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 334]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 334]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 334], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 334], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 334]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 1.0ms)
Started GET "/books/334/reviews/new" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"334"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.1ms)
Started POST "/books/334/reviews" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"334"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/334
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/books/334" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"334"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 334]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 334]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 334], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 334], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 334]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.949509"], ["updated_at", "2019-05-15 15:56:00.949509"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.953626"], ["updated_at", "2019-05-15 15:56:00.953626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.955885"], ["updated_at", "2019-05-15 15:56:00.955885"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 335], ["author_id", 135]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.959321"], ["updated_at", "2019-05-15 15:56:00.959321"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 336], ["author_id", 136]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 335], ["created_at", "2019-05-15 15:56:00.962802"], ["updated_at", "2019-05-15 15:56:00.962802"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 336], ["created_at", "2019-05-15 15:56:00.965061"], ["updated_at", "2019-05-15 15:56:00.965061"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 335], ["created_at", "2019-05-15 15:56:00.966808"], ["updated_at", "2019-05-15 15:56:00.966808"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/335" for 127.0.0.1 at 2019-05-15 09:56:00 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"335"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 335]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 335]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 335], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 335], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 335]]
  Rendered books/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.980704"], ["updated_at", "2019-05-15 15:56:00.980704"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:00.985086"], ["updated_at", "2019-05-15 15:56:00.985086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.987380"], ["updated_at", "2019-05-15 15:56:00.987380"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 337], ["author_id", 137]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:00.990887"], ["updated_at", "2019-05-15 15:56:00.990887"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 338], ["author_id", 138]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 337], ["created_at", "2019-05-15 15:56:00.994513"], ["updated_at", "2019-05-15 15:56:00.994513"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 338], ["created_at", "2019-05-15 15:56:00.996310"], ["updated_at", "2019-05-15 15:56:00.996310"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 337], ["created_at", "2019-05-15 15:56:00.998346"], ["updated_at", "2019-05-15 15:56:00.998346"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/337" for 127.0.0.1 at 2019-05-15 09:56:01 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"337"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 337], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 337]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 337]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 337], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 337], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 337]]
  Rendered books/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.011880"], ["updated_at", "2019-05-15 15:56:01.011880"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.015899"], ["updated_at", "2019-05-15 15:56:01.015899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 339], ["created_at", "2019-05-13 15:56:01.016980"], ["updated_at", "2019-05-15 15:56:01.018317"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 340], ["created_at", "2019-05-12 15:56:01.019365"], ["updated_at", "2019-05-15 15:56:01.020230"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:56:01 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 339], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 340], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.3ms)
Completed 200 OK in 8ms (Views: 5.4ms | ActiveRecord: 0.6ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-05-15 09:56:01 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 339], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 340], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.7ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.043281"], ["updated_at", "2019-05-15 15:56:01.043281"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.047738"], ["updated_at", "2019-05-15 15:56:01.047738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 341], ["created_at", "2019-05-13 15:56:01.049133"], ["updated_at", "2019-05-15 15:56:01.050483"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 342], ["created_at", "2019-05-12 15:56:01.051841"], ["updated_at", "2019-05-15 15:56:01.052879"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:56:01 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 341], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 342], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-05-15 09:56:01 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 342], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 341], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.075360"], ["updated_at", "2019-05-15 15:56:01.075360"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:01.079998"], ["updated_at", "2019-05-15 15:56:01.079998"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 343], ["author_id", 139]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 343], ["created_at", "2019-05-15 15:56:01.083762"], ["updated_at", "2019-05-15 15:56:01.083762"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:56:01 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 343]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 343]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 343]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 343]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 343]]
  Rendered books/index.html.erb within layouts/application (7.2ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 1.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:56:01 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 343], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.4ms)
Started GET "/books/343" for 127.0.0.1 at 2019-05-15 09:56:01 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"343"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 343], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 343]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 343]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 343], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 343], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 343]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.184546"], ["updated_at", "2019-05-15 15:56:01.184546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:01.186909"], ["updated_at", "2019-05-15 15:56:01.186909"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 344], ["author_id", 140]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 344], ["created_at", "2019-05-15 15:56:01.190542"], ["updated_at", "2019-05-15 15:56:01.190542"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 344], ["created_at", "2019-05-15 15:56:01.192447"], ["updated_at", "2019-05-15 15:56:01.192447"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 344]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.199210"], ["updated_at", "2019-05-15 15:56:01.199210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:01.201777"], ["updated_at", "2019-05-15 15:56:01.201777"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 345], ["author_id", 141]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 345], ["created_at", "2019-05-15 15:56:01.205301"], ["updated_at", "2019-05-15 15:56:01.205301"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 345], ["created_at", "2019-05-15 15:56:01.206917"], ["updated_at", "2019-05-15 15:56:01.206917"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 345]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.211709"], ["updated_at", "2019-05-15 15:56:01.211709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 346], ["created_at", "2019-05-15 15:56:01.215536"], ["updated_at", "2019-05-15 15:56:01.215536"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 346], ["created_at", "2019-05-15 15:56:01.217551"], ["updated_at", "2019-05-15 15:56:01.217551"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 346], ["created_at", "2019-05-15 15:56:01.219374"], ["updated_at", "2019-05-15 15:56:01.219374"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 346], ["created_at", "2019-05-15 15:56:01.220943"], ["updated_at", "2019-05-15 15:56:01.220943"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 346], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.225243"], ["updated_at", "2019-05-15 15:56:01.225243"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 347], ["created_at", "2019-05-15 15:56:01.227590"], ["updated_at", "2019-05-15 15:56:01.227590"], ["user", "Mills"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 347], ["created_at", "2019-05-15 15:56:01.231637"], ["updated_at", "2019-05-15 15:56:01.231637"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 347], ["created_at", "2019-05-15 15:56:01.233737"], ["updated_at", "2019-05-15 15:56:01.233737"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 347], ["created_at", "2019-05-15 15:56:01.235557"], ["updated_at", "2019-05-15 15:56:01.235557"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 347], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.239865"], ["updated_at", "2019-05-15 15:56:01.239865"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 348], ["created_at", "2019-05-15 15:56:01.242002"], ["updated_at", "2019-05-15 15:56:01.242002"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 348], ["created_at", "2019-05-15 15:56:01.243933"], ["updated_at", "2019-05-15 15:56:01.243933"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 348], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.250857"], ["updated_at", "2019-05-15 15:56:01.250857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.253128"], ["updated_at", "2019-05-15 15:56:01.253128"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.255243"], ["updated_at", "2019-05-15 15:56:01.255243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.259131"], ["updated_at", "2019-05-15 15:56:01.259131"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.261647"], ["updated_at", "2019-05-15 15:56:01.261647"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.266046"], ["updated_at", "2019-05-15 15:56:01.266046"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.270522"], ["updated_at", "2019-05-15 15:56:01.270522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.272703"], ["updated_at", "2019-05-15 15:56:01.272703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 355], ["created_at", "2019-05-15 15:56:01.274668"], ["updated_at", "2019-05-15 15:56:01.274668"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 355], ["created_at", "2019-05-15 15:56:01.276407"], ["updated_at", "2019-05-15 15:56:01.276407"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 356], ["created_at", "2019-05-15 15:56:01.280654"], ["updated_at", "2019-05-15 15:56:01.280654"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (356, 355)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.286963"], ["updated_at", "2019-05-15 15:56:01.286963"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.289244"], ["updated_at", "2019-05-15 15:56:01.289244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 357], ["created_at", "2019-05-15 15:56:01.291300"], ["updated_at", "2019-05-15 15:56:01.291300"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 357], ["created_at", "2019-05-15 15:56:01.293172"], ["updated_at", "2019-05-15 15:56:01.293172"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 358], ["created_at", "2019-05-15 15:56:01.297042"], ["updated_at", "2019-05-15 15:56:01.297042"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (357, 358)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.303067"], ["updated_at", "2019-05-15 15:56:01.303067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.305318"], ["updated_at", "2019-05-15 15:56:01.305318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.307265"], ["updated_at", "2019-05-15 15:56:01.307265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.309324"], ["updated_at", "2019-05-15 15:56:01.309324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 359], ["created_at", "2019-05-15 15:56:01.311682"], ["updated_at", "2019-05-15 15:56:01.311682"], ["user", "Mills"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 360], ["created_at", "2019-05-15 15:56:01.316138"], ["updated_at", "2019-05-15 15:56:01.316138"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 361], ["created_at", "2019-05-15 15:56:01.318339"], ["updated_at", "2019-05-15 15:56:01.318339"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 362], ["created_at", "2019-05-15 15:56:01.320183"], ["updated_at", "2019-05-15 15:56:01.320183"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.324673"], ["updated_at", "2019-05-15 15:56:01.324673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.326899"], ["updated_at", "2019-05-15 15:56:01.326899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.330186"], ["updated_at", "2019-05-15 15:56:01.330186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.333173"], ["updated_at", "2019-05-15 15:56:01.333173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 363], ["created_at", "2019-05-15 15:56:01.337004"], ["updated_at", "2019-05-15 15:56:01.337004"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 364], ["created_at", "2019-05-15 15:56:01.339147"], ["updated_at", "2019-05-15 15:56:01.339147"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 365], ["created_at", "2019-05-15 15:56:01.340979"], ["updated_at", "2019-05-15 15:56:01.340979"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 366], ["created_at", "2019-05-15 15:56:01.342719"], ["updated_at", "2019-05-15 15:56:01.342719"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.347845"], ["updated_at", "2019-05-15 15:56:01.347845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.351496"], ["updated_at", "2019-05-15 15:56:01.351496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.354123"], ["updated_at", "2019-05-15 15:56:01.354123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.356751"], ["updated_at", "2019-05-15 15:56:01.356751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 367], ["created_at", "2019-05-15 15:56:01.358813"], ["updated_at", "2019-05-15 15:56:01.358813"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 368], ["created_at", "2019-05-15 15:56:01.360979"], ["updated_at", "2019-05-15 15:56:01.360979"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 369], ["created_at", "2019-05-15 15:56:01.362989"], ["updated_at", "2019-05-15 15:56:01.362989"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 370], ["created_at", "2019-05-15 15:56:01.365367"], ["updated_at", "2019-05-15 15:56:01.365367"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.370620"], ["updated_at", "2019-05-15 15:56:01.370620"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.374927"], ["updated_at", "2019-05-15 15:56:01.374927"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.377121"], ["updated_at", "2019-05-15 15:56:01.377121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.379158"], ["updated_at", "2019-05-15 15:56:01.379158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 371], ["created_at", "2019-05-15 15:56:01.381716"], ["updated_at", "2019-05-15 15:56:01.381716"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 372], ["created_at", "2019-05-15 15:56:01.383764"], ["updated_at", "2019-05-15 15:56:01.383764"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 373], ["created_at", "2019-05-15 15:56:01.385883"], ["updated_at", "2019-05-15 15:56:01.385883"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 374], ["created_at", "2019-05-15 15:56:01.387855"], ["updated_at", "2019-05-15 15:56:01.387855"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.397240"], ["updated_at", "2019-05-15 15:56:01.397240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:56:01.399579"], ["updated_at", "2019-05-15 15:56:01.399579"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 375], ["author_id", 142]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 375], ["created_at", "2019-05-15 15:56:01.403135"], ["updated_at", "2019-05-15 15:56:01.403135"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.406633"], ["updated_at", "2019-05-15 15:56:01.406633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.408706"], ["updated_at", "2019-05-15 15:56:01.408706"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.411075"], ["updated_at", "2019-05-15 15:56:01.411075"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.415453"], ["updated_at", "2019-05-15 15:56:01.415453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 376], ["created_at", "2019-05-15 15:56:01.417721"], ["updated_at", "2019-05-15 15:56:01.417721"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 377], ["created_at", "2019-05-15 15:56:01.419741"], ["updated_at", "2019-05-15 15:56:01.419741"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 378], ["created_at", "2019-05-15 15:56:01.421567"], ["updated_at", "2019-05-15 15:56:01.421567"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 379], ["created_at", "2019-05-15 15:56:01.423321"], ["updated_at", "2019-05-15 15:56:01.423321"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 376], ["created_at", "2019-05-15 15:56:01.424935"], ["updated_at", "2019-05-15 15:56:01.424935"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 377], ["created_at", "2019-05-15 15:56:01.427194"], ["updated_at", "2019-05-15 15:56:01.427194"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 378], ["created_at", "2019-05-15 15:56:01.429045"], ["updated_at", "2019-05-15 15:56:01.429045"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 376], ["created_at", "2019-05-15 15:56:01.430831"], ["updated_at", "2019-05-15 15:56:01.430831"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 377], ["created_at", "2019-05-15 15:56:01.432940"], ["updated_at", "2019-05-15 15:56:01.432940"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 376], ["created_at", "2019-05-15 15:56:01.434783"], ["updated_at", "2019-05-15 15:56:01.434783"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.442558"], ["updated_at", "2019-05-15 15:56:01.442558"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 380], ["created_at", "2019-05-13 15:56:01.445130"], ["updated_at", "2019-05-15 15:56:01.446804"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 380], ["created_at", "2019-05-12 15:56:01.447949"], ["updated_at", "2019-05-15 15:56:01.448814"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 380], ["created_at", "2019-05-11 15:56:01.449780"], ["updated_at", "2019-05-15 15:56:01.450667"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:56:01.454815"], ["updated_at", "2019-05-15 15:56:01.454815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 381], ["created_at", "2019-05-13 15:56:01.455954"], ["updated_at", "2019-05-15 15:56:01.457079"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 381], ["created_at", "2019-05-12 15:56:01.458055"], ["updated_at", "2019-05-15 15:56:01.458921"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 381], ["created_at", "2019-05-11 15:56:01.460053"], ["updated_at", "2019-05-15 15:56:01.461096"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-05-15 15:58:26.701455"], ["updated_at", "2019-05-15 15:58:26.701455"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-05-15 15:58:26.727151"], ["updated_at", "2019-05-15 15:58:26.727151"]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 382], ["author_id", 143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-05-15 15:58:26.739876"], ["updated_at", "2019-05-15 15:58:26.739876"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 383], ["author_id", 143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:26 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 382]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 382]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 382]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 383]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 383]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 383]]
  Rendered books/index.html.erb within layouts/application (21.8ms)
Completed 200 OK in 180ms (Views: 173.8ms | ActiveRecord: 4.2ms)
Started GET "/authors/143" for 127.0.0.1 at 2019-05-15 09:58:26 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"143"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 143], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 143]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 382], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 382]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 383], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 383]]
  Rendered authors/show.html.erb within layouts/application (7.0ms)
Completed 200 OK in 13ms (Views: 8.7ms | ActiveRecord: 1.3ms)
Started GET "/books/382" for 127.0.0.1 at 2019-05-15 09:58:26 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"382"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 382], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 382]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 382]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 382], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 382], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 382]]
  Rendered books/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 10ms (Views: 5.6ms | ActiveRecord: 1.2ms)
Started GET "/authors/143" for 127.0.0.1 at 2019-05-15 09:58:26 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"143"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 143], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 143]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 382], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 382]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 383], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 383]]
  Rendered authors/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:58:26.979036"], ["updated_at", "2019-05-15 15:58:26.979036"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:58:26.983794"], ["updated_at", "2019-05-15 15:58:26.983794"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 384], ["author_id", 144]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:58:26.988948"], ["updated_at", "2019-05-15 15:58:26.988948"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 385], ["author_id", 144]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 384], ["created_at", "2019-05-15 15:58:27.000008"], ["updated_at", "2019-05-15 15:58:27.000008"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/144" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"144"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 144], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 144]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 384], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 384], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 384], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 384], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 384], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 384]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 385], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 385]]
  Rendered authors/show.html.erb within layouts/application (7.5ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-05-15 15:58:27.018917"], ["updated_at", "2019-05-15 15:58:27.018917"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-05-15 15:58:27.024004"], ["updated_at", "2019-05-15 15:58:27.024004"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 386], ["author_id", 145]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-05-15 15:58:27.027510"], ["updated_at", "2019-05-15 15:58:27.027510"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 386], ["author_id", 146]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-05-15 15:58:27.033714"], ["updated_at", "2019-05-15 15:58:27.033714"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 387], ["author_id", 146]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/145" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"145"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 145], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 145]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 386], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 386]]
  Rendered authors/show.html.erb within layouts/application (3.7ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 0.8ms)
Started DELETE "/authors/145" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"145"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 145], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 145]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 386[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 386]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 386]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 172]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 173]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 386]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 145]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 145]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 387]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 387]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 387]]
  Rendered books/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:58:27.079603"], ["updated_at", "2019-05-15 15:58:27.079603"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:58:27.084913"], ["updated_at", "2019-05-15 15:58:27.084913"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 388], ["author_id", 147]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:27.089223"], ["updated_at", "2019-05-15 15:58:27.089223"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 388], ["author_id", 148]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:58:27.093692"], ["updated_at", "2019-05-15 15:58:27.093692"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 389], ["author_id", 147]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:58:27.099296"], ["updated_at", "2019-05-15 15:58:27.099296"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 390], ["author_id", 147]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/147" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"147"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 147], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 147]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 388], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 388]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 389], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 389]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 390], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 390]]
  Rendered authors/show.html.erb within layouts/application (7.3ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:58:27.123357"], ["updated_at", "2019-05-15 15:58:27.123357"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:58:27.128659"], ["updated_at", "2019-05-15 15:58:27.128659"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 391], ["author_id", 149]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:27.132308"], ["updated_at", "2019-05-15 15:58:27.132308"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 391], ["author_id", 150]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:58:27.136424"], ["updated_at", "2019-05-15 15:58:27.136424"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 392], ["author_id", 149]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:58:27.140534"], ["updated_at", "2019-05-15 15:58:27.140534"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 393], ["author_id", 149]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/149" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"149"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 149]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 391], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 391]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 392], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 392]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 393], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 393]]
  Rendered authors/show.html.erb within layouts/application (8.4ms)
Completed 200 OK in 11ms (Views: 8.0ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.161079"], ["updated_at", "2019-05-15 15:58:27.161079"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 394], ["created_at", "2019-05-15 15:58:27.163579"], ["updated_at", "2019-05-15 15:58:27.163579"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 394], ["created_at", "2019-05-15 15:58:27.165381"], ["updated_at", "2019-05-15 15:58:27.165381"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.0ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 394], ["created_at", "2019-05-15 15:58:27.167107"], ["updated_at", "2019-05-15 15:58:27.167107"], ["user", "Stella"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 394], ["created_at", "2019-05-15 15:58:27.180913"], ["updated_at", "2019-05-15 15:58:27.180913"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 394]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 394]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 394]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 394]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 394]]
  Rendered books/index.html.erb within layouts/application (8.3ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 394]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 394]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.200682"], ["updated_at", "2019-05-15 15:58:27.200682"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.204651"], ["updated_at", "2019-05-15 15:58:27.204651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.206884"], ["updated_at", "2019-05-15 15:58:27.206884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.208804"], ["updated_at", "2019-05-15 15:58:27.208804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 395], ["created_at", "2019-05-15 15:58:27.210652"], ["updated_at", "2019-05-15 15:58:27.210652"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 396], ["created_at", "2019-05-15 15:58:27.212742"], ["updated_at", "2019-05-15 15:58:27.212742"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 397], ["created_at", "2019-05-15 15:58:27.214773"], ["updated_at", "2019-05-15 15:58:27.214773"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 398], ["created_at", "2019-05-15 15:58:27.217044"], ["updated_at", "2019-05-15 15:58:27.217044"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 395], ["created_at", "2019-05-15 15:58:27.218834"], ["updated_at", "2019-05-15 15:58:27.218834"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 396], ["created_at", "2019-05-15 15:58:27.221439"], ["updated_at", "2019-05-15 15:58:27.221439"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 397], ["created_at", "2019-05-15 15:58:27.224194"], ["updated_at", "2019-05-15 15:58:27.224194"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 395], ["created_at", "2019-05-15 15:58:27.225998"], ["updated_at", "2019-05-15 15:58:27.225998"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 396], ["created_at", "2019-05-15 15:58:27.227777"], ["updated_at", "2019-05-15 15:58:27.227777"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 395], ["created_at", "2019-05-15 15:58:27.229494"], ["updated_at", "2019-05-15 15:58:27.229494"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 395]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 396]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 397]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 398]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 397]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 396]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 395]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 395]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 395]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 396]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 396]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 396]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 397]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 397]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 397]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 398]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 398]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 398]]
  Rendered books/index.html.erb within layouts/application (17.0ms)
Completed 200 OK in 19ms (Views: 14.6ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 395]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 396]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 397]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 398]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 397]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 396]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 395]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 395]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 395]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 396]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 396]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 396]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 397]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 397]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 397]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 398]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 398]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 398]]
  Rendered books/index.html.erb within layouts/application (16.8ms)
Completed 200 OK in 18ms (Views: 14.1ms | ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.274928"], ["updated_at", "2019-05-15 15:58:27.274928"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.279167"], ["updated_at", "2019-05-15 15:58:27.279167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.281578"], ["updated_at", "2019-05-15 15:58:27.281578"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.283733"], ["updated_at", "2019-05-15 15:58:27.283733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 399], ["created_at", "2019-05-15 15:58:27.285902"], ["updated_at", "2019-05-15 15:58:27.285902"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 400], ["created_at", "2019-05-15 15:58:27.287900"], ["updated_at", "2019-05-15 15:58:27.287900"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 401], ["created_at", "2019-05-15 15:58:27.289675"], ["updated_at", "2019-05-15 15:58:27.289675"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 402], ["created_at", "2019-05-15 15:58:27.291535"], ["updated_at", "2019-05-15 15:58:27.291535"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 399], ["created_at", "2019-05-15 15:58:27.293085"], ["updated_at", "2019-05-15 15:58:27.293085"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 400], ["created_at", "2019-05-15 15:58:27.294585"], ["updated_at", "2019-05-15 15:58:27.294585"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 401], ["created_at", "2019-05-15 15:58:27.296363"], ["updated_at", "2019-05-15 15:58:27.296363"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 399], ["created_at", "2019-05-15 15:58:27.298300"], ["updated_at", "2019-05-15 15:58:27.298300"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 400], ["created_at", "2019-05-15 15:58:27.299981"], ["updated_at", "2019-05-15 15:58:27.299981"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 399], ["created_at", "2019-05-15 15:58:27.301683"], ["updated_at", "2019-05-15 15:58:27.301683"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 399]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 400]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 402]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 400]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 399]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 399]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 399]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 400]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 400]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 400]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 402]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 402]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 402]]
  Rendered books/index.html.erb within layouts/application (17.4ms)
Completed 200 OK in 19ms (Views: 14.6ms | ActiveRecord: 4.0ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 399]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 400]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 402]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 400]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 402]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 402]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 402]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 400]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 400]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 400]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 399]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 399]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 399]]
  Rendered books/index.html.erb within layouts/application (16.9ms)
Completed 200 OK in 18ms (Views: 14.2ms | ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.347508"], ["updated_at", "2019-05-15 15:58:27.347508"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.351800"], ["updated_at", "2019-05-15 15:58:27.351800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.353804"], ["updated_at", "2019-05-15 15:58:27.353804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.355721"], ["updated_at", "2019-05-15 15:58:27.355721"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 403], ["created_at", "2019-05-15 15:58:27.357744"], ["updated_at", "2019-05-15 15:58:27.357744"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 404], ["created_at", "2019-05-15 15:58:27.359587"], ["updated_at", "2019-05-15 15:58:27.359587"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 405], ["created_at", "2019-05-15 15:58:27.361474"], ["updated_at", "2019-05-15 15:58:27.361474"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 406], ["created_at", "2019-05-15 15:58:27.363624"], ["updated_at", "2019-05-15 15:58:27.363624"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 403], ["created_at", "2019-05-15 15:58:27.365276"], ["updated_at", "2019-05-15 15:58:27.365276"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 404], ["created_at", "2019-05-15 15:58:27.366979"], ["updated_at", "2019-05-15 15:58:27.366979"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 405], ["created_at", "2019-05-15 15:58:27.368611"], ["updated_at", "2019-05-15 15:58:27.368611"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 403], ["created_at", "2019-05-15 15:58:27.370322"], ["updated_at", "2019-05-15 15:58:27.370322"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 404], ["created_at", "2019-05-15 15:58:27.371980"], ["updated_at", "2019-05-15 15:58:27.371980"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 403], ["created_at", "2019-05-15 15:58:27.373750"], ["updated_at", "2019-05-15 15:58:27.373750"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 403]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 406]]
  Rendered books/index.html.erb within layouts/application (16.7ms)
Completed 200 OK in 18ms (Views: 14.1ms | ActiveRecord: 3.7ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 403]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 406]]
  Rendered books/index.html.erb within layouts/application (16.9ms)
Completed 200 OK in 18ms (Views: 14.4ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 406]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 404]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 404]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 403]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 403]]
  Rendered books/index.html.erb within layouts/application (16.7ms)
Completed 200 OK in 18ms (Views: 14.2ms | ActiveRecord: 3.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.440137"], ["updated_at", "2019-05-15 15:58:27.440137"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.444380"], ["updated_at", "2019-05-15 15:58:27.444380"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.446607"], ["updated_at", "2019-05-15 15:58:27.446607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.448687"], ["updated_at", "2019-05-15 15:58:27.448687"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 407], ["created_at", "2019-05-15 15:58:27.450811"], ["updated_at", "2019-05-15 15:58:27.450811"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 408], ["created_at", "2019-05-15 15:58:27.452947"], ["updated_at", "2019-05-15 15:58:27.452947"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 409], ["created_at", "2019-05-15 15:58:27.455104"], ["updated_at", "2019-05-15 15:58:27.455104"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 410], ["created_at", "2019-05-15 15:58:27.456966"], ["updated_at", "2019-05-15 15:58:27.456966"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 407], ["created_at", "2019-05-15 15:58:27.458638"], ["updated_at", "2019-05-15 15:58:27.458638"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 408], ["created_at", "2019-05-15 15:58:27.460202"], ["updated_at", "2019-05-15 15:58:27.460202"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 409], ["created_at", "2019-05-15 15:58:27.462201"], ["updated_at", "2019-05-15 15:58:27.462201"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 407], ["created_at", "2019-05-15 15:58:27.464190"], ["updated_at", "2019-05-15 15:58:27.464190"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 408], ["created_at", "2019-05-15 15:58:27.465895"], ["updated_at", "2019-05-15 15:58:27.465895"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 407], ["created_at", "2019-05-15 15:58:27.467503"], ["updated_at", "2019-05-15 15:58:27.467503"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 407]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 410]]
  Rendered books/index.html.erb within layouts/application (17.7ms)
Completed 200 OK in 20ms (Views: 15.4ms | ActiveRecord: 3.7ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (407, 408, 409, 410)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 407]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 410]]
  Rendered books/index.html.erb within layouts/application (20.7ms)
Completed 200 OK in 24ms (Views: 18.3ms | ActiveRecord: 4.0ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (410, 409, 408, 407)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 410]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 410]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 409]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 409]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 408]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 408]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 407]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 407]]
  Rendered books/index.html.erb within layouts/application (17.4ms)
Completed 200 OK in 21ms (Views: 14.9ms | ActiveRecord: 4.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.543767"], ["updated_at", "2019-05-15 15:58:27.543767"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.547222"], ["updated_at", "2019-05-15 15:58:27.547222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.549933"], ["updated_at", "2019-05-15 15:58:27.549933"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.551841"], ["updated_at", "2019-05-15 15:58:27.551841"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 411], ["created_at", "2019-05-15 15:58:27.553739"], ["updated_at", "2019-05-15 15:58:27.553739"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 412], ["created_at", "2019-05-15 15:58:27.555466"], ["updated_at", "2019-05-15 15:58:27.555466"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 413], ["created_at", "2019-05-15 15:58:27.557110"], ["updated_at", "2019-05-15 15:58:27.557110"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 414], ["created_at", "2019-05-15 15:58:27.558733"], ["updated_at", "2019-05-15 15:58:27.558733"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 411], ["created_at", "2019-05-15 15:58:27.560351"], ["updated_at", "2019-05-15 15:58:27.560351"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 412], ["created_at", "2019-05-15 15:58:27.562159"], ["updated_at", "2019-05-15 15:58:27.562159"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 413], ["created_at", "2019-05-15 15:58:27.564151"], ["updated_at", "2019-05-15 15:58:27.564151"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 411], ["created_at", "2019-05-15 15:58:27.565963"], ["updated_at", "2019-05-15 15:58:27.565963"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 412], ["created_at", "2019-05-15 15:58:27.567736"], ["updated_at", "2019-05-15 15:58:27.567736"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 411], ["created_at", "2019-05-15 15:58:27.569363"], ["updated_at", "2019-05-15 15:58:27.569363"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 411]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 412]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 412]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 411]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 411]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 411]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 412]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 412]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 412]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 413]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 414]]
  Rendered books/index.html.erb within layouts/application (16.8ms)
Completed 200 OK in 18ms (Views: 14.4ms | ActiveRecord: 3.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 411]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 412]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.600254"], ["updated_at", "2019-05-15 15:58:27.600254"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:27.604310"], ["updated_at", "2019-05-15 15:58:27.604310"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 415], ["author_id", 151]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 415], ["created_at", "2019-05-15 15:58:27.607901"], ["updated_at", "2019-05-15 15:58:27.607901"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 415], ["created_at", "2019-05-15 15:58:27.609527"], ["updated_at", "2019-05-15 15:58:27.609527"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 415], ["created_at", "2019-05-15 15:58:27.611134"], ["updated_at", "2019-05-15 15:58:27.611134"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 415], ["created_at", "2019-05-15 15:58:27.612922"], ["updated_at", "2019-05-15 15:58:27.612922"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/415" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"415"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 415], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 415]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 415], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 415], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.630082"], ["updated_at", "2019-05-15 15:58:27.630082"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:27.634321"], ["updated_at", "2019-05-15 15:58:27.634321"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 416], ["author_id", 152]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 416], ["created_at", "2019-05-15 15:58:27.637921"], ["updated_at", "2019-05-15 15:58:27.637921"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 416], ["created_at", "2019-05-15 15:58:27.639490"], ["updated_at", "2019-05-15 15:58:27.639490"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 416], ["created_at", "2019-05-15 15:58:27.641106"], ["updated_at", "2019-05-15 15:58:27.641106"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 416], ["created_at", "2019-05-15 15:58:27.642861"], ["updated_at", "2019-05-15 15:58:27.642861"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/416" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"416"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 416], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 416]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 416], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 416], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.659986"], ["updated_at", "2019-05-15 15:58:27.659986"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:27.664485"], ["updated_at", "2019-05-15 15:58:27.664485"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 417], ["author_id", 153]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 417], ["created_at", "2019-05-15 15:58:27.667982"], ["updated_at", "2019-05-15 15:58:27.667982"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 417], ["created_at", "2019-05-15 15:58:27.669705"], ["updated_at", "2019-05-15 15:58:27.669705"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 417], ["created_at", "2019-05-15 15:58:27.671501"], ["updated_at", "2019-05-15 15:58:27.671501"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 417], ["created_at", "2019-05-15 15:58:27.673225"], ["updated_at", "2019-05-15 15:58:27.673225"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/417" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"417"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 417], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 417]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 417], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 417], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  Rendered books/show.html.erb within layouts/application (6.0ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-05-15 15:58:27.688710"], ["updated_at", "2019-05-15 15:58:27.688710"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/418" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"418"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 418], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 418]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 418], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 418], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 1.3ms)
Started DELETE "/books/418" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"418"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 418], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  [1m[36mBookAuthor Load (0.1ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 418]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 418]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 3ms (ActiveRecord: 0.9ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.714673"], ["updated_at", "2019-05-15 15:58:27.714673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.716693"], ["updated_at", "2019-05-15 15:58:27.716693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:27.718633"], ["updated_at", "2019-05-15 15:58:27.718633"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 419], ["author_id", 154]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:58:27.721858"], ["updated_at", "2019-05-15 15:58:27.721858"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 419], ["author_id", 155]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:58:27.724954"], ["updated_at", "2019-05-15 15:58:27.724954"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 420], ["author_id", 156]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 419]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 420]]
  Rendered books/index.html.erb within layouts/application (10.3ms)
Completed 200 OK in 12ms (Views: 9.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.765670"], ["updated_at", "2019-05-15 15:58:27.765670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:27.770054"], ["updated_at", "2019-05-15 15:58:27.770054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:27.772157"], ["updated_at", "2019-05-15 15:58:27.772157"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 421], ["author_id", 157]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:58:27.775285"], ["updated_at", "2019-05-15 15:58:27.775285"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 421], ["author_id", 158]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:58:27.778457"], ["updated_at", "2019-05-15 15:58:27.778457"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 422], ["author_id", 159]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 421]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 422]]
  Rendered books/index.html.erb within layouts/application (8.9ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 2.4ms)
Started GET "/books/421" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"421"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 421], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 421]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 421], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 421], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  Rendered books/show.html.erb within layouts/application (4.0ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.1ms)
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (21.6ms)
Completed 200 OK in 26ms (Views: 23.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-05-15 15:58:27.844200"], ["updated_at", "2019-05-15 15:58:27.844200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:58:27.852668"], ["updated_at", "2019-05-15 15:58:27.852668"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:27.854863"], ["updated_at", "2019-05-15 15:58:27.854863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 423], ["author_id", 161]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 423], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 10ms (ActiveRecord: 2.2ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 423]]
  Rendered books/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.5ms)
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 423], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:58:27.891153"], ["updated_at", "2019-05-15 15:58:27.891153"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:27.893382"], ["updated_at", "2019-05-15 15:58:27.893382"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 424], ["author_id", 162]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:27.897901"], ["updated_at", "2019-05-15 15:58:27.897901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 424], ["author_id", 163]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 424], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 424]]
  Rendered books/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.6ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:27.918883"], ["updated_at", "2019-05-15 15:58:27.918883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:58:27.933348"], ["updated_at", "2019-05-15 15:58:27.933348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 425], ["author_id", 164]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:27.939075"], ["updated_at", "2019-05-15 15:58:27.939075"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 425], ["author_id", 165]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 425], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 16ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 425]]
  Rendered books/index.html.erb within layouts/application (6.5ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.7ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:27.975545"], ["updated_at", "2019-05-15 15:58:27.975545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:27.978860"], ["updated_at", "2019-05-15 15:58:27.978860"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:27 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-05-15 15:58:28.020256"], ["updated_at", "2019-05-15 15:58:28.020256"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 426]]
  Rendered books/index.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:58:28.072142"], ["updated_at", "2019-05-15 15:58:28.072142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:28.074204"], ["updated_at", "2019-05-15 15:58:28.074204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 427], ["author_id", 168]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:28.078660"], ["updated_at", "2019-05-15 15:58:28.078660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 427], ["author_id", 169]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 427], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 427]]
  Rendered books/index.html.erb within layouts/application (7.1ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 1.9ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:58:28.097309"], ["updated_at", "2019-05-15 15:58:28.097309"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.102195"], ["updated_at", "2019-05-15 15:58:28.102195"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 428], ["author_id", 170]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:58:28.106500"], ["updated_at", "2019-05-15 15:58:28.106500"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 428], ["author_id", 171]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 428], ["created_at", "2019-05-15 15:58:28.110512"], ["updated_at", "2019-05-15 15:58:28.110512"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 428], ["created_at", "2019-05-15 15:58:28.113336"], ["updated_at", "2019-05-15 15:58:28.113336"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 428], ["created_at", "2019-05-15 15:58:28.115287"], ["updated_at", "2019-05-15 15:58:28.115287"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/428" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"428"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 428], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 428], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 428], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  Rendered books/show.html.erb within layouts/application (12.4ms)
Completed 200 OK in 15ms (Views: 13.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:58:28.149869"], ["updated_at", "2019-05-15 15:58:28.149869"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.152594"], ["updated_at", "2019-05-15 15:58:28.152594"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 429], ["author_id", 172]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:58:28.158128"], ["updated_at", "2019-05-15 15:58:28.158128"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 429], ["author_id", 173]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 429], ["created_at", "2019-05-15 15:58:28.161344"], ["updated_at", "2019-05-15 15:58:28.161344"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 429], ["created_at", "2019-05-15 15:58:28.163077"], ["updated_at", "2019-05-15 15:58:28.163077"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 429], ["created_at", "2019-05-15 15:58:28.164611"], ["updated_at", "2019-05-15 15:58:28.164611"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/429" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"429"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 429], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 429]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 429], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 429], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  Rendered books/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.6ms)
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.5ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 1.1ms)
Started GET "/" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.211544"], ["updated_at", "2019-05-15 15:58:28.211544"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.215660"], ["updated_at", "2019-05-15 15:58:28.215660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.218176"], ["updated_at", "2019-05-15 15:58:28.218176"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 430], ["author_id", 174]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.221809"], ["updated_at", "2019-05-15 15:58:28.221809"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 431], ["author_id", 175]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 430], ["created_at", "2019-05-15 15:58:28.225135"], ["updated_at", "2019-05-15 15:58:28.225135"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 431], ["created_at", "2019-05-15 15:58:28.226866"], ["updated_at", "2019-05-15 15:58:28.226866"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/430" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"430"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 430], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 430]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 430]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 430], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 430], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 430]]
  Rendered books/show.html.erb within layouts/application (4.7ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 430], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 431], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 11ms (Views: 7.4ms | ActiveRecord: 0.6ms)
Started DELETE "/reviews/632" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"632"}
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 632], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 632]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.7ms)
Started GET "/reviews" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.271268"], ["updated_at", "2019-05-15 15:58:28.271268"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.275779"], ["updated_at", "2019-05-15 15:58:28.275779"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 432], ["author_id", 176]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/432" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"432"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 432], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 432]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 432], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 432], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  Rendered books/show.html.erb within layouts/application (4.7ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.0ms)
Started GET "/books/432/reviews/new" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"432"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 432], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 11ms (Views: 7.6ms | ActiveRecord: 0.2ms)
Started POST "/books/432/reviews" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"432"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 432], ["LIMIT", 1]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 432], ["created_at", "2019-05-15 15:58:28.311801"], ["updated_at", "2019-05-15 15:58:28.311801"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/432
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
Started GET "/books/432" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"432"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 432], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 432]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 432], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 432], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.329505"], ["updated_at", "2019-05-15 15:58:28.329505"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.334029"], ["updated_at", "2019-05-15 15:58:28.334029"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 433], ["author_id", 177]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/433" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"433"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 433]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 433], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 433], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  Rendered books/show.html.erb within layouts/application (3.9ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 1.0ms)
Started GET "/books/433/reviews/new" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"433"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.1ms)
Started POST "/books/433/reviews" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"433"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 433], ["created_at", "2019-05-15 15:58:28.358282"], ["updated_at", "2019-05-15 15:58:28.358282"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/433
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/433" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"433"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 433]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 433], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 433], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  Rendered books/show.html.erb within layouts/application (4.7ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.1ms)
Started GET "/books/433/reviews/new" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"433"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.1ms)
Started POST "/books/433/reviews" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"433"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/433
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/books/433" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"433"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 433]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 433], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 433], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  Rendered books/show.html.erb within layouts/application (4.6ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.391485"], ["updated_at", "2019-05-15 15:58:28.391485"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.396456"], ["updated_at", "2019-05-15 15:58:28.396456"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.398962"], ["updated_at", "2019-05-15 15:58:28.398962"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 434], ["author_id", 178]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.407475"], ["updated_at", "2019-05-15 15:58:28.407475"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 435], ["author_id", 179]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 434], ["created_at", "2019-05-15 15:58:28.413008"], ["updated_at", "2019-05-15 15:58:28.413008"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 435], ["created_at", "2019-05-15 15:58:28.415025"], ["updated_at", "2019-05-15 15:58:28.415025"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 434], ["created_at", "2019-05-15 15:58:28.417017"], ["updated_at", "2019-05-15 15:58:28.417017"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/434" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"434"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 434], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 434]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 434]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 434], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 434], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 434]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 1.2ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 434], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 435], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.444110"], ["updated_at", "2019-05-15 15:58:28.444110"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.448660"], ["updated_at", "2019-05-15 15:58:28.448660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.456864"], ["updated_at", "2019-05-15 15:58:28.456864"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 436], ["author_id", 180]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.460646"], ["updated_at", "2019-05-15 15:58:28.460646"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 437], ["author_id", 181]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 436], ["created_at", "2019-05-15 15:58:28.464607"], ["updated_at", "2019-05-15 15:58:28.464607"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 437], ["created_at", "2019-05-15 15:58:28.466892"], ["updated_at", "2019-05-15 15:58:28.466892"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 436], ["created_at", "2019-05-15 15:58:28.468932"], ["updated_at", "2019-05-15 15:58:28.468932"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/436" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"436"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 436], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 436]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 436]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 436], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 436], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 436]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 436], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 437], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.490429"], ["updated_at", "2019-05-15 15:58:28.490429"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.494654"], ["updated_at", "2019-05-15 15:58:28.494654"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 438], ["created_at", "2019-05-13 15:58:28.495729"], ["updated_at", "2019-05-15 15:58:28.496987"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 439], ["created_at", "2019-05-12 15:58:28.497983"], ["updated_at", "2019-05-15 15:58:28.498828"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 438], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 439], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 438], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 439], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.516158"], ["updated_at", "2019-05-15 15:58:28.516158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.518472"], ["updated_at", "2019-05-15 15:58:28.518472"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 440], ["created_at", "2019-05-13 15:58:28.519441"], ["updated_at", "2019-05-15 15:58:28.520512"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 441], ["created_at", "2019-05-12 15:58:28.521523"], ["updated_at", "2019-05-15 15:58:28.522389"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 440], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 441], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 441], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 440], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.540905"], ["updated_at", "2019-05-15 15:58:28.540905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.543282"], ["updated_at", "2019-05-15 15:58:28.543282"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 442], ["author_id", 182]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 442], ["created_at", "2019-05-15 15:58:28.549025"], ["updated_at", "2019-05-15 15:58:28.549025"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 442]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 442]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 442]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 442]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 442]]
  Rendered books/index.html.erb within layouts/application (7.8ms)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 1.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.4ms)
Started GET "/books/442" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"442"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 442]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 442]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 442], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 442], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 442]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.3ms)
Started GET "/authors/182" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"182"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 182], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 182]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 442], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 442], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 442], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 442], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 442], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 442]]
  Rendered authors/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:28 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.672103"], ["updated_at", "2019-05-15 15:58:28.672103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.674315"], ["updated_at", "2019-05-15 15:58:28.674315"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 443], ["author_id", 183]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 443], ["created_at", "2019-05-15 15:58:28.677756"], ["updated_at", "2019-05-15 15:58:28.677756"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 443], ["created_at", "2019-05-15 15:58:28.681082"], ["updated_at", "2019-05-15 15:58:28.681082"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 443]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.685898"], ["updated_at", "2019-05-15 15:58:28.685898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.688049"], ["updated_at", "2019-05-15 15:58:28.688049"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 444], ["author_id", 184]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 444], ["created_at", "2019-05-15 15:58:28.691497"], ["updated_at", "2019-05-15 15:58:28.691497"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 444], ["created_at", "2019-05-15 15:58:28.693293"], ["updated_at", "2019-05-15 15:58:28.693293"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 444]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.697538"], ["updated_at", "2019-05-15 15:58:28.697538"]]
  [1m[35m (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 445], ["created_at", "2019-05-15 15:58:28.702851"], ["updated_at", "2019-05-15 15:58:28.702851"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 445], ["created_at", "2019-05-15 15:58:28.705206"], ["updated_at", "2019-05-15 15:58:28.705206"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 445], ["created_at", "2019-05-15 15:58:28.706976"], ["updated_at", "2019-05-15 15:58:28.706976"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 445], ["created_at", "2019-05-15 15:58:28.708639"], ["updated_at", "2019-05-15 15:58:28.708639"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 445], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.714709"], ["updated_at", "2019-05-15 15:58:28.714709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 446], ["created_at", "2019-05-15 15:58:28.717301"], ["updated_at", "2019-05-15 15:58:28.717301"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 446], ["created_at", "2019-05-15 15:58:28.719490"], ["updated_at", "2019-05-15 15:58:28.719490"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 446], ["created_at", "2019-05-15 15:58:28.721332"], ["updated_at", "2019-05-15 15:58:28.721332"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 446], ["created_at", "2019-05-15 15:58:28.723078"], ["updated_at", "2019-05-15 15:58:28.723078"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 446], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.727586"], ["updated_at", "2019-05-15 15:58:28.727586"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 447], ["created_at", "2019-05-15 15:58:28.731668"], ["updated_at", "2019-05-15 15:58:28.731668"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 447], ["created_at", "2019-05-15 15:58:28.733907"], ["updated_at", "2019-05-15 15:58:28.733907"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 447], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.738786"], ["updated_at", "2019-05-15 15:58:28.738786"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.740958"], ["updated_at", "2019-05-15 15:58:28.740958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.742896"], ["updated_at", "2019-05-15 15:58:28.742896"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.748484"], ["updated_at", "2019-05-15 15:58:28.748484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.751332"], ["updated_at", "2019-05-15 15:58:28.751332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.753559"], ["updated_at", "2019-05-15 15:58:28.753559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.757845"], ["updated_at", "2019-05-15 15:58:28.757845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.759985"], ["updated_at", "2019-05-15 15:58:28.759985"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 454], ["created_at", "2019-05-15 15:58:28.763699"], ["updated_at", "2019-05-15 15:58:28.763699"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 454], ["created_at", "2019-05-15 15:58:28.766431"], ["updated_at", "2019-05-15 15:58:28.766431"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 455], ["created_at", "2019-05-15 15:58:28.768732"], ["updated_at", "2019-05-15 15:58:28.768732"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (455, 454)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.773913"], ["updated_at", "2019-05-15 15:58:28.773913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.775997"], ["updated_at", "2019-05-15 15:58:28.775997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 456], ["created_at", "2019-05-15 15:58:28.777996"], ["updated_at", "2019-05-15 15:58:28.777996"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 456], ["created_at", "2019-05-15 15:58:28.781558"], ["updated_at", "2019-05-15 15:58:28.781558"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 457], ["created_at", "2019-05-15 15:58:28.783845"], ["updated_at", "2019-05-15 15:58:28.783845"], ["user", "Joe"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (456, 457)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.789885"], ["updated_at", "2019-05-15 15:58:28.789885"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.792046"], ["updated_at", "2019-05-15 15:58:28.792046"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.794287"], ["updated_at", "2019-05-15 15:58:28.794287"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.798549"], ["updated_at", "2019-05-15 15:58:28.798549"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 458], ["created_at", "2019-05-15 15:58:28.800659"], ["updated_at", "2019-05-15 15:58:28.800659"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 459], ["created_at", "2019-05-15 15:58:28.802769"], ["updated_at", "2019-05-15 15:58:28.802769"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 460], ["created_at", "2019-05-15 15:58:28.804773"], ["updated_at", "2019-05-15 15:58:28.804773"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 461], ["created_at", "2019-05-15 15:58:28.806653"], ["updated_at", "2019-05-15 15:58:28.806653"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.811691"], ["updated_at", "2019-05-15 15:58:28.811691"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.816123"], ["updated_at", "2019-05-15 15:58:28.816123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.818795"], ["updated_at", "2019-05-15 15:58:28.818795"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.825799"], ["updated_at", "2019-05-15 15:58:28.825799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 462], ["created_at", "2019-05-15 15:58:28.827808"], ["updated_at", "2019-05-15 15:58:28.827808"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 463], ["created_at", "2019-05-15 15:58:28.829651"], ["updated_at", "2019-05-15 15:58:28.829651"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 464], ["created_at", "2019-05-15 15:58:28.831361"], ["updated_at", "2019-05-15 15:58:28.831361"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 465], ["created_at", "2019-05-15 15:58:28.833138"], ["updated_at", "2019-05-15 15:58:28.833138"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.837627"], ["updated_at", "2019-05-15 15:58:28.837627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.841848"], ["updated_at", "2019-05-15 15:58:28.841848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.844178"], ["updated_at", "2019-05-15 15:58:28.844178"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.846324"], ["updated_at", "2019-05-15 15:58:28.846324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 466], ["created_at", "2019-05-15 15:58:28.848331"], ["updated_at", "2019-05-15 15:58:28.848331"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 467], ["created_at", "2019-05-15 15:58:28.850577"], ["updated_at", "2019-05-15 15:58:28.850577"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 468], ["created_at", "2019-05-15 15:58:28.852598"], ["updated_at", "2019-05-15 15:58:28.852598"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 469], ["created_at", "2019-05-15 15:58:28.854451"], ["updated_at", "2019-05-15 15:58:28.854451"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.858798"], ["updated_at", "2019-05-15 15:58:28.858798"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.863062"], ["updated_at", "2019-05-15 15:58:28.863062"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.865266"], ["updated_at", "2019-05-15 15:58:28.865266"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.867670"], ["updated_at", "2019-05-15 15:58:28.867670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 470], ["created_at", "2019-05-15 15:58:28.869731"], ["updated_at", "2019-05-15 15:58:28.869731"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 471], ["created_at", "2019-05-15 15:58:28.871647"], ["updated_at", "2019-05-15 15:58:28.871647"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 472], ["created_at", "2019-05-15 15:58:28.873409"], ["updated_at", "2019-05-15 15:58:28.873409"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 473], ["created_at", "2019-05-15 15:58:28.875108"], ["updated_at", "2019-05-15 15:58:28.875108"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.882316"], ["updated_at", "2019-05-15 15:58:28.882316"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:28.884436"], ["updated_at", "2019-05-15 15:58:28.884436"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 474], ["author_id", 185]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 474], ["created_at", "2019-05-15 15:58:28.887994"], ["updated_at", "2019-05-15 15:58:28.887994"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.891387"], ["updated_at", "2019-05-15 15:58:28.891387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.893423"], ["updated_at", "2019-05-15 15:58:28.893423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.896091"], ["updated_at", "2019-05-15 15:58:28.896091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.899670"], ["updated_at", "2019-05-15 15:58:28.899670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 475], ["created_at", "2019-05-15 15:58:28.901606"], ["updated_at", "2019-05-15 15:58:28.901606"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 476], ["created_at", "2019-05-15 15:58:28.903386"], ["updated_at", "2019-05-15 15:58:28.903386"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 477], ["created_at", "2019-05-15 15:58:28.905135"], ["updated_at", "2019-05-15 15:58:28.905135"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 478], ["created_at", "2019-05-15 15:58:28.906858"], ["updated_at", "2019-05-15 15:58:28.906858"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 475], ["created_at", "2019-05-15 15:58:28.908587"], ["updated_at", "2019-05-15 15:58:28.908587"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 476], ["created_at", "2019-05-15 15:58:28.910318"], ["updated_at", "2019-05-15 15:58:28.910318"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 477], ["created_at", "2019-05-15 15:58:28.912159"], ["updated_at", "2019-05-15 15:58:28.912159"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 475], ["created_at", "2019-05-15 15:58:28.913873"], ["updated_at", "2019-05-15 15:58:28.913873"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 476], ["created_at", "2019-05-15 15:58:28.915468"], ["updated_at", "2019-05-15 15:58:28.915468"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 475], ["created_at", "2019-05-15 15:58:28.917481"], ["updated_at", "2019-05-15 15:58:28.917481"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.924423"], ["updated_at", "2019-05-15 15:58:28.924423"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 479], ["created_at", "2019-05-13 15:58:28.926371"], ["updated_at", "2019-05-15 15:58:28.928672"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 479], ["created_at", "2019-05-12 15:58:28.929815"], ["updated_at", "2019-05-15 15:58:28.930612"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 479], ["created_at", "2019-05-11 15:58:28.931551"], ["updated_at", "2019-05-15 15:58:28.932366"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:28.937340"], ["updated_at", "2019-05-15 15:58:28.937340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 480], ["created_at", "2019-05-13 15:58:28.939920"], ["updated_at", "2019-05-15 15:58:28.941481"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 480], ["created_at", "2019-05-12 15:58:28.942597"], ["updated_at", "2019-05-15 15:58:28.943386"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 480], ["created_at", "2019-05-11 15:58:28.944426"], ["updated_at", "2019-05-15 15:58:28.945350"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-05-15 15:58:43.572235"], ["updated_at", "2019-05-15 15:58:43.572235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-05-15 15:58:43.598345"], ["updated_at", "2019-05-15 15:58:43.598345"]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 481], ["author_id", 186]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-05-15 15:58:43.609991"], ["updated_at", "2019-05-15 15:58:43.609991"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 482], ["author_id", 186]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 481]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 481]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 481]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 482]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 482]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 482]]
  Rendered books/index.html.erb within layouts/application (23.3ms)
Completed 200 OK in 160ms (Views: 153.7ms | ActiveRecord: 4.4ms)
Started GET "/authors/186" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"186"}
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 186]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 481], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 481]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 482], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 482]]
  Rendered authors/show.html.erb within layouts/application (7.3ms)
Completed 200 OK in 14ms (Views: 8.8ms | ActiveRecord: 1.7ms)
Started GET "/books/481" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"481"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 481], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 481]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 481]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 481], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 481], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 481]]
  Rendered books/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 1.3ms)
Started GET "/authors/186" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"186"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 186]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 481], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 481]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 482], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 482]]
  Rendered authors/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:58:43.831324"], ["updated_at", "2019-05-15 15:58:43.831324"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:58:43.836385"], ["updated_at", "2019-05-15 15:58:43.836385"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 483], ["author_id", 187]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:58:43.841347"], ["updated_at", "2019-05-15 15:58:43.841347"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 484], ["author_id", 187]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 483], ["created_at", "2019-05-15 15:58:43.852489"], ["updated_at", "2019-05-15 15:58:43.852489"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/187" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"187"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 187], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 187]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 483], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 483], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 483], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 483], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 483], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 483]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 484], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 484]]
  Rendered authors/show.html.erb within layouts/application (7.5ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-05-15 15:58:43.872000"], ["updated_at", "2019-05-15 15:58:43.872000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-05-15 15:58:43.877028"], ["updated_at", "2019-05-15 15:58:43.877028"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 485], ["author_id", 188]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-05-15 15:58:43.880521"], ["updated_at", "2019-05-15 15:58:43.880521"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 485], ["author_id", 189]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-05-15 15:58:43.887228"], ["updated_at", "2019-05-15 15:58:43.887228"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 486], ["author_id", 189]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/188" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"188"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 188], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 188]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 485], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 485]]
  Rendered authors/show.html.erb within layouts/application (3.5ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.8ms)
Started DELETE "/authors/188" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"188"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 188], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 188]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 485[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 485]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 485]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 219]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 220]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 485]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 188]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 188]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.9ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 486]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 486]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 486]]
  Rendered books/index.html.erb within layouts/application (6.1ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:58:43.930514"], ["updated_at", "2019-05-15 15:58:43.930514"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:58:43.935711"], ["updated_at", "2019-05-15 15:58:43.935711"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 487], ["author_id", 190]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:43.939932"], ["updated_at", "2019-05-15 15:58:43.939932"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 487], ["author_id", 191]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:58:43.944481"], ["updated_at", "2019-05-15 15:58:43.944481"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 488], ["author_id", 190]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:58:43.949582"], ["updated_at", "2019-05-15 15:58:43.949582"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 489], ["author_id", 190]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/190" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"190"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 190], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 190]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 487], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 487]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 488], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 488]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 489], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 489]]
  Rendered authors/show.html.erb within layouts/application (7.7ms)
Completed 200 OK in 11ms (Views: 9.0ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 15:58:43.975505"], ["updated_at", "2019-05-15 15:58:43.975505"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 15:58:43.979652"], ["updated_at", "2019-05-15 15:58:43.979652"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 490], ["author_id", 192]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:43.983312"], ["updated_at", "2019-05-15 15:58:43.983312"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 490], ["author_id", 193]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 15:58:43.988142"], ["updated_at", "2019-05-15 15:58:43.988142"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 491], ["author_id", 192]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 15:58:43.992223"], ["updated_at", "2019-05-15 15:58:43.992223"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 492], ["author_id", 192]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/192" for 127.0.0.1 at 2019-05-15 09:58:43 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"192"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 192], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 192]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 490], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 490]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 491], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 491]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 492], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 492]]
  Rendered authors/show.html.erb within layouts/application (6.6ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.010569"], ["updated_at", "2019-05-15 15:58:44.010569"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 493], ["created_at", "2019-05-15 15:58:44.014709"], ["updated_at", "2019-05-15 15:58:44.014709"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 493], ["created_at", "2019-05-15 15:58:44.016482"], ["updated_at", "2019-05-15 15:58:44.016482"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 493], ["created_at", "2019-05-15 15:58:44.018018"], ["updated_at", "2019-05-15 15:58:44.018018"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 493], ["created_at", "2019-05-15 15:58:44.019604"], ["updated_at", "2019-05-15 15:58:44.019604"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 493]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 493]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 493]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 493]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 493]]
  Rendered books/index.html.erb within layouts/application (7.5ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 493]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 493]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.038245"], ["updated_at", "2019-05-15 15:58:44.038245"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.042366"], ["updated_at", "2019-05-15 15:58:44.042366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.044506"], ["updated_at", "2019-05-15 15:58:44.044506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.046417"], ["updated_at", "2019-05-15 15:58:44.046417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 494], ["created_at", "2019-05-15 15:58:44.048494"], ["updated_at", "2019-05-15 15:58:44.048494"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 495], ["created_at", "2019-05-15 15:58:44.050838"], ["updated_at", "2019-05-15 15:58:44.050838"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 496], ["created_at", "2019-05-15 15:58:44.052793"], ["updated_at", "2019-05-15 15:58:44.052793"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 497], ["created_at", "2019-05-15 15:58:44.054888"], ["updated_at", "2019-05-15 15:58:44.054888"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 494], ["created_at", "2019-05-15 15:58:44.056553"], ["updated_at", "2019-05-15 15:58:44.056553"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 495], ["created_at", "2019-05-15 15:58:44.058242"], ["updated_at", "2019-05-15 15:58:44.058242"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 496], ["created_at", "2019-05-15 15:58:44.059767"], ["updated_at", "2019-05-15 15:58:44.059767"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 494], ["created_at", "2019-05-15 15:58:44.061353"], ["updated_at", "2019-05-15 15:58:44.061353"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 495], ["created_at", "2019-05-15 15:58:44.062878"], ["updated_at", "2019-05-15 15:58:44.062878"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 494], ["created_at", "2019-05-15 15:58:44.064506"], ["updated_at", "2019-05-15 15:58:44.064506"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 494]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 495]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 496]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 497]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 496]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 495]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 494]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 494]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 494]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 495]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 495]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 495]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 496]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 496]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 496]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 497]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 497]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 497]]
  Rendered books/index.html.erb within layouts/application (17.4ms)
Completed 200 OK in 19ms (Views: 14.7ms | ActiveRecord: 3.9ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 494]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 495]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 496]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 497]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 496]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 495]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 494]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 494]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 494]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 495]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 495]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 495]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 496]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 496]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 496]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 497]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 497]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 497]]
  Rendered books/index.html.erb within layouts/application (17.1ms)
Completed 200 OK in 19ms (Views: 14.4ms | ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.111343"], ["updated_at", "2019-05-15 15:58:44.111343"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.115548"], ["updated_at", "2019-05-15 15:58:44.115548"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.117738"], ["updated_at", "2019-05-15 15:58:44.117738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.119793"], ["updated_at", "2019-05-15 15:58:44.119793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 498], ["created_at", "2019-05-15 15:58:44.121981"], ["updated_at", "2019-05-15 15:58:44.121981"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 499], ["created_at", "2019-05-15 15:58:44.123933"], ["updated_at", "2019-05-15 15:58:44.123933"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 500], ["created_at", "2019-05-15 15:58:44.125747"], ["updated_at", "2019-05-15 15:58:44.125747"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 501], ["created_at", "2019-05-15 15:58:44.127623"], ["updated_at", "2019-05-15 15:58:44.127623"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 498], ["created_at", "2019-05-15 15:58:44.129207"], ["updated_at", "2019-05-15 15:58:44.129207"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 499], ["created_at", "2019-05-15 15:58:44.130797"], ["updated_at", "2019-05-15 15:58:44.130797"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 500], ["created_at", "2019-05-15 15:58:44.132689"], ["updated_at", "2019-05-15 15:58:44.132689"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 498], ["created_at", "2019-05-15 15:58:44.134975"], ["updated_at", "2019-05-15 15:58:44.134975"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 499], ["created_at", "2019-05-15 15:58:44.136866"], ["updated_at", "2019-05-15 15:58:44.136866"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 498], ["created_at", "2019-05-15 15:58:44.138736"], ["updated_at", "2019-05-15 15:58:44.138736"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 498]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 499]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 500]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 500]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 499]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 498]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 498]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 498]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 499]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 499]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 499]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 500]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 500]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 500]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 501]]
  Rendered books/index.html.erb within layouts/application (18.0ms)
Completed 200 OK in 34ms (Views: 29.7ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 498]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 499]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 500]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 500]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 499]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 501]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 500]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 500]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 500]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 499]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 499]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 499]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 498]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 498]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 498]]
  Rendered books/index.html.erb within layouts/application (18.2ms)
Completed 200 OK in 20ms (Views: 15.5ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.201361"], ["updated_at", "2019-05-15 15:58:44.201361"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.205934"], ["updated_at", "2019-05-15 15:58:44.205934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.208016"], ["updated_at", "2019-05-15 15:58:44.208016"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.210020"], ["updated_at", "2019-05-15 15:58:44.210020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 502], ["created_at", "2019-05-15 15:58:44.211967"], ["updated_at", "2019-05-15 15:58:44.211967"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 503], ["created_at", "2019-05-15 15:58:44.213881"], ["updated_at", "2019-05-15 15:58:44.213881"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 504], ["created_at", "2019-05-15 15:58:44.216285"], ["updated_at", "2019-05-15 15:58:44.216285"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 505], ["created_at", "2019-05-15 15:58:44.218356"], ["updated_at", "2019-05-15 15:58:44.218356"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 502], ["created_at", "2019-05-15 15:58:44.220106"], ["updated_at", "2019-05-15 15:58:44.220106"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 503], ["created_at", "2019-05-15 15:58:44.221929"], ["updated_at", "2019-05-15 15:58:44.221929"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 504], ["created_at", "2019-05-15 15:58:44.223615"], ["updated_at", "2019-05-15 15:58:44.223615"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 502], ["created_at", "2019-05-15 15:58:44.225336"], ["updated_at", "2019-05-15 15:58:44.225336"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 503], ["created_at", "2019-05-15 15:58:44.226977"], ["updated_at", "2019-05-15 15:58:44.226977"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 502], ["created_at", "2019-05-15 15:58:44.228642"], ["updated_at", "2019-05-15 15:58:44.228642"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 505]]
  Rendered books/index.html.erb within layouts/application (17.7ms)
Completed 200 OK in 19ms (Views: 15.4ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 505]]
  Rendered books/index.html.erb within layouts/application (17.3ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 505]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 504]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 504]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 503]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 503]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 502]]
  Rendered books/index.html.erb within layouts/application (17.9ms)
Completed 200 OK in 19ms (Views: 15.2ms | ActiveRecord: 3.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.298177"], ["updated_at", "2019-05-15 15:58:44.298177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.301592"], ["updated_at", "2019-05-15 15:58:44.301592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.304555"], ["updated_at", "2019-05-15 15:58:44.304555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.306732"], ["updated_at", "2019-05-15 15:58:44.306732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 506], ["created_at", "2019-05-15 15:58:44.308864"], ["updated_at", "2019-05-15 15:58:44.308864"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 507], ["created_at", "2019-05-15 15:58:44.310979"], ["updated_at", "2019-05-15 15:58:44.310979"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 508], ["created_at", "2019-05-15 15:58:44.313030"], ["updated_at", "2019-05-15 15:58:44.313030"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 509], ["created_at", "2019-05-15 15:58:44.315248"], ["updated_at", "2019-05-15 15:58:44.315248"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 506], ["created_at", "2019-05-15 15:58:44.317611"], ["updated_at", "2019-05-15 15:58:44.317611"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 507], ["created_at", "2019-05-15 15:58:44.319573"], ["updated_at", "2019-05-15 15:58:44.319573"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 508], ["created_at", "2019-05-15 15:58:44.321595"], ["updated_at", "2019-05-15 15:58:44.321595"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 506], ["created_at", "2019-05-15 15:58:44.323427"], ["updated_at", "2019-05-15 15:58:44.323427"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 507], ["created_at", "2019-05-15 15:58:44.325104"], ["updated_at", "2019-05-15 15:58:44.325104"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 506], ["created_at", "2019-05-15 15:58:44.326806"], ["updated_at", "2019-05-15 15:58:44.326806"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 509]]
  Rendered books/index.html.erb within layouts/application (18.4ms)
Completed 200 OK in 20ms (Views: 15.9ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (506, 507, 508, 509)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 509]]
  Rendered books/index.html.erb within layouts/application (17.4ms)
Completed 200 OK in 21ms (Views: 15.2ms | ActiveRecord: 4.0ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (509, 508, 507, 506)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 509]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 509]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 508]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 508]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 507]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 507]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 506]]
  Rendered books/index.html.erb within layouts/application (21.2ms)
Completed 200 OK in 26ms (Views: 19.0ms | ActiveRecord: 4.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.406702"], ["updated_at", "2019-05-15 15:58:44.406702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.410990"], ["updated_at", "2019-05-15 15:58:44.410990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.413531"], ["updated_at", "2019-05-15 15:58:44.413531"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.416387"], ["updated_at", "2019-05-15 15:58:44.416387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 510], ["created_at", "2019-05-15 15:58:44.418790"], ["updated_at", "2019-05-15 15:58:44.418790"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 511], ["created_at", "2019-05-15 15:58:44.421442"], ["updated_at", "2019-05-15 15:58:44.421442"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 512], ["created_at", "2019-05-15 15:58:44.423872"], ["updated_at", "2019-05-15 15:58:44.423872"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 513], ["created_at", "2019-05-15 15:58:44.426236"], ["updated_at", "2019-05-15 15:58:44.426236"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 510], ["created_at", "2019-05-15 15:58:44.428387"], ["updated_at", "2019-05-15 15:58:44.428387"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 511], ["created_at", "2019-05-15 15:58:44.430125"], ["updated_at", "2019-05-15 15:58:44.430125"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 512], ["created_at", "2019-05-15 15:58:44.432052"], ["updated_at", "2019-05-15 15:58:44.432052"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 510], ["created_at", "2019-05-15 15:58:44.436500"], ["updated_at", "2019-05-15 15:58:44.436500"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 511], ["created_at", "2019-05-15 15:58:44.438627"], ["updated_at", "2019-05-15 15:58:44.438627"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 510], ["created_at", "2019-05-15 15:58:44.440692"], ["updated_at", "2019-05-15 15:58:44.440692"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 510]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 511]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 512]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 512]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 511]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 510]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 510]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 510]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 511]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 511]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 511]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 512]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 512]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 512]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 513]]
  Rendered books/index.html.erb within layouts/application (19.1ms)
Completed 200 OK in 22ms (Views: 17.5ms | ActiveRecord: 3.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 510]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 511]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 512]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.476327"], ["updated_at", "2019-05-15 15:58:44.476327"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:44.480620"], ["updated_at", "2019-05-15 15:58:44.480620"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 514], ["author_id", 194]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 514], ["created_at", "2019-05-15 15:58:44.485217"], ["updated_at", "2019-05-15 15:58:44.485217"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 514], ["created_at", "2019-05-15 15:58:44.487567"], ["updated_at", "2019-05-15 15:58:44.487567"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 514], ["created_at", "2019-05-15 15:58:44.489317"], ["updated_at", "2019-05-15 15:58:44.489317"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 514], ["created_at", "2019-05-15 15:58:44.490919"], ["updated_at", "2019-05-15 15:58:44.490919"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/514" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"514"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 514], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 514]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 514]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 514], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 514], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 514]]
  Rendered books/show.html.erb within layouts/application (5.7ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.509214"], ["updated_at", "2019-05-15 15:58:44.509214"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:44.511815"], ["updated_at", "2019-05-15 15:58:44.511815"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 515], ["author_id", 195]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 515], ["created_at", "2019-05-15 15:58:44.515560"], ["updated_at", "2019-05-15 15:58:44.515560"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 515], ["created_at", "2019-05-15 15:58:44.517369"], ["updated_at", "2019-05-15 15:58:44.517369"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 515], ["created_at", "2019-05-15 15:58:44.519357"], ["updated_at", "2019-05-15 15:58:44.519357"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 515], ["created_at", "2019-05-15 15:58:44.521310"], ["updated_at", "2019-05-15 15:58:44.521310"], ["user", "Vince"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/515" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"515"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 515], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 515]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 515], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 515], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  Rendered books/show.html.erb within layouts/application (7.0ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.543046"], ["updated_at", "2019-05-15 15:58:44.543046"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:44.547435"], ["updated_at", "2019-05-15 15:58:44.547435"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 516], ["author_id", 196]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 516], ["created_at", "2019-05-15 15:58:44.552194"], ["updated_at", "2019-05-15 15:58:44.552194"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 516], ["created_at", "2019-05-15 15:58:44.554567"], ["updated_at", "2019-05-15 15:58:44.554567"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 516], ["created_at", "2019-05-15 15:58:44.556607"], ["updated_at", "2019-05-15 15:58:44.556607"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 516], ["created_at", "2019-05-15 15:58:44.558513"], ["updated_at", "2019-05-15 15:58:44.558513"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/516" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"516"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 516], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 516]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 516], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 516], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  Rendered books/show.html.erb within layouts/application (6.4ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-05-15 15:58:44.575640"], ["updated_at", "2019-05-15 15:58:44.575640"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/517" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"517"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 517], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 517]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 517], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 517], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.1ms)
Started DELETE "/books/517" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"517"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 517], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 517]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 517]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 6ms (ActiveRecord: 1.3ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.6ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.605903"], ["updated_at", "2019-05-15 15:58:44.605903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.610371"], ["updated_at", "2019-05-15 15:58:44.610371"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:44.612633"], ["updated_at", "2019-05-15 15:58:44.612633"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 518], ["author_id", 197]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:58:44.616698"], ["updated_at", "2019-05-15 15:58:44.616698"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 518], ["author_id", 198]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:58:44.621283"], ["updated_at", "2019-05-15 15:58:44.621283"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 519], ["author_id", 199]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 518]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 518]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 518]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 519]]
  Rendered books/index.html.erb within layouts/application (21.0ms)
Completed 200 OK in 23ms (Views: 19.9ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.656192"], ["updated_at", "2019-05-15 15:58:44.656192"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:44.660374"], ["updated_at", "2019-05-15 15:58:44.660374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:44.662579"], ["updated_at", "2019-05-15 15:58:44.662579"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 520], ["author_id", 200]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:58:44.666043"], ["updated_at", "2019-05-15 15:58:44.666043"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 520], ["author_id", 201]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 15:58:44.669834"], ["updated_at", "2019-05-15 15:58:44.669834"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 521], ["author_id", 202]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 521]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 521]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 521]]
  Rendered books/index.html.erb within layouts/application (8.3ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 2.1ms)
Started GET "/books/520" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"520"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 520], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.5ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 520], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 520], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.3ms)
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (9.5ms)
Completed 200 OK in 13ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-05-15 15:58:44.722650"], ["updated_at", "2019-05-15 15:58:44.722650"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:58:44.731030"], ["updated_at", "2019-05-15 15:58:44.731030"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:44.733234"], ["updated_at", "2019-05-15 15:58:44.733234"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 522], ["author_id", 204]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 522], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.2ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 522]]
  Rendered books/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.6ms)
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 522], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.9ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:58:44.770617"], ["updated_at", "2019-05-15 15:58:44.770617"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:44.772820"], ["updated_at", "2019-05-15 15:58:44.772820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 523], ["author_id", 205]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:44.777287"], ["updated_at", "2019-05-15 15:58:44.777287"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 523], ["author_id", 206]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 523], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 523]]
  Rendered books/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 1.8ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.7ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:44.800884"], ["updated_at", "2019-05-15 15:58:44.800884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 15:58:44.812412"], ["updated_at", "2019-05-15 15:58:44.812412"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 524], ["author_id", 207]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:44.818667"], ["updated_at", "2019-05-15 15:58:44.818667"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 524], ["author_id", 208]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 524], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.2ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 524]]
  Rendered books/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:44.854481"], ["updated_at", "2019-05-15 15:58:44.854481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:44.857856"], ["updated_at", "2019-05-15 15:58:44.857856"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 13ms (ActiveRecord: 2.4ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-05-15 15:58:44.900297"], ["updated_at", "2019-05-15 15:58:44.900297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 525]]
  Rendered books/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:58:44.944211"], ["updated_at", "2019-05-15 15:58:44.944211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 15:58:44.946948"], ["updated_at", "2019-05-15 15:58:44.946948"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 526], ["author_id", 211]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 15:58:44.952954"], ["updated_at", "2019-05-15 15:58:44.952954"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 526], ["author_id", 212]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 526], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 18ms (ActiveRecord: 3.6ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 526]]
  Rendered books/index.html.erb within layouts/application (7.3ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 2.0ms)
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:58:44.975077"], ["updated_at", "2019-05-15 15:58:44.975077"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:44.980113"], ["updated_at", "2019-05-15 15:58:44.980113"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 527], ["author_id", 213]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:58:44.985316"], ["updated_at", "2019-05-15 15:58:44.985316"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 527], ["author_id", 214]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 527], ["created_at", "2019-05-15 15:58:44.990289"], ["updated_at", "2019-05-15 15:58:44.990289"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 527], ["created_at", "2019-05-15 15:58:44.993310"], ["updated_at", "2019-05-15 15:58:44.993310"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 527], ["created_at", "2019-05-15 15:58:44.996720"], ["updated_at", "2019-05-15 15:58:44.996720"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/527" for 127.0.0.1 at 2019-05-15 09:58:44 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"527"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 527], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 527], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 527], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  Rendered books/show.html.erb within layouts/application (10.8ms)
Completed 200 OK in 14ms (Views: 11.1ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 15:58:45.034854"], ["updated_at", "2019-05-15 15:58:45.034854"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.039112"], ["updated_at", "2019-05-15 15:58:45.039112"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 528], ["author_id", 215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 15:58:45.042518"], ["updated_at", "2019-05-15 15:58:45.042518"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 528], ["author_id", 216]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 528], ["created_at", "2019-05-15 15:58:45.045699"], ["updated_at", "2019-05-15 15:58:45.045699"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 528], ["created_at", "2019-05-15 15:58:45.047377"], ["updated_at", "2019-05-15 15:58:45.047377"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 528], ["created_at", "2019-05-15 15:58:45.049126"], ["updated_at", "2019-05-15 15:58:45.049126"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/528" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"528"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 528], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 528], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 528], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  Rendered books/show.html.erb within layouts/application (5.6ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.7ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 1.4ms)
Started GET "/" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.091381"], ["updated_at", "2019-05-15 15:58:45.091381"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.096471"], ["updated_at", "2019-05-15 15:58:45.096471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.098638"], ["updated_at", "2019-05-15 15:58:45.098638"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 529], ["author_id", 217]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.104040"], ["updated_at", "2019-05-15 15:58:45.104040"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 530], ["author_id", 218]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 529], ["created_at", "2019-05-15 15:58:45.107670"], ["updated_at", "2019-05-15 15:58:45.107670"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 530], ["created_at", "2019-05-15 15:58:45.109447"], ["updated_at", "2019-05-15 15:58:45.109447"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/529" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"529"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 529], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 529]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 529], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 529], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  Rendered books/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 529], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 530], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.1ms)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.5ms)
Started DELETE "/reviews/773" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"773"}
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 773], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 773]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.7ms)
Started GET "/reviews" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.145557"], ["updated_at", "2019-05-15 15:58:45.145557"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.149730"], ["updated_at", "2019-05-15 15:58:45.149730"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 531], ["author_id", 219]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/531" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"531"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 531], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 531]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 531], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 531], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  Rendered books/show.html.erb within layouts/application (4.0ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 1.0ms)
Started GET "/books/531/reviews/new" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"531"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 531], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 10ms (Views: 6.7ms | ActiveRecord: 0.2ms)
Started POST "/books/531/reviews" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"531"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 531], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 531], ["created_at", "2019-05-15 15:58:45.181203"], ["updated_at", "2019-05-15 15:58:45.181203"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/531
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/531" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"531"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 531], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 531]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 531], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 531], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  Rendered books/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.198951"], ["updated_at", "2019-05-15 15:58:45.198951"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.203207"], ["updated_at", "2019-05-15 15:58:45.203207"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 532], ["author_id", 220]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/532" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"532"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 532]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 532], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 532], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  Rendered books/show.html.erb within layouts/application (3.9ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.0ms)
Started GET "/books/532/reviews/new" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"532"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.2ms)
Started POST "/books/532/reviews" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"532"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 532], ["created_at", "2019-05-15 15:58:45.227316"], ["updated_at", "2019-05-15 15:58:45.227316"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/532
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
Started GET "/books/532" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"532"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 532]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 532], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 532], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  Rendered books/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.1ms)
Started GET "/books/532/reviews/new" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"532"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.1ms)
Started POST "/books/532/reviews" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"532"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/532
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/books/532" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"532"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 532]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 532], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 532], ["LIMIT", 3]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  Rendered books/show.html.erb within layouts/application (6.7ms)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.264243"], ["updated_at", "2019-05-15 15:58:45.264243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.266822"], ["updated_at", "2019-05-15 15:58:45.266822"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.269818"], ["updated_at", "2019-05-15 15:58:45.269818"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 533], ["author_id", 221]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.275641"], ["updated_at", "2019-05-15 15:58:45.275641"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 534], ["author_id", 222]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 533], ["created_at", "2019-05-15 15:58:45.279377"], ["updated_at", "2019-05-15 15:58:45.279377"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 534], ["created_at", "2019-05-15 15:58:45.281195"], ["updated_at", "2019-05-15 15:58:45.281195"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 533], ["created_at", "2019-05-15 15:58:45.283100"], ["updated_at", "2019-05-15 15:58:45.283100"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/533" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"533"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 533], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 533]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 533]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 533], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 533], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 533]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 533], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 534], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.310276"], ["updated_at", "2019-05-15 15:58:45.310276"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.314522"], ["updated_at", "2019-05-15 15:58:45.314522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.316917"], ["updated_at", "2019-05-15 15:58:45.316917"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 535], ["author_id", 223]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.320377"], ["updated_at", "2019-05-15 15:58:45.320377"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 536], ["author_id", 224]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 535], ["created_at", "2019-05-15 15:58:45.323858"], ["updated_at", "2019-05-15 15:58:45.323858"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 536], ["created_at", "2019-05-15 15:58:45.325654"], ["updated_at", "2019-05-15 15:58:45.325654"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 535], ["created_at", "2019-05-15 15:58:45.327244"], ["updated_at", "2019-05-15 15:58:45.327244"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/535" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"535"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 535], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 535]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 535]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 535], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 535], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 535]]
  Rendered books/show.html.erb within layouts/application (5.9ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 1.2ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 535], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 536], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.349841"], ["updated_at", "2019-05-15 15:58:45.349841"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.354155"], ["updated_at", "2019-05-15 15:58:45.354155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 537], ["created_at", "2019-05-13 15:58:45.355264"], ["updated_at", "2019-05-15 15:58:45.356458"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 538], ["created_at", "2019-05-12 15:58:45.357643"], ["updated_at", "2019-05-15 15:58:45.358576"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 537], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 538], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 537], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 538], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.375626"], ["updated_at", "2019-05-15 15:58:45.375626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.377779"], ["updated_at", "2019-05-15 15:58:45.377779"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 539], ["created_at", "2019-05-13 15:58:45.378784"], ["updated_at", "2019-05-15 15:58:45.379910"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 540], ["created_at", "2019-05-12 15:58:45.380922"], ["updated_at", "2019-05-15 15:58:45.382015"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 539], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 540], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 540], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 539], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.401707"], ["updated_at", "2019-05-15 15:58:45.401707"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.404336"], ["updated_at", "2019-05-15 15:58:45.404336"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 541], ["author_id", 225]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 541], ["created_at", "2019-05-15 15:58:45.410958"], ["updated_at", "2019-05-15 15:58:45.410958"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 541]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 541]]
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 541]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 541]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 541]]
  Rendered books/index.html.erb within layouts/application (8.8ms)
Completed 200 OK in 11ms (Views: 7.9ms | ActiveRecord: 2.2ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 541], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.4ms)
Started GET "/books/541" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"541"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 541], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 541]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 541]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 541], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 541], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 541]]
  Rendered books/show.html.erb within layouts/application (9.5ms)
Completed 200 OK in 11ms (Views: 9.5ms | ActiveRecord: 1.2ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 541], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.4ms)
Started GET "/authors/225" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"225"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 225]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 541], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 541], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 541], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 541], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 541], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 541]]
  Rendered authors/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 09:58:45 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 541], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.541758"], ["updated_at", "2019-05-15 15:58:45.541758"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.544546"], ["updated_at", "2019-05-15 15:58:45.544546"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 542], ["author_id", 226]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 542], ["created_at", "2019-05-15 15:58:45.548236"], ["updated_at", "2019-05-15 15:58:45.548236"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 542], ["created_at", "2019-05-15 15:58:45.550326"], ["updated_at", "2019-05-15 15:58:45.550326"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 542]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.555003"], ["updated_at", "2019-05-15 15:58:45.555003"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.557451"], ["updated_at", "2019-05-15 15:58:45.557451"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 543], ["author_id", 227]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 543], ["created_at", "2019-05-15 15:58:45.563432"], ["updated_at", "2019-05-15 15:58:45.563432"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 543], ["created_at", "2019-05-15 15:58:45.565284"], ["updated_at", "2019-05-15 15:58:45.565284"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 543]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.570748"], ["updated_at", "2019-05-15 15:58:45.570748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 544], ["created_at", "2019-05-15 15:58:45.575361"], ["updated_at", "2019-05-15 15:58:45.575361"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 544], ["created_at", "2019-05-15 15:58:45.577325"], ["updated_at", "2019-05-15 15:58:45.577325"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 544], ["created_at", "2019-05-15 15:58:45.578957"], ["updated_at", "2019-05-15 15:58:45.578957"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 544], ["created_at", "2019-05-15 15:58:45.580697"], ["updated_at", "2019-05-15 15:58:45.580697"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 544], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.586066"], ["updated_at", "2019-05-15 15:58:45.586066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 545], ["created_at", "2019-05-15 15:58:45.588694"], ["updated_at", "2019-05-15 15:58:45.588694"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 545], ["created_at", "2019-05-15 15:58:45.592486"], ["updated_at", "2019-05-15 15:58:45.592486"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 545], ["created_at", "2019-05-15 15:58:45.594221"], ["updated_at", "2019-05-15 15:58:45.594221"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 545], ["created_at", "2019-05-15 15:58:45.595842"], ["updated_at", "2019-05-15 15:58:45.595842"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 545], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.600887"], ["updated_at", "2019-05-15 15:58:45.600887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 546], ["created_at", "2019-05-15 15:58:45.603277"], ["updated_at", "2019-05-15 15:58:45.603277"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 546], ["created_at", "2019-05-15 15:58:45.605118"], ["updated_at", "2019-05-15 15:58:45.605118"], ["user", "Rob"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 546], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.611439"], ["updated_at", "2019-05-15 15:58:45.611439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.613504"], ["updated_at", "2019-05-15 15:58:45.613504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.615570"], ["updated_at", "2019-05-15 15:58:45.615570"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.619981"], ["updated_at", "2019-05-15 15:58:45.619981"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.622250"], ["updated_at", "2019-05-15 15:58:45.622250"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.626309"], ["updated_at", "2019-05-15 15:58:45.626309"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.630333"], ["updated_at", "2019-05-15 15:58:45.630333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.633011"], ["updated_at", "2019-05-15 15:58:45.633011"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 553], ["created_at", "2019-05-15 15:58:45.635299"], ["updated_at", "2019-05-15 15:58:45.635299"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 553], ["created_at", "2019-05-15 15:58:45.637100"], ["updated_at", "2019-05-15 15:58:45.637100"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 554], ["created_at", "2019-05-15 15:58:45.639262"], ["updated_at", "2019-05-15 15:58:45.639262"], ["user", "Joe"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (554, 553)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.646342"], ["updated_at", "2019-05-15 15:58:45.646342"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.648574"], ["updated_at", "2019-05-15 15:58:45.648574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 555], ["created_at", "2019-05-15 15:58:45.650976"], ["updated_at", "2019-05-15 15:58:45.650976"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 555], ["created_at", "2019-05-15 15:58:45.652662"], ["updated_at", "2019-05-15 15:58:45.652662"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 556], ["created_at", "2019-05-15 15:58:45.654579"], ["updated_at", "2019-05-15 15:58:45.654579"], ["user", "Joe"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (555, 556)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.661684"], ["updated_at", "2019-05-15 15:58:45.661684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.663834"], ["updated_at", "2019-05-15 15:58:45.663834"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.666240"], ["updated_at", "2019-05-15 15:58:45.666240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.668346"], ["updated_at", "2019-05-15 15:58:45.668346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 557], ["created_at", "2019-05-15 15:58:45.670371"], ["updated_at", "2019-05-15 15:58:45.670371"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 558], ["created_at", "2019-05-15 15:58:45.672642"], ["updated_at", "2019-05-15 15:58:45.672642"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 559], ["created_at", "2019-05-15 15:58:45.676153"], ["updated_at", "2019-05-15 15:58:45.676153"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 560], ["created_at", "2019-05-15 15:58:45.678173"], ["updated_at", "2019-05-15 15:58:45.678173"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.683187"], ["updated_at", "2019-05-15 15:58:45.683187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.685553"], ["updated_at", "2019-05-15 15:58:45.685553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.687676"], ["updated_at", "2019-05-15 15:58:45.687676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.691386"], ["updated_at", "2019-05-15 15:58:45.691386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 561], ["created_at", "2019-05-15 15:58:45.693948"], ["updated_at", "2019-05-15 15:58:45.693948"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 562], ["created_at", "2019-05-15 15:58:45.695816"], ["updated_at", "2019-05-15 15:58:45.695816"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 563], ["created_at", "2019-05-15 15:58:45.697559"], ["updated_at", "2019-05-15 15:58:45.697559"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 564], ["created_at", "2019-05-15 15:58:45.699773"], ["updated_at", "2019-05-15 15:58:45.699773"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.704706"], ["updated_at", "2019-05-15 15:58:45.704706"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.708962"], ["updated_at", "2019-05-15 15:58:45.708962"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.710992"], ["updated_at", "2019-05-15 15:58:45.710992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.712923"], ["updated_at", "2019-05-15 15:58:45.712923"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 565], ["created_at", "2019-05-15 15:58:45.714896"], ["updated_at", "2019-05-15 15:58:45.714896"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 566], ["created_at", "2019-05-15 15:58:45.717098"], ["updated_at", "2019-05-15 15:58:45.717098"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 567], ["created_at", "2019-05-15 15:58:45.719127"], ["updated_at", "2019-05-15 15:58:45.719127"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 568], ["created_at", "2019-05-15 15:58:45.721261"], ["updated_at", "2019-05-15 15:58:45.721261"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.725741"], ["updated_at", "2019-05-15 15:58:45.725741"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.730137"], ["updated_at", "2019-05-15 15:58:45.730137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.732694"], ["updated_at", "2019-05-15 15:58:45.732694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.734875"], ["updated_at", "2019-05-15 15:58:45.734875"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 569], ["created_at", "2019-05-15 15:58:45.736946"], ["updated_at", "2019-05-15 15:58:45.736946"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 570], ["created_at", "2019-05-15 15:58:45.739051"], ["updated_at", "2019-05-15 15:58:45.739051"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 571], ["created_at", "2019-05-15 15:58:45.740866"], ["updated_at", "2019-05-15 15:58:45.740866"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 572], ["created_at", "2019-05-15 15:58:45.742621"], ["updated_at", "2019-05-15 15:58:45.742621"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.751902"], ["updated_at", "2019-05-15 15:58:45.751902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 15:58:45.754424"], ["updated_at", "2019-05-15 15:58:45.754424"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 573], ["author_id", 228]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 573], ["created_at", "2019-05-15 15:58:45.760120"], ["updated_at", "2019-05-15 15:58:45.760120"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.763816"], ["updated_at", "2019-05-15 15:58:45.763816"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.766299"], ["updated_at", "2019-05-15 15:58:45.766299"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.768528"], ["updated_at", "2019-05-15 15:58:45.768528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.770664"], ["updated_at", "2019-05-15 15:58:45.770664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 574], ["created_at", "2019-05-15 15:58:45.773962"], ["updated_at", "2019-05-15 15:58:45.773962"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 575], ["created_at", "2019-05-15 15:58:45.777212"], ["updated_at", "2019-05-15 15:58:45.777212"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 576], ["created_at", "2019-05-15 15:58:45.779135"], ["updated_at", "2019-05-15 15:58:45.779135"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 577], ["created_at", "2019-05-15 15:58:45.780906"], ["updated_at", "2019-05-15 15:58:45.780906"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 574], ["created_at", "2019-05-15 15:58:45.782743"], ["updated_at", "2019-05-15 15:58:45.782743"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 575], ["created_at", "2019-05-15 15:58:45.784901"], ["updated_at", "2019-05-15 15:58:45.784901"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 576], ["created_at", "2019-05-15 15:58:45.786723"], ["updated_at", "2019-05-15 15:58:45.786723"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 574], ["created_at", "2019-05-15 15:58:45.788643"], ["updated_at", "2019-05-15 15:58:45.788643"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 575], ["created_at", "2019-05-15 15:58:45.790383"], ["updated_at", "2019-05-15 15:58:45.790383"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 574], ["created_at", "2019-05-15 15:58:45.792031"], ["updated_at", "2019-05-15 15:58:45.792031"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.799240"], ["updated_at", "2019-05-15 15:58:45.799240"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 578], ["created_at", "2019-05-13 15:58:45.801984"], ["updated_at", "2019-05-15 15:58:45.803693"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 578], ["created_at", "2019-05-12 15:58:45.804858"], ["updated_at", "2019-05-15 15:58:45.805680"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 578], ["created_at", "2019-05-11 15:58:45.806656"], ["updated_at", "2019-05-15 15:58:45.807505"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 15:58:45.811767"], ["updated_at", "2019-05-15 15:58:45.811767"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 579], ["created_at", "2019-05-13 15:58:45.814546"], ["updated_at", "2019-05-15 15:58:45.816472"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 579], ["created_at", "2019-05-12 15:58:45.817810"], ["updated_at", "2019-05-15 15:58:45.818746"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 579], ["created_at", "2019-05-11 15:58:45.819850"], ["updated_at", "2019-05-15 15:58:45.820685"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-05-15 16:00:05.531460"], ["updated_at", "2019-05-15 16:00:05.531460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-05-15 16:00:05.555676"], ["updated_at", "2019-05-15 16:00:05.555676"]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 580], ["author_id", 229]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-05-15 16:00:05.566641"], ["updated_at", "2019-05-15 16:00:05.566641"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 581], ["author_id", 229]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (3.0ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 580]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 580]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 580]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 581]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 581]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 581]]
  Rendered books/index.html.erb within layouts/application (23.4ms)
Completed 200 OK in 139ms (Views: 130.2ms | ActiveRecord: 6.1ms)
Started GET "/authors/229" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"229"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 229], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 229]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 580], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 580]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 581], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 581]]
  Rendered authors/show.html.erb within layouts/application (7.2ms)
Completed 200 OK in 13ms (Views: 8.8ms | ActiveRecord: 1.4ms)
Started GET "/books/580" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"580"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 580], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 580]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 580]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 580], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 580], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 580]]
  Rendered books/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 10ms (Views: 5.5ms | ActiveRecord: 1.3ms)
Started GET "/authors/229" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"229"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 229], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 229]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 580], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 580]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 581], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 581]]
  Rendered authors/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 16:00:05.763951"], ["updated_at", "2019-05-15 16:00:05.763951"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 16:00:05.768992"], ["updated_at", "2019-05-15 16:00:05.768992"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 582], ["author_id", 230]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 16:00:05.773994"], ["updated_at", "2019-05-15 16:00:05.773994"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 583], ["author_id", 230]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 582], ["created_at", "2019-05-15 16:00:05.784702"], ["updated_at", "2019-05-15 16:00:05.784702"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/230" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"230"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 230], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 230]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 582], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 582], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 582], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 582], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 582], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 582]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 583], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 583]]
  Rendered authors/show.html.erb within layouts/application (7.7ms)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-05-15 16:00:05.804504"], ["updated_at", "2019-05-15 16:00:05.804504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-05-15 16:00:05.806742"], ["updated_at", "2019-05-15 16:00:05.806742"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 584], ["author_id", 231]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-05-15 16:00:05.810097"], ["updated_at", "2019-05-15 16:00:05.810097"]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 584], ["author_id", 232]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-05-15 16:00:05.817825"], ["updated_at", "2019-05-15 16:00:05.817825"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 585], ["author_id", 232]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/231" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"231"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 231], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 231]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 584], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 584]]
  Rendered authors/show.html.erb within layouts/application (3.4ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.8ms)
Started DELETE "/authors/231" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"231"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 231], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 231]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 584[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 584]]
  [1m[36mBookAuthor Load (0.1ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 584]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 266]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 267]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 584]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.1ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 231]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 231]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.8ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 585]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 585]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 585]]
  Rendered books/index.html.erb within layouts/application (6.1ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 16:00:05.861756"], ["updated_at", "2019-05-15 16:00:05.861756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 16:00:05.866880"], ["updated_at", "2019-05-15 16:00:05.866880"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 586], ["author_id", 233]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 16:00:05.871183"], ["updated_at", "2019-05-15 16:00:05.871183"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 586], ["author_id", 234]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 16:00:05.875565"], ["updated_at", "2019-05-15 16:00:05.875565"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 587], ["author_id", 233]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 16:00:05.880116"], ["updated_at", "2019-05-15 16:00:05.880116"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 588], ["author_id", 233]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/233" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"233"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 233], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 233]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 586], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 586]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 587], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 587]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 588], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 588]]
  Rendered authors/show.html.erb within layouts/application (7.7ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-05-15 16:00:05.905323"], ["updated_at", "2019-05-15 16:00:05.905323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-05-15 16:00:05.910398"], ["updated_at", "2019-05-15 16:00:05.910398"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 589], ["author_id", 235]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 16:00:05.914074"], ["updated_at", "2019-05-15 16:00:05.914074"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 589], ["author_id", 236]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-05-15 16:00:05.919588"], ["updated_at", "2019-05-15 16:00:05.919588"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 590], ["author_id", 235]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-05-15 16:00:05.924022"], ["updated_at", "2019-05-15 16:00:05.924022"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 591], ["author_id", 235]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/235" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"235"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 235]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 589], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 589]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 590], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 590]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 591], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 591]]
  Rendered authors/show.html.erb within layouts/application (7.1ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:05.941788"], ["updated_at", "2019-05-15 16:00:05.941788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 592], ["created_at", "2019-05-15 16:00:05.944061"], ["updated_at", "2019-05-15 16:00:05.944061"], ["user", "Mills"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 592], ["created_at", "2019-05-15 16:00:05.947733"], ["updated_at", "2019-05-15 16:00:05.947733"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 592], ["created_at", "2019-05-15 16:00:05.949524"], ["updated_at", "2019-05-15 16:00:05.949524"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 592], ["created_at", "2019-05-15 16:00:05.951136"], ["updated_at", "2019-05-15 16:00:05.951136"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 592]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 592]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 592]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 592]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 592]]
  Rendered books/index.html.erb within layouts/application (7.5ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 592]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 592]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:05.970072"], ["updated_at", "2019-05-15 16:00:05.970072"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:05.974118"], ["updated_at", "2019-05-15 16:00:05.974118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:05.976138"], ["updated_at", "2019-05-15 16:00:05.976138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:05.978216"], ["updated_at", "2019-05-15 16:00:05.978216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 593], ["created_at", "2019-05-15 16:00:05.980200"], ["updated_at", "2019-05-15 16:00:05.980200"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 594], ["created_at", "2019-05-15 16:00:05.982088"], ["updated_at", "2019-05-15 16:00:05.982088"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 595], ["created_at", "2019-05-15 16:00:05.984417"], ["updated_at", "2019-05-15 16:00:05.984417"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 596], ["created_at", "2019-05-15 16:00:05.986383"], ["updated_at", "2019-05-15 16:00:05.986383"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 593], ["created_at", "2019-05-15 16:00:05.988247"], ["updated_at", "2019-05-15 16:00:05.988247"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 594], ["created_at", "2019-05-15 16:00:05.989801"], ["updated_at", "2019-05-15 16:00:05.989801"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 595], ["created_at", "2019-05-15 16:00:05.991371"], ["updated_at", "2019-05-15 16:00:05.991371"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 593], ["created_at", "2019-05-15 16:00:05.992955"], ["updated_at", "2019-05-15 16:00:05.992955"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 594], ["created_at", "2019-05-15 16:00:05.994665"], ["updated_at", "2019-05-15 16:00:05.994665"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 593], ["created_at", "2019-05-15 16:00:05.996458"], ["updated_at", "2019-05-15 16:00:05.996458"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:05 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 593]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 594]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 595]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 596]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 595]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 594]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 593]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 593]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 593]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 594]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 594]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 594]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 595]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 595]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 595]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 596]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 596]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 596]]
  Rendered books/index.html.erb within layouts/application (17.7ms)
Completed 200 OK in 19ms (Views: 14.9ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 593]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 594]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 595]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 596]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 595]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 594]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 593]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 593]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 593]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 594]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 594]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 594]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 595]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 595]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 595]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 596]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 596]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 596]]
  Rendered books/index.html.erb within layouts/application (16.5ms)
Completed 200 OK in 18ms (Views: 13.8ms | ActiveRecord: 3.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.042657"], ["updated_at", "2019-05-15 16:00:06.042657"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.046946"], ["updated_at", "2019-05-15 16:00:06.046946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.049281"], ["updated_at", "2019-05-15 16:00:06.049281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.051510"], ["updated_at", "2019-05-15 16:00:06.051510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 597], ["created_at", "2019-05-15 16:00:06.053708"], ["updated_at", "2019-05-15 16:00:06.053708"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 598], ["created_at", "2019-05-15 16:00:06.055638"], ["updated_at", "2019-05-15 16:00:06.055638"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 599], ["created_at", "2019-05-15 16:00:06.057351"], ["updated_at", "2019-05-15 16:00:06.057351"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 600], ["created_at", "2019-05-15 16:00:06.059038"], ["updated_at", "2019-05-15 16:00:06.059038"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 597], ["created_at", "2019-05-15 16:00:06.060623"], ["updated_at", "2019-05-15 16:00:06.060623"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 598], ["created_at", "2019-05-15 16:00:06.062407"], ["updated_at", "2019-05-15 16:00:06.062407"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 599], ["created_at", "2019-05-15 16:00:06.064138"], ["updated_at", "2019-05-15 16:00:06.064138"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 597], ["created_at", "2019-05-15 16:00:06.065666"], ["updated_at", "2019-05-15 16:00:06.065666"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 598], ["created_at", "2019-05-15 16:00:06.067310"], ["updated_at", "2019-05-15 16:00:06.067310"], ["user", "Stella"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 597], ["created_at", "2019-05-15 16:00:06.069101"], ["updated_at", "2019-05-15 16:00:06.069101"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 597]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 598]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 599]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 600]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 599]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 598]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 597]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 597]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 597]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 598]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 598]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 598]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 599]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 599]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 599]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 600]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 600]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 600]]
  Rendered books/index.html.erb within layouts/application (17.0ms)
Completed 200 OK in 19ms (Views: 14.5ms | ActiveRecord: 3.7ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 597]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 598]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 599]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 600]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 599]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 598]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 600]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 600]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 600]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 599]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 599]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 599]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 598]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 598]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 598]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 597]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 597]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 597]]
  Rendered books/index.html.erb within layouts/application (45.7ms)
Completed 200 OK in 48ms (Views: 42.3ms | ActiveRecord: 5.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.146047"], ["updated_at", "2019-05-15 16:00:06.146047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.149048"], ["updated_at", "2019-05-15 16:00:06.149048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.152080"], ["updated_at", "2019-05-15 16:00:06.152080"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.163509"], ["updated_at", "2019-05-15 16:00:06.163509"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 601], ["created_at", "2019-05-15 16:00:06.168145"], ["updated_at", "2019-05-15 16:00:06.168145"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 602], ["created_at", "2019-05-15 16:00:06.170488"], ["updated_at", "2019-05-15 16:00:06.170488"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 603], ["created_at", "2019-05-15 16:00:06.172495"], ["updated_at", "2019-05-15 16:00:06.172495"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 604], ["created_at", "2019-05-15 16:00:06.174488"], ["updated_at", "2019-05-15 16:00:06.174488"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 601], ["created_at", "2019-05-15 16:00:06.176429"], ["updated_at", "2019-05-15 16:00:06.176429"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 602], ["created_at", "2019-05-15 16:00:06.178292"], ["updated_at", "2019-05-15 16:00:06.178292"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 603], ["created_at", "2019-05-15 16:00:06.180148"], ["updated_at", "2019-05-15 16:00:06.180148"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 601], ["created_at", "2019-05-15 16:00:06.181940"], ["updated_at", "2019-05-15 16:00:06.181940"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 602], ["created_at", "2019-05-15 16:00:06.184059"], ["updated_at", "2019-05-15 16:00:06.184059"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 601], ["created_at", "2019-05-15 16:00:06.186000"], ["updated_at", "2019-05-15 16:00:06.186000"], ["user", "Vince"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 601]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 604]]
  Rendered books/index.html.erb within layouts/application (18.3ms)
Completed 200 OK in 20ms (Views: 15.6ms | ActiveRecord: 3.9ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 601]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 604]]
  Rendered books/index.html.erb within layouts/application (17.4ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 3.7ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 604]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 604]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 603]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 603]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 602]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 602]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 601]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 601]]
  Rendered books/index.html.erb within layouts/application (17.6ms)
Completed 200 OK in 19ms (Views: 15.0ms | ActiveRecord: 3.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.257650"], ["updated_at", "2019-05-15 16:00:06.257650"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.261729"], ["updated_at", "2019-05-15 16:00:06.261729"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.263946"], ["updated_at", "2019-05-15 16:00:06.263946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.266836"], ["updated_at", "2019-05-15 16:00:06.266836"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 605], ["created_at", "2019-05-15 16:00:06.271133"], ["updated_at", "2019-05-15 16:00:06.271133"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 606], ["created_at", "2019-05-15 16:00:06.274665"], ["updated_at", "2019-05-15 16:00:06.274665"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 607], ["created_at", "2019-05-15 16:00:06.278024"], ["updated_at", "2019-05-15 16:00:06.278024"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 608], ["created_at", "2019-05-15 16:00:06.281211"], ["updated_at", "2019-05-15 16:00:06.281211"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 605], ["created_at", "2019-05-15 16:00:06.284004"], ["updated_at", "2019-05-15 16:00:06.284004"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 606], ["created_at", "2019-05-15 16:00:06.286523"], ["updated_at", "2019-05-15 16:00:06.286523"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 607], ["created_at", "2019-05-15 16:00:06.288658"], ["updated_at", "2019-05-15 16:00:06.288658"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 605], ["created_at", "2019-05-15 16:00:06.290460"], ["updated_at", "2019-05-15 16:00:06.290460"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 606], ["created_at", "2019-05-15 16:00:06.292206"], ["updated_at", "2019-05-15 16:00:06.292206"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 605], ["created_at", "2019-05-15 16:00:06.293789"], ["updated_at", "2019-05-15 16:00:06.293789"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 605]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 608]]
  Rendered books/index.html.erb within layouts/application (18.2ms)
Completed 200 OK in 20ms (Views: 15.9ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (605, 606, 607, 608)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 605]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 608]]
  Rendered books/index.html.erb within layouts/application (16.6ms)
Completed 200 OK in 20ms (Views: 14.5ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (608, 607, 606, 605)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 608]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 608]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 607]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 607]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 606]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 606]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 605]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 605]]
  Rendered books/index.html.erb within layouts/application (17.6ms)
Completed 200 OK in 21ms (Views: 15.4ms | ActiveRecord: 4.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.368860"], ["updated_at", "2019-05-15 16:00:06.368860"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.373992"], ["updated_at", "2019-05-15 16:00:06.373992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.376930"], ["updated_at", "2019-05-15 16:00:06.376930"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.379481"], ["updated_at", "2019-05-15 16:00:06.379481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 609], ["created_at", "2019-05-15 16:00:06.382030"], ["updated_at", "2019-05-15 16:00:06.382030"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 610], ["created_at", "2019-05-15 16:00:06.384763"], ["updated_at", "2019-05-15 16:00:06.384763"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 611], ["created_at", "2019-05-15 16:00:06.387011"], ["updated_at", "2019-05-15 16:00:06.387011"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 612], ["created_at", "2019-05-15 16:00:06.389135"], ["updated_at", "2019-05-15 16:00:06.389135"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 609], ["created_at", "2019-05-15 16:00:06.391212"], ["updated_at", "2019-05-15 16:00:06.391212"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 610], ["created_at", "2019-05-15 16:00:06.393112"], ["updated_at", "2019-05-15 16:00:06.393112"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 611], ["created_at", "2019-05-15 16:00:06.395110"], ["updated_at", "2019-05-15 16:00:06.395110"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 609], ["created_at", "2019-05-15 16:00:06.397186"], ["updated_at", "2019-05-15 16:00:06.397186"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 610], ["created_at", "2019-05-15 16:00:06.399415"], ["updated_at", "2019-05-15 16:00:06.399415"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 609], ["created_at", "2019-05-15 16:00:06.404310"], ["updated_at", "2019-05-15 16:00:06.404310"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 609]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 610]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 611]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 612]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 611]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 610]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 609]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 609]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 609]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 610]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 610]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 610]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 611]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 611]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 611]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 612]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 612]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 612]]
  Rendered books/index.html.erb within layouts/application (19.5ms)
Completed 200 OK in 21ms (Views: 17.3ms | ActiveRecord: 3.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 609]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 610]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 611]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.438997"], ["updated_at", "2019-05-15 16:00:06.438997"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:06.443236"], ["updated_at", "2019-05-15 16:00:06.443236"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 613], ["author_id", 237]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 613], ["created_at", "2019-05-15 16:00:06.447451"], ["updated_at", "2019-05-15 16:00:06.447451"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 613], ["created_at", "2019-05-15 16:00:06.449515"], ["updated_at", "2019-05-15 16:00:06.449515"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 613], ["created_at", "2019-05-15 16:00:06.451554"], ["updated_at", "2019-05-15 16:00:06.451554"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 613], ["created_at", "2019-05-15 16:00:06.453529"], ["updated_at", "2019-05-15 16:00:06.453529"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/613" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"613"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 613], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 613]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 613]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 613], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 613], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 613]]
  Rendered books/show.html.erb within layouts/application (5.9ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.471542"], ["updated_at", "2019-05-15 16:00:06.471542"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:06.475826"], ["updated_at", "2019-05-15 16:00:06.475826"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 614], ["author_id", 238]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 614], ["created_at", "2019-05-15 16:00:06.479734"], ["updated_at", "2019-05-15 16:00:06.479734"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 614], ["created_at", "2019-05-15 16:00:06.481751"], ["updated_at", "2019-05-15 16:00:06.481751"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 614], ["created_at", "2019-05-15 16:00:06.483936"], ["updated_at", "2019-05-15 16:00:06.483936"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 614], ["created_at", "2019-05-15 16:00:06.486191"], ["updated_at", "2019-05-15 16:00:06.486191"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/614" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"614"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 614], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 614]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 614]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 614], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 614], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 614]]
  Rendered books/show.html.erb within layouts/application (6.1ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.505030"], ["updated_at", "2019-05-15 16:00:06.505030"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:06.509464"], ["updated_at", "2019-05-15 16:00:06.509464"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 615], ["author_id", 239]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 615], ["created_at", "2019-05-15 16:00:06.513542"], ["updated_at", "2019-05-15 16:00:06.513542"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 615], ["created_at", "2019-05-15 16:00:06.515524"], ["updated_at", "2019-05-15 16:00:06.515524"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 615], ["created_at", "2019-05-15 16:00:06.517907"], ["updated_at", "2019-05-15 16:00:06.517907"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 615], ["created_at", "2019-05-15 16:00:06.519812"], ["updated_at", "2019-05-15 16:00:06.519812"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/615" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"615"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 615], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 615]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 615]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 615], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 615], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 615]]
  Rendered books/show.html.erb within layouts/application (6.2ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 615]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-05-15 16:00:06.537085"], ["updated_at", "2019-05-15 16:00:06.537085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/616" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"616"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 616], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 616]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 616]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 616], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 616], ["LIMIT", 3]]
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 616]]
  Rendered books/show.html.erb within layouts/application (6.6ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 1.6ms)
Started DELETE "/books/616" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"616"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 616], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 616]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 616]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 616]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.5ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.567365"], ["updated_at", "2019-05-15 16:00:06.567365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.571635"], ["updated_at", "2019-05-15 16:00:06.571635"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:06.574262"], ["updated_at", "2019-05-15 16:00:06.574262"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 617], ["author_id", 240]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 16:00:06.577907"], ["updated_at", "2019-05-15 16:00:06.577907"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 617], ["author_id", 241]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 16:00:06.581753"], ["updated_at", "2019-05-15 16:00:06.581753"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 618], ["author_id", 242]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 617]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 617]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 617]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 618]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 618]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 618]]
  Rendered books/index.html.erb within layouts/application (10.0ms)
Completed 200 OK in 12ms (Views: 9.1ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.608040"], ["updated_at", "2019-05-15 16:00:06.608040"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:06.610541"], ["updated_at", "2019-05-15 16:00:06.610541"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:06.615165"], ["updated_at", "2019-05-15 16:00:06.615165"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 619], ["author_id", 243]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 16:00:06.618800"], ["updated_at", "2019-05-15 16:00:06.618800"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 619], ["author_id", 244]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-05-15 16:00:06.636361"], ["updated_at", "2019-05-15 16:00:06.636361"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 620], ["author_id", 245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 619]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 619]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 619]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 620]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 620]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 620]]
  Rendered books/index.html.erb within layouts/application (8.5ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 2.2ms)
Started GET "/books/619" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"619"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 619], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 619]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 619]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 619], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 619], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 619]]
  Rendered books/show.html.erb within layouts/application (3.9ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.9ms)
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (9.8ms)
Completed 200 OK in 14ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-05-15 16:00:06.687060"], ["updated_at", "2019-05-15 16:00:06.687060"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 16:00:06.695063"], ["updated_at", "2019-05-15 16:00:06.695063"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 16:00:06.697146"], ["updated_at", "2019-05-15 16:00:06.697146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 621], ["author_id", 247]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 621], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.4ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 621]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 621]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 621]]
  Rendered books/index.html.erb within layouts/application (6.6ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 1.7ms)
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 621], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 16:00:06.736933"], ["updated_at", "2019-05-15 16:00:06.736933"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 16:00:06.739648"], ["updated_at", "2019-05-15 16:00:06.739648"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 622], ["author_id", 248]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 16:00:06.744637"], ["updated_at", "2019-05-15 16:00:06.744637"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 622], ["author_id", 249]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 622], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 16ms (ActiveRecord: 3.5ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 622]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 622]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 622]]
  Rendered books/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.6ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 622]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 16:00:06.768151"], ["updated_at", "2019-05-15 16:00:06.768151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-05-15 16:00:06.780244"], ["updated_at", "2019-05-15 16:00:06.780244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 623], ["author_id", 250]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 16:00:06.786423"], ["updated_at", "2019-05-15 16:00:06.786423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 623], ["author_id", 251]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 623], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 623]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 623]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 623]]
  Rendered books/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 16:00:06.821503"], ["updated_at", "2019-05-15 16:00:06.821503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 16:00:06.825127"], ["updated_at", "2019-05-15 16:00:06.825127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 13ms (ActiveRecord: 2.6ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 5ms (Views: 3.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-05-15 16:00:06.867022"], ["updated_at", "2019-05-15 16:00:06.867022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 8ms (ActiveRecord: 1.3ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 624]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 624]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 624]]
  Rendered books/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 16:00:06.911050"], ["updated_at", "2019-05-15 16:00:06.911050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-05-15 16:00:06.913338"], ["updated_at", "2019-05-15 16:00:06.913338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 625], ["author_id", 254]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-05-15 16:00:06.918929"], ["updated_at", "2019-05-15 16:00:06.918929"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 625], ["author_id", 255]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 625], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 16ms (ActiveRecord: 3.5ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 625]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 625]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 625]]
  Rendered books/index.html.erb within layouts/application (6.1ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 1.6ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 16:00:06.936686"], ["updated_at", "2019-05-15 16:00:06.936686"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:06.940844"], ["updated_at", "2019-05-15 16:00:06.940844"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 626], ["author_id", 256]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 16:00:06.944240"], ["updated_at", "2019-05-15 16:00:06.944240"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 626], ["author_id", 257]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 626], ["created_at", "2019-05-15 16:00:06.947602"], ["updated_at", "2019-05-15 16:00:06.947602"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 626], ["created_at", "2019-05-15 16:00:06.949506"], ["updated_at", "2019-05-15 16:00:06.949506"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 626], ["created_at", "2019-05-15 16:00:06.951690"], ["updated_at", "2019-05-15 16:00:06.951690"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/626" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"626"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 626], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 626]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 626]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 626], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 626], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 626]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-05-15 16:00:06.974245"], ["updated_at", "2019-05-15 16:00:06.974245"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:06.978532"], ["updated_at", "2019-05-15 16:00:06.978532"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 627], ["author_id", 258]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-05-15 16:00:06.982116"], ["updated_at", "2019-05-15 16:00:06.982116"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 627], ["author_id", 259]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 627], ["created_at", "2019-05-15 16:00:06.986118"], ["updated_at", "2019-05-15 16:00:06.986118"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 627], ["created_at", "2019-05-15 16:00:06.987870"], ["updated_at", "2019-05-15 16:00:06.987870"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 627], ["created_at", "2019-05-15 16:00:06.989453"], ["updated_at", "2019-05-15 16:00:06.989453"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/627" for 127.0.0.1 at 2019-05-15 10:00:06 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"627"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 627], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 627]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 627]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 627], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 627], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 627]]
  Rendered books/show.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.4ms)
Completed 200 OK in 6ms (Views: 3.5ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 5ms (Views: 3.1ms | ActiveRecord: 1.1ms)
Started GET "/" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.035644"], ["updated_at", "2019-05-15 16:00:07.035644"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.039787"], ["updated_at", "2019-05-15 16:00:07.039787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.041917"], ["updated_at", "2019-05-15 16:00:07.041917"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 628], ["author_id", 260]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.045499"], ["updated_at", "2019-05-15 16:00:07.045499"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 629], ["author_id", 261]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 628], ["created_at", "2019-05-15 16:00:07.048890"], ["updated_at", "2019-05-15 16:00:07.048890"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 629], ["created_at", "2019-05-15 16:00:07.051076"], ["updated_at", "2019-05-15 16:00:07.051076"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/628" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"628"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 628], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 628]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 628]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 628], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 628], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 628]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 628], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 629], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 0.5ms)
Started DELETE "/reviews/914" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"914"}
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 914], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 914]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.6ms)
Started GET "/reviews" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.088652"], ["updated_at", "2019-05-15 16:00:07.088652"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.092770"], ["updated_at", "2019-05-15 16:00:07.092770"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 630], ["author_id", 262]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/630" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"630"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 630], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 630]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 630]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 630], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 630], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 630]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 1.1ms)
Started GET "/books/630/reviews/new" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"630"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 630], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (4.9ms)
Completed 200 OK in 10ms (Views: 6.4ms | ActiveRecord: 0.2ms)
Started POST "/books/630/reviews" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"630"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 630], ["LIMIT", 1]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 630], ["created_at", "2019-05-15 16:00:07.126877"], ["updated_at", "2019-05-15 16:00:07.126877"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/630
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
Started GET "/books/630" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"630"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 630], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 630]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 630]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 630], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 630], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 630]]
  Rendered books/show.html.erb within layouts/application (4.6ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.145037"], ["updated_at", "2019-05-15 16:00:07.145037"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.147149"], ["updated_at", "2019-05-15 16:00:07.147149"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 631], ["author_id", 263]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/631" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"631"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 631], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 631]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 631]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 631], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 631], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 631]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.9ms)
Started GET "/books/631/reviews/new" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"631"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 631], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.1ms)
Started POST "/books/631/reviews" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"631"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 631], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 631], ["created_at", "2019-05-15 16:00:07.171668"], ["updated_at", "2019-05-15 16:00:07.171668"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/631
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/631" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"631"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 631], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 631]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 631]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 631], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 631], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 631]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.1ms)
Started GET "/books/631/reviews/new" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"631"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 631], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.2ms)
Started POST "/books/631/reviews" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"631"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 631], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/631
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/books/631" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"631"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 631], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 631]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 631]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 631], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 631], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 631]]
  Rendered books/show.html.erb within layouts/application (4.4ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.205053"], ["updated_at", "2019-05-15 16:00:07.205053"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.209359"], ["updated_at", "2019-05-15 16:00:07.209359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.211951"], ["updated_at", "2019-05-15 16:00:07.211951"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 632], ["author_id", 264]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.215471"], ["updated_at", "2019-05-15 16:00:07.215471"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 633], ["author_id", 265]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 632], ["created_at", "2019-05-15 16:00:07.219705"], ["updated_at", "2019-05-15 16:00:07.219705"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 633], ["created_at", "2019-05-15 16:00:07.221760"], ["updated_at", "2019-05-15 16:00:07.221760"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 632], ["created_at", "2019-05-15 16:00:07.223475"], ["updated_at", "2019-05-15 16:00:07.223475"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/632" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"632"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 632], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 632]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 632]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 632], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 632], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 632]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 632], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 633], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.248185"], ["updated_at", "2019-05-15 16:00:07.248185"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.252538"], ["updated_at", "2019-05-15 16:00:07.252538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.254979"], ["updated_at", "2019-05-15 16:00:07.254979"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 634], ["author_id", 266]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.258668"], ["updated_at", "2019-05-15 16:00:07.258668"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 635], ["author_id", 267]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 634], ["created_at", "2019-05-15 16:00:07.262149"], ["updated_at", "2019-05-15 16:00:07.262149"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 635], ["created_at", "2019-05-15 16:00:07.263887"], ["updated_at", "2019-05-15 16:00:07.263887"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 634], ["created_at", "2019-05-15 16:00:07.265613"], ["updated_at", "2019-05-15 16:00:07.265613"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/634" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"634"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 634], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 634]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 634]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 634], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 634], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 634]]
  Rendered books/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 1.2ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 634], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 635], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.288083"], ["updated_at", "2019-05-15 16:00:07.288083"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.292349"], ["updated_at", "2019-05-15 16:00:07.292349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 636], ["created_at", "2019-05-13 16:00:07.293420"], ["updated_at", "2019-05-15 16:00:07.294599"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 637], ["created_at", "2019-05-12 16:00:07.295668"], ["updated_at", "2019-05-15 16:00:07.296653"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 636], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 637], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 636], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 637], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.314118"], ["updated_at", "2019-05-15 16:00:07.314118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.316396"], ["updated_at", "2019-05-15 16:00:07.316396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 638], ["created_at", "2019-05-13 16:00:07.317400"], ["updated_at", "2019-05-15 16:00:07.318639"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 639], ["created_at", "2019-05-12 16:00:07.319727"], ["updated_at", "2019-05-15 16:00:07.320613"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 638], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 639], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.4ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 639], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 638], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.6ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.338676"], ["updated_at", "2019-05-15 16:00:07.338676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.340996"], ["updated_at", "2019-05-15 16:00:07.340996"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 640], ["author_id", 268]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 640], ["created_at", "2019-05-15 16:00:07.344629"], ["updated_at", "2019-05-15 16:00:07.344629"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 640]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 640]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 640]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 640]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 640]]
  Rendered books/index.html.erb within layouts/application (7.9ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 1.8ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 640], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.9ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.0ms)
Started GET "/books/640" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"640"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 640], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 640]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 640]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 640], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 640], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 640]]
  Rendered books/show.html.erb within layouts/application (5.5ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.3ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 640], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.4ms)
Started GET "/authors/268" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"268"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 268], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 268]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 640], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 640], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 640], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 640], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 640], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 640]]
  Rendered authors/show.html.erb within layouts/application (5.7ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.8ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-05-15 10:00:07 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 640], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.496024"], ["updated_at", "2019-05-15 16:00:07.496024"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.499679"], ["updated_at", "2019-05-15 16:00:07.499679"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 641], ["author_id", 269]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 641], ["created_at", "2019-05-15 16:00:07.503917"], ["updated_at", "2019-05-15 16:00:07.503917"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 641], ["created_at", "2019-05-15 16:00:07.505708"], ["updated_at", "2019-05-15 16:00:07.505708"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 641]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.509817"], ["updated_at", "2019-05-15 16:00:07.509817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.512955"], ["updated_at", "2019-05-15 16:00:07.512955"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 642], ["author_id", 270]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 642], ["created_at", "2019-05-15 16:00:07.518383"], ["updated_at", "2019-05-15 16:00:07.518383"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 642], ["created_at", "2019-05-15 16:00:07.520183"], ["updated_at", "2019-05-15 16:00:07.520183"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 642]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.524378"], ["updated_at", "2019-05-15 16:00:07.524378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 643], ["created_at", "2019-05-15 16:00:07.526360"], ["updated_at", "2019-05-15 16:00:07.526360"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 643], ["created_at", "2019-05-15 16:00:07.528271"], ["updated_at", "2019-05-15 16:00:07.528271"], ["user", "Rob"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 643], ["created_at", "2019-05-15 16:00:07.531978"], ["updated_at", "2019-05-15 16:00:07.531978"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 643], ["created_at", "2019-05-15 16:00:07.533759"], ["updated_at", "2019-05-15 16:00:07.533759"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 643], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.538274"], ["updated_at", "2019-05-15 16:00:07.538274"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 644], ["created_at", "2019-05-15 16:00:07.540264"], ["updated_at", "2019-05-15 16:00:07.540264"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 644], ["created_at", "2019-05-15 16:00:07.541894"], ["updated_at", "2019-05-15 16:00:07.541894"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 644], ["created_at", "2019-05-15 16:00:07.543477"], ["updated_at", "2019-05-15 16:00:07.543477"], ["user", "Stella"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 644], ["created_at", "2019-05-15 16:00:07.545415"], ["updated_at", "2019-05-15 16:00:07.545415"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 644], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.552007"], ["updated_at", "2019-05-15 16:00:07.552007"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 645], ["created_at", "2019-05-15 16:00:07.554415"], ["updated_at", "2019-05-15 16:00:07.554415"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 645], ["created_at", "2019-05-15 16:00:07.556195"], ["updated_at", "2019-05-15 16:00:07.556195"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 645], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.560808"], ["updated_at", "2019-05-15 16:00:07.560808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.563286"], ["updated_at", "2019-05-15 16:00:07.563286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.567805"], ["updated_at", "2019-05-15 16:00:07.567805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.572940"], ["updated_at", "2019-05-15 16:00:07.572940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.575186"], ["updated_at", "2019-05-15 16:00:07.575186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.577418"], ["updated_at", "2019-05-15 16:00:07.577418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.583735"], ["updated_at", "2019-05-15 16:00:07.583735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.586237"], ["updated_at", "2019-05-15 16:00:07.586237"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 652], ["created_at", "2019-05-15 16:00:07.588516"], ["updated_at", "2019-05-15 16:00:07.588516"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 652], ["created_at", "2019-05-15 16:00:07.590440"], ["updated_at", "2019-05-15 16:00:07.590440"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 653], ["created_at", "2019-05-15 16:00:07.592689"], ["updated_at", "2019-05-15 16:00:07.592689"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (653, 652)[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.600398"], ["updated_at", "2019-05-15 16:00:07.600398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.602723"], ["updated_at", "2019-05-15 16:00:07.602723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 654], ["created_at", "2019-05-15 16:00:07.604769"], ["updated_at", "2019-05-15 16:00:07.604769"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 654], ["created_at", "2019-05-15 16:00:07.606434"], ["updated_at", "2019-05-15 16:00:07.606434"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 655], ["created_at", "2019-05-15 16:00:07.608361"], ["updated_at", "2019-05-15 16:00:07.608361"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (654, 655)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.615545"], ["updated_at", "2019-05-15 16:00:07.615545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.618423"], ["updated_at", "2019-05-15 16:00:07.618423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.620872"], ["updated_at", "2019-05-15 16:00:07.620872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.623317"], ["updated_at", "2019-05-15 16:00:07.623317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 656], ["created_at", "2019-05-15 16:00:07.625284"], ["updated_at", "2019-05-15 16:00:07.625284"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 657], ["created_at", "2019-05-15 16:00:07.627068"], ["updated_at", "2019-05-15 16:00:07.627068"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 658], ["created_at", "2019-05-15 16:00:07.629195"], ["updated_at", "2019-05-15 16:00:07.629195"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 659], ["created_at", "2019-05-15 16:00:07.632876"], ["updated_at", "2019-05-15 16:00:07.632876"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.638187"], ["updated_at", "2019-05-15 16:00:07.638187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.641100"], ["updated_at", "2019-05-15 16:00:07.641100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.643311"], ["updated_at", "2019-05-15 16:00:07.643311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.645710"], ["updated_at", "2019-05-15 16:00:07.645710"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 660], ["created_at", "2019-05-15 16:00:07.649543"], ["updated_at", "2019-05-15 16:00:07.649543"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 661], ["created_at", "2019-05-15 16:00:07.651802"], ["updated_at", "2019-05-15 16:00:07.651802"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 662], ["created_at", "2019-05-15 16:00:07.653705"], ["updated_at", "2019-05-15 16:00:07.653705"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 663], ["created_at", "2019-05-15 16:00:07.655703"], ["updated_at", "2019-05-15 16:00:07.655703"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.660514"], ["updated_at", "2019-05-15 16:00:07.660514"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.664923"], ["updated_at", "2019-05-15 16:00:07.664923"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.667590"], ["updated_at", "2019-05-15 16:00:07.667590"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.669746"], ["updated_at", "2019-05-15 16:00:07.669746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 664], ["created_at", "2019-05-15 16:00:07.671773"], ["updated_at", "2019-05-15 16:00:07.671773"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 665], ["created_at", "2019-05-15 16:00:07.673594"], ["updated_at", "2019-05-15 16:00:07.673594"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 666], ["created_at", "2019-05-15 16:00:07.675378"], ["updated_at", "2019-05-15 16:00:07.675378"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 667], ["created_at", "2019-05-15 16:00:07.677147"], ["updated_at", "2019-05-15 16:00:07.677147"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.681670"], ["updated_at", "2019-05-15 16:00:07.681670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.683987"], ["updated_at", "2019-05-15 16:00:07.683987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.687793"], ["updated_at", "2019-05-15 16:00:07.687793"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.690807"], ["updated_at", "2019-05-15 16:00:07.690807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 668], ["created_at", "2019-05-15 16:00:07.693033"], ["updated_at", "2019-05-15 16:00:07.693033"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 669], ["created_at", "2019-05-15 16:00:07.695651"], ["updated_at", "2019-05-15 16:00:07.695651"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 670], ["created_at", "2019-05-15 16:00:07.697981"], ["updated_at", "2019-05-15 16:00:07.697981"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 671], ["created_at", "2019-05-15 16:00:07.701527"], ["updated_at", "2019-05-15 16:00:07.701527"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.709708"], ["updated_at", "2019-05-15 16:00:07.709708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:07.712643"], ["updated_at", "2019-05-15 16:00:07.712643"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 672], ["author_id", 271]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 672], ["created_at", "2019-05-15 16:00:07.718201"], ["updated_at", "2019-05-15 16:00:07.718201"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.722387"], ["updated_at", "2019-05-15 16:00:07.722387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.724587"], ["updated_at", "2019-05-15 16:00:07.724587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.726527"], ["updated_at", "2019-05-15 16:00:07.726527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.729181"], ["updated_at", "2019-05-15 16:00:07.729181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 673], ["created_at", "2019-05-15 16:00:07.732566"], ["updated_at", "2019-05-15 16:00:07.732566"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 674], ["created_at", "2019-05-15 16:00:07.734862"], ["updated_at", "2019-05-15 16:00:07.734862"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 675], ["created_at", "2019-05-15 16:00:07.736948"], ["updated_at", "2019-05-15 16:00:07.736948"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 676], ["created_at", "2019-05-15 16:00:07.738979"], ["updated_at", "2019-05-15 16:00:07.738979"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 673], ["created_at", "2019-05-15 16:00:07.740768"], ["updated_at", "2019-05-15 16:00:07.740768"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 674], ["created_at", "2019-05-15 16:00:07.742488"], ["updated_at", "2019-05-15 16:00:07.742488"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 675], ["created_at", "2019-05-15 16:00:07.744062"], ["updated_at", "2019-05-15 16:00:07.744062"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 673], ["created_at", "2019-05-15 16:00:07.745751"], ["updated_at", "2019-05-15 16:00:07.745751"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 674], ["created_at", "2019-05-15 16:00:07.747417"], ["updated_at", "2019-05-15 16:00:07.747417"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 673], ["created_at", "2019-05-15 16:00:07.749095"], ["updated_at", "2019-05-15 16:00:07.749095"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.755955"], ["updated_at", "2019-05-15 16:00:07.755955"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 677], ["created_at", "2019-05-13 16:00:07.758589"], ["updated_at", "2019-05-15 16:00:07.760399"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 677], ["created_at", "2019-05-12 16:00:07.761559"], ["updated_at", "2019-05-15 16:00:07.762431"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 677], ["created_at", "2019-05-11 16:00:07.763346"], ["updated_at", "2019-05-15 16:00:07.764117"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:07.769148"], ["updated_at", "2019-05-15 16:00:07.769148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 678], ["created_at", "2019-05-13 16:00:07.772186"], ["updated_at", "2019-05-15 16:00:07.773706"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 678], ["created_at", "2019-05-12 16:00:07.774798"], ["updated_at", "2019-05-15 16:00:07.775620"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 678], ["created_at", "2019-05-11 16:00:07.776525"], ["updated_at", "2019-05-15 16:00:07.777458"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.512702"], ["updated_at", "2019-05-15 16:00:17.512702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:17.526007"], ["updated_at", "2019-05-15 16:00:17.526007"]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 679], ["author_id", 272]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 679], ["created_at", "2019-05-15 16:00:17.537582"], ["updated_at", "2019-05-15 16:00:17.537582"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 679], ["created_at", "2019-05-15 16:00:17.539726"], ["updated_at", "2019-05-15 16:00:17.539726"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 679]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.545795"], ["updated_at", "2019-05-15 16:00:17.545795"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:17.550143"], ["updated_at", "2019-05-15 16:00:17.550143"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 680], ["author_id", 273]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 680], ["created_at", "2019-05-15 16:00:17.553869"], ["updated_at", "2019-05-15 16:00:17.553869"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 680], ["created_at", "2019-05-15 16:00:17.555762"], ["updated_at", "2019-05-15 16:00:17.555762"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 680]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.561654"], ["updated_at", "2019-05-15 16:00:17.561654"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 681], ["created_at", "2019-05-15 16:00:17.565753"], ["updated_at", "2019-05-15 16:00:17.565753"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 681], ["created_at", "2019-05-15 16:00:17.567743"], ["updated_at", "2019-05-15 16:00:17.567743"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 681], ["created_at", "2019-05-15 16:00:17.569434"], ["updated_at", "2019-05-15 16:00:17.569434"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 681], ["created_at", "2019-05-15 16:00:17.571128"], ["updated_at", "2019-05-15 16:00:17.571128"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 681], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.578869"], ["updated_at", "2019-05-15 16:00:17.578869"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 682], ["created_at", "2019-05-15 16:00:17.596747"], ["updated_at", "2019-05-15 16:00:17.596747"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 682], ["created_at", "2019-05-15 16:00:17.599107"], ["updated_at", "2019-05-15 16:00:17.599107"], ["user", "Rob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 682], ["created_at", "2019-05-15 16:00:17.601016"], ["updated_at", "2019-05-15 16:00:17.601016"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 682], ["created_at", "2019-05-15 16:00:17.602854"], ["updated_at", "2019-05-15 16:00:17.602854"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 682], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.608599"], ["updated_at", "2019-05-15 16:00:17.608599"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 683], ["created_at", "2019-05-15 16:00:17.611816"], ["updated_at", "2019-05-15 16:00:17.611816"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 683], ["created_at", "2019-05-15 16:00:17.613716"], ["updated_at", "2019-05-15 16:00:17.613716"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 683], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.617676"], ["updated_at", "2019-05-15 16:00:17.617676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.620033"], ["updated_at", "2019-05-15 16:00:17.620033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.624464"], ["updated_at", "2019-05-15 16:00:17.624464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.629121"], ["updated_at", "2019-05-15 16:00:17.629121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.631262"], ["updated_at", "2019-05-15 16:00:17.631262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.633165"], ["updated_at", "2019-05-15 16:00:17.633165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.637020"], ["updated_at", "2019-05-15 16:00:17.637020"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.641261"], ["updated_at", "2019-05-15 16:00:17.641261"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 690], ["created_at", "2019-05-15 16:00:17.643847"], ["updated_at", "2019-05-15 16:00:17.643847"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 690], ["created_at", "2019-05-15 16:00:17.645651"], ["updated_at", "2019-05-15 16:00:17.645651"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 691], ["created_at", "2019-05-15 16:00:17.647610"], ["updated_at", "2019-05-15 16:00:17.647610"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (691, 690)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.658322"], ["updated_at", "2019-05-15 16:00:17.658322"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.662725"], ["updated_at", "2019-05-15 16:00:17.662725"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 692], ["created_at", "2019-05-15 16:00:17.664865"], ["updated_at", "2019-05-15 16:00:17.664865"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 692], ["created_at", "2019-05-15 16:00:17.666517"], ["updated_at", "2019-05-15 16:00:17.666517"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 693], ["created_at", "2019-05-15 16:00:17.668394"], ["updated_at", "2019-05-15 16:00:17.668394"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (692, 693)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.673873"], ["updated_at", "2019-05-15 16:00:17.673873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.679132"], ["updated_at", "2019-05-15 16:00:17.679132"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.681693"], ["updated_at", "2019-05-15 16:00:17.681693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.684012"], ["updated_at", "2019-05-15 16:00:17.684012"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 694], ["created_at", "2019-05-15 16:00:17.686027"], ["updated_at", "2019-05-15 16:00:17.686027"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 695], ["created_at", "2019-05-15 16:00:17.688222"], ["updated_at", "2019-05-15 16:00:17.688222"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 696], ["created_at", "2019-05-15 16:00:17.690176"], ["updated_at", "2019-05-15 16:00:17.690176"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 697], ["created_at", "2019-05-15 16:00:17.692049"], ["updated_at", "2019-05-15 16:00:17.692049"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.697451"], ["updated_at", "2019-05-15 16:00:17.697451"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.701612"], ["updated_at", "2019-05-15 16:00:17.701612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.703839"], ["updated_at", "2019-05-15 16:00:17.703839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.705960"], ["updated_at", "2019-05-15 16:00:17.705960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 698], ["created_at", "2019-05-15 16:00:17.707859"], ["updated_at", "2019-05-15 16:00:17.707859"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 699], ["created_at", "2019-05-15 16:00:17.710083"], ["updated_at", "2019-05-15 16:00:17.710083"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 700], ["created_at", "2019-05-15 16:00:17.712002"], ["updated_at", "2019-05-15 16:00:17.712002"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 701], ["created_at", "2019-05-15 16:00:17.714006"], ["updated_at", "2019-05-15 16:00:17.714006"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.718682"], ["updated_at", "2019-05-15 16:00:17.718682"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.723066"], ["updated_at", "2019-05-15 16:00:17.723066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.725329"], ["updated_at", "2019-05-15 16:00:17.725329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.727827"], ["updated_at", "2019-05-15 16:00:17.727827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 702], ["created_at", "2019-05-15 16:00:17.729982"], ["updated_at", "2019-05-15 16:00:17.729982"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 703], ["created_at", "2019-05-15 16:00:17.731962"], ["updated_at", "2019-05-15 16:00:17.731962"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 704], ["created_at", "2019-05-15 16:00:17.733772"], ["updated_at", "2019-05-15 16:00:17.733772"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 705], ["created_at", "2019-05-15 16:00:17.735685"], ["updated_at", "2019-05-15 16:00:17.735685"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.740334"], ["updated_at", "2019-05-15 16:00:17.740334"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.744722"], ["updated_at", "2019-05-15 16:00:17.744722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.746964"], ["updated_at", "2019-05-15 16:00:17.746964"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.748940"], ["updated_at", "2019-05-15 16:00:17.748940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 706], ["created_at", "2019-05-15 16:00:17.750993"], ["updated_at", "2019-05-15 16:00:17.750993"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 707], ["created_at", "2019-05-15 16:00:17.752840"], ["updated_at", "2019-05-15 16:00:17.752840"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 708], ["created_at", "2019-05-15 16:00:17.754643"], ["updated_at", "2019-05-15 16:00:17.754643"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 709], ["created_at", "2019-05-15 16:00:17.756547"], ["updated_at", "2019-05-15 16:00:17.756547"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.767006"], ["updated_at", "2019-05-15 16:00:17.767006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-05-15 16:00:17.769272"], ["updated_at", "2019-05-15 16:00:17.769272"]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 710], ["author_id", 274]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 710], ["created_at", "2019-05-15 16:00:17.775157"], ["updated_at", "2019-05-15 16:00:17.775157"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.779805"], ["updated_at", "2019-05-15 16:00:17.779805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.782097"], ["updated_at", "2019-05-15 16:00:17.782097"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.784022"], ["updated_at", "2019-05-15 16:00:17.784022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.785905"], ["updated_at", "2019-05-15 16:00:17.785905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 711], ["created_at", "2019-05-15 16:00:17.788727"], ["updated_at", "2019-05-15 16:00:17.788727"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 712], ["created_at", "2019-05-15 16:00:17.792687"], ["updated_at", "2019-05-15 16:00:17.792687"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 713], ["created_at", "2019-05-15 16:00:17.795072"], ["updated_at", "2019-05-15 16:00:17.795072"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 714], ["created_at", "2019-05-15 16:00:17.796969"], ["updated_at", "2019-05-15 16:00:17.796969"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 711], ["created_at", "2019-05-15 16:00:17.798636"], ["updated_at", "2019-05-15 16:00:17.798636"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 712], ["created_at", "2019-05-15 16:00:17.800413"], ["updated_at", "2019-05-15 16:00:17.800413"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 713], ["created_at", "2019-05-15 16:00:17.802230"], ["updated_at", "2019-05-15 16:00:17.802230"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 711], ["created_at", "2019-05-15 16:00:17.804119"], ["updated_at", "2019-05-15 16:00:17.804119"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 712], ["created_at", "2019-05-15 16:00:17.805925"], ["updated_at", "2019-05-15 16:00:17.805925"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 711], ["created_at", "2019-05-15 16:00:17.808068"], ["updated_at", "2019-05-15 16:00:17.808068"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.816143"], ["updated_at", "2019-05-15 16:00:17.816143"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 715], ["created_at", "2019-05-13 16:00:17.819155"], ["updated_at", "2019-05-15 16:00:17.820633"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 715], ["created_at", "2019-05-12 16:00:17.821726"], ["updated_at", "2019-05-15 16:00:17.822557"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 715], ["created_at", "2019-05-11 16:00:17.823488"], ["updated_at", "2019-05-15 16:00:17.824265"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-05-15 16:00:17.829353"], ["updated_at", "2019-05-15 16:00:17.829353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 716], ["created_at", "2019-05-13 16:00:17.832309"], ["updated_at", "2019-05-15 16:00:17.833761"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 716], ["created_at", "2019-05-12 16:00:17.834889"], ["updated_at", "2019-05-15 16:00:17.835760"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 716], ["created_at", "2019-05-11 16:00:17.836707"], ["updated_at", "2019-05-15 16:00:17.837552"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (198.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "bookclub_test"[0m
  [1m[35m (476.9ms)[0m  [1m[35mCREATE DATABASE "bookclub_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (1.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "authors" CASCADE[0m
  [1m[35m (9.2ms)[0m  [1m[35mCREATE TABLE "authors" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "book_authors" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "book_authors" ("id" bigserial primary key, "book_id" bigint, "author_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_book_authors_on_author_id" ON "book_authors"  ("author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_book_authors_on_book_id" ON "book_authors"  ("book_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "books" CASCADE[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "books" ("id" bigserial primary key, "title" character varying, "pages" integer, "pub_year" integer, "thumb_url" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "score" integer, "heading" character varying, "full_review" text, "book_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user" character varying)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_book_id" ON "reviews"  ("book_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "book_authors" ADD CONSTRAINT "fk_rails_0c0759568d"
FOREIGN KEY ("author_id")
  REFERENCES "authors" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "book_authors" ADD CONSTRAINT "fk_rails_b23f3934c1"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190509215220)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190507174304),
(20190507173936),
(20190507174149),
(20190507174053);

[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-06-22 17:50:10.573934"], ["updated_at", "2019-06-22 17:50:10.573934"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-06-22 17:50:10.723673"], ["updated_at", "2019-06-22 17:50:10.723673"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-06-22 17:50:10.766944"], ["updated_at", "2019-06-22 17:50:10.766944"]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 1], ["author_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-06-22 17:50:10.779916"], ["updated_at", "2019-06-22 17:50:10.779916"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 2], ["author_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:10 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 2]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 2]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 2]]
  Rendered books/index.html.erb within layouts/application (27.3ms)
Completed 200 OK in 39ms (Views: 32.1ms | ActiveRecord: 4.3ms)
Started GET "/authors/1" for 127.0.0.1 at 2019-06-22 11:50:10 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 1], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 1]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 2], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 2]]
  Rendered authors/show.html.erb within layouts/application (8.1ms)
Completed 200 OK in 14ms (Views: 9.6ms | ActiveRecord: 1.5ms)
Started GET "/books/1" for 127.0.0.1 at 2019-06-22 11:50:10 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 1], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 1], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 1]]
  Rendered books/show.html.erb within layouts/application (6.0ms)
Completed 200 OK in 10ms (Views: 5.7ms | ActiveRecord: 1.2ms)
Started GET "/authors/1" for 127.0.0.1 at 2019-06-22 11:50:10 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 1], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 2], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 2]]
  Rendered authors/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:10.893685"], ["updated_at", "2019-06-22 17:50:10.893685"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:10.896155"], ["updated_at", "2019-06-22 17:50:10.896155"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 3], ["author_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:10.900683"], ["updated_at", "2019-06-22 17:50:10.900683"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 4], ["author_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 3], ["created_at", "2019-06-22 17:50:10.911890"], ["updated_at", "2019-06-22 17:50:10.911890"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/2" for 127.0.0.1 at 2019-06-22 11:50:10 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 2]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 3], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 4], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 4]]
  Rendered authors/show.html.erb within layouts/application (7.7ms)
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-06-22 17:50:10.933982"], ["updated_at", "2019-06-22 17:50:10.933982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-06-22 17:50:10.936822"], ["updated_at", "2019-06-22 17:50:10.936822"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 5], ["author_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-06-22 17:50:10.941729"], ["updated_at", "2019-06-22 17:50:10.941729"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 5], ["author_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-06-22 17:50:10.948300"], ["updated_at", "2019-06-22 17:50:10.948300"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 6], ["author_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/3" for 127.0.0.1 at 2019-06-22 11:50:10 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 5], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 5]]
  Rendered authors/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.8ms)
Started DELETE "/authors/3" for 127.0.0.1 at 2019-06-22 11:50:10 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"3"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 5[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 5]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 5]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 2.9ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:10 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 6]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 6]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 6]]
  Rendered books/index.html.erb within layouts/application (8.2ms)
Completed 200 OK in 10ms (Views: 7.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:11.009379"], ["updated_at", "2019-06-22 17:50:11.009379"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:11.012721"], ["updated_at", "2019-06-22 17:50:11.012721"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 7], ["author_id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:11.022848"], ["updated_at", "2019-06-22 17:50:11.022848"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 7], ["author_id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:11.026905"], ["updated_at", "2019-06-22 17:50:11.026905"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 8], ["author_id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 17:50:11.030803"], ["updated_at", "2019-06-22 17:50:11.030803"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 9], ["author_id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/5" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 5]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 7], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 7]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 8], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 8]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 9], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 9]]
  Rendered authors/show.html.erb within layouts/application (7.2ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:11.055143"], ["updated_at", "2019-06-22 17:50:11.055143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:11.057678"], ["updated_at", "2019-06-22 17:50:11.057678"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 10], ["author_id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:11.061675"], ["updated_at", "2019-06-22 17:50:11.061675"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 10], ["author_id", 8]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:11.066750"], ["updated_at", "2019-06-22 17:50:11.066750"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 11], ["author_id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 17:50:11.071613"], ["updated_at", "2019-06-22 17:50:11.071613"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 12], ["author_id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/7" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 7]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 10], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 10]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 11], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 11]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 12], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 12]]
  Rendered authors/show.html.erb within layouts/application (8.9ms)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.093295"], ["updated_at", "2019-06-22 17:50:11.093295"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 13], ["created_at", "2019-06-22 17:50:11.096306"], ["updated_at", "2019-06-22 17:50:11.096306"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 13], ["created_at", "2019-06-22 17:50:11.098456"], ["updated_at", "2019-06-22 17:50:11.098456"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 13], ["created_at", "2019-06-22 17:50:11.100137"], ["updated_at", "2019-06-22 17:50:11.100137"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 13], ["created_at", "2019-06-22 17:50:11.102300"], ["updated_at", "2019-06-22 17:50:11.102300"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 13]]
  Rendered books/index.html.erb within layouts/application (10.7ms)
Completed 200 OK in 12ms (Views: 9.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 13]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.124839"], ["updated_at", "2019-06-22 17:50:11.124839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.127726"], ["updated_at", "2019-06-22 17:50:11.127726"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.130511"], ["updated_at", "2019-06-22 17:50:11.130511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.132922"], ["updated_at", "2019-06-22 17:50:11.132922"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 14], ["created_at", "2019-06-22 17:50:11.135593"], ["updated_at", "2019-06-22 17:50:11.135593"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 15], ["created_at", "2019-06-22 17:50:11.137870"], ["updated_at", "2019-06-22 17:50:11.137870"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 16], ["created_at", "2019-06-22 17:50:11.139988"], ["updated_at", "2019-06-22 17:50:11.139988"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 17], ["created_at", "2019-06-22 17:50:11.142120"], ["updated_at", "2019-06-22 17:50:11.142120"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 14], ["created_at", "2019-06-22 17:50:11.144348"], ["updated_at", "2019-06-22 17:50:11.144348"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 15], ["created_at", "2019-06-22 17:50:11.146490"], ["updated_at", "2019-06-22 17:50:11.146490"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 16], ["created_at", "2019-06-22 17:50:11.148441"], ["updated_at", "2019-06-22 17:50:11.148441"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 14], ["created_at", "2019-06-22 17:50:11.150372"], ["updated_at", "2019-06-22 17:50:11.150372"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 15], ["created_at", "2019-06-22 17:50:11.152459"], ["updated_at", "2019-06-22 17:50:11.152459"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 14], ["created_at", "2019-06-22 17:50:11.154377"], ["updated_at", "2019-06-22 17:50:11.154377"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 17]]
  Rendered books/index.html.erb within layouts/application (21.1ms)
Completed 200 OK in 22ms (Views: 17.8ms | ActiveRecord: 4.2ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 14]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 14]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 15]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 15]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 16]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 16]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 17]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 17]]
  Rendered books/index.html.erb within layouts/application (21.0ms)
Completed 200 OK in 23ms (Views: 17.8ms | ActiveRecord: 4.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.209070"], ["updated_at", "2019-06-22 17:50:11.209070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.211483"], ["updated_at", "2019-06-22 17:50:11.211483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.213688"], ["updated_at", "2019-06-22 17:50:11.213688"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.215775"], ["updated_at", "2019-06-22 17:50:11.215775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 18], ["created_at", "2019-06-22 17:50:11.217694"], ["updated_at", "2019-06-22 17:50:11.217694"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 19], ["created_at", "2019-06-22 17:50:11.219525"], ["updated_at", "2019-06-22 17:50:11.219525"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 20], ["created_at", "2019-06-22 17:50:11.221263"], ["updated_at", "2019-06-22 17:50:11.221263"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 21], ["created_at", "2019-06-22 17:50:11.223015"], ["updated_at", "2019-06-22 17:50:11.223015"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 18], ["created_at", "2019-06-22 17:50:11.224568"], ["updated_at", "2019-06-22 17:50:11.224568"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 19], ["created_at", "2019-06-22 17:50:11.226150"], ["updated_at", "2019-06-22 17:50:11.226150"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 20], ["created_at", "2019-06-22 17:50:11.227716"], ["updated_at", "2019-06-22 17:50:11.227716"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 18], ["created_at", "2019-06-22 17:50:11.229289"], ["updated_at", "2019-06-22 17:50:11.229289"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 19], ["created_at", "2019-06-22 17:50:11.230833"], ["updated_at", "2019-06-22 17:50:11.230833"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 18], ["created_at", "2019-06-22 17:50:11.232430"], ["updated_at", "2019-06-22 17:50:11.232430"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 18]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 21]]
  Rendered books/index.html.erb within layouts/application (20.1ms)
Completed 200 OK in 21ms (Views: 16.5ms | ActiveRecord: 4.2ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 21]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 21]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 20]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 20]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 19]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 19]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 18]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 18]]
  Rendered books/index.html.erb within layouts/application (19.3ms)
Completed 200 OK in 20ms (Views: 15.7ms | ActiveRecord: 4.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.283961"], ["updated_at", "2019-06-22 17:50:11.283961"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.286250"], ["updated_at", "2019-06-22 17:50:11.286250"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.288471"], ["updated_at", "2019-06-22 17:50:11.288471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.290603"], ["updated_at", "2019-06-22 17:50:11.290603"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 22], ["created_at", "2019-06-22 17:50:11.292598"], ["updated_at", "2019-06-22 17:50:11.292598"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 23], ["created_at", "2019-06-22 17:50:11.294571"], ["updated_at", "2019-06-22 17:50:11.294571"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 24], ["created_at", "2019-06-22 17:50:11.296656"], ["updated_at", "2019-06-22 17:50:11.296656"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 25], ["created_at", "2019-06-22 17:50:11.298926"], ["updated_at", "2019-06-22 17:50:11.298926"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 22], ["created_at", "2019-06-22 17:50:11.300688"], ["updated_at", "2019-06-22 17:50:11.300688"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 23], ["created_at", "2019-06-22 17:50:11.302379"], ["updated_at", "2019-06-22 17:50:11.302379"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 24], ["created_at", "2019-06-22 17:50:11.304130"], ["updated_at", "2019-06-22 17:50:11.304130"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 22], ["created_at", "2019-06-22 17:50:11.306108"], ["updated_at", "2019-06-22 17:50:11.306108"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 23], ["created_at", "2019-06-22 17:50:11.307818"], ["updated_at", "2019-06-22 17:50:11.307818"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 22], ["created_at", "2019-06-22 17:50:11.309691"], ["updated_at", "2019-06-22 17:50:11.309691"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 25]]
  Rendered books/index.html.erb within layouts/application (20.3ms)
Completed 200 OK in 21ms (Views: 16.4ms | ActiveRecord: 4.6ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 25]]
  Rendered books/index.html.erb within layouts/application (18.4ms)
Completed 200 OK in 20ms (Views: 15.3ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 25]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 25]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 24]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 24]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 23]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 23]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 22]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 22]]
  Rendered books/index.html.erb within layouts/application (32.8ms)
Completed 200 OK in 34ms (Views: 29.1ms | ActiveRecord: 4.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.397718"], ["updated_at", "2019-06-22 17:50:11.397718"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.399929"], ["updated_at", "2019-06-22 17:50:11.399929"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.402097"], ["updated_at", "2019-06-22 17:50:11.402097"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.404195"], ["updated_at", "2019-06-22 17:50:11.404195"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 26], ["created_at", "2019-06-22 17:50:11.406247"], ["updated_at", "2019-06-22 17:50:11.406247"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 27], ["created_at", "2019-06-22 17:50:11.408586"], ["updated_at", "2019-06-22 17:50:11.408586"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 28], ["created_at", "2019-06-22 17:50:11.410876"], ["updated_at", "2019-06-22 17:50:11.410876"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 29], ["created_at", "2019-06-22 17:50:11.412997"], ["updated_at", "2019-06-22 17:50:11.412997"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 26], ["created_at", "2019-06-22 17:50:11.414725"], ["updated_at", "2019-06-22 17:50:11.414725"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 27], ["created_at", "2019-06-22 17:50:11.416631"], ["updated_at", "2019-06-22 17:50:11.416631"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 28], ["created_at", "2019-06-22 17:50:11.420445"], ["updated_at", "2019-06-22 17:50:11.420445"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 26], ["created_at", "2019-06-22 17:50:11.422021"], ["updated_at", "2019-06-22 17:50:11.422021"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 27], ["created_at", "2019-06-22 17:50:11.423556"], ["updated_at", "2019-06-22 17:50:11.423556"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 26], ["created_at", "2019-06-22 17:50:11.425087"], ["updated_at", "2019-06-22 17:50:11.425087"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 29]]
  Rendered books/index.html.erb within layouts/application (18.0ms)
Completed 200 OK in 19ms (Views: 15.0ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (26, 27, 28, 29)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 29]]
  Rendered books/index.html.erb within layouts/application (16.9ms)
Completed 200 OK in 20ms (Views: 14.1ms | ActiveRecord: 4.1ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (29, 28, 27, 26)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 29]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 29]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 28]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 28]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 27]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 27]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 26]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 26]]
  Rendered books/index.html.erb within layouts/application (16.6ms)
Completed 200 OK in 20ms (Views: 13.8ms | ActiveRecord: 4.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.496180"], ["updated_at", "2019-06-22 17:50:11.496180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.498579"], ["updated_at", "2019-06-22 17:50:11.498579"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.500474"], ["updated_at", "2019-06-22 17:50:11.500474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.502382"], ["updated_at", "2019-06-22 17:50:11.502382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 30], ["created_at", "2019-06-22 17:50:11.504261"], ["updated_at", "2019-06-22 17:50:11.504261"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 31], ["created_at", "2019-06-22 17:50:11.506211"], ["updated_at", "2019-06-22 17:50:11.506211"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 32], ["created_at", "2019-06-22 17:50:11.508109"], ["updated_at", "2019-06-22 17:50:11.508109"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 33], ["created_at", "2019-06-22 17:50:11.510050"], ["updated_at", "2019-06-22 17:50:11.510050"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 30], ["created_at", "2019-06-22 17:50:11.512298"], ["updated_at", "2019-06-22 17:50:11.512298"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 31], ["created_at", "2019-06-22 17:50:11.514120"], ["updated_at", "2019-06-22 17:50:11.514120"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 32], ["created_at", "2019-06-22 17:50:11.515864"], ["updated_at", "2019-06-22 17:50:11.515864"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 30], ["created_at", "2019-06-22 17:50:11.517511"], ["updated_at", "2019-06-22 17:50:11.517511"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 31], ["created_at", "2019-06-22 17:50:11.519204"], ["updated_at", "2019-06-22 17:50:11.519204"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 30], ["created_at", "2019-06-22 17:50:11.520721"], ["updated_at", "2019-06-22 17:50:11.520721"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 30]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 33]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 30]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 30]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 30]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 31]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 32]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 33]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 33]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 33]]
  Rendered books/index.html.erb within layouts/application (17.0ms)
Completed 200 OK in 18ms (Views: 14.1ms | ActiveRecord: 3.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 30]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 31]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 32]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.551555"], ["updated_at", "2019-06-22 17:50:11.551555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:11.553832"], ["updated_at", "2019-06-22 17:50:11.553832"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 34], ["author_id", 9]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 34], ["created_at", "2019-06-22 17:50:11.557276"], ["updated_at", "2019-06-22 17:50:11.557276"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 34], ["created_at", "2019-06-22 17:50:11.559120"], ["updated_at", "2019-06-22 17:50:11.559120"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 34], ["created_at", "2019-06-22 17:50:11.560863"], ["updated_at", "2019-06-22 17:50:11.560863"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 34], ["created_at", "2019-06-22 17:50:11.562735"], ["updated_at", "2019-06-22 17:50:11.562735"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/34" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"34"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 34]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 34]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 34], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 34], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 34]]
  Rendered books/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.579465"], ["updated_at", "2019-06-22 17:50:11.579465"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:11.581691"], ["updated_at", "2019-06-22 17:50:11.581691"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 35], ["author_id", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 35], ["created_at", "2019-06-22 17:50:11.585300"], ["updated_at", "2019-06-22 17:50:11.585300"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 35], ["created_at", "2019-06-22 17:50:11.587049"], ["updated_at", "2019-06-22 17:50:11.587049"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 35], ["created_at", "2019-06-22 17:50:11.588586"], ["updated_at", "2019-06-22 17:50:11.588586"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 35], ["created_at", "2019-06-22 17:50:11.590166"], ["updated_at", "2019-06-22 17:50:11.590166"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/35" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"35"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 35]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 35]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 35], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 35], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 35]]
  Rendered books/show.html.erb within layouts/application (5.7ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.606247"], ["updated_at", "2019-06-22 17:50:11.606247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:11.608332"], ["updated_at", "2019-06-22 17:50:11.608332"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 36], ["author_id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 36], ["created_at", "2019-06-22 17:50:11.612255"], ["updated_at", "2019-06-22 17:50:11.612255"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 36], ["created_at", "2019-06-22 17:50:11.614021"], ["updated_at", "2019-06-22 17:50:11.614021"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 36], ["created_at", "2019-06-22 17:50:11.615611"], ["updated_at", "2019-06-22 17:50:11.615611"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 36], ["created_at", "2019-06-22 17:50:11.617237"], ["updated_at", "2019-06-22 17:50:11.617237"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/36" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"36"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 36]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 36]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 36], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 36], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 36]]
  Rendered books/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 36]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-06-22 17:50:11.630938"], ["updated_at", "2019-06-22 17:50:11.630938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/37" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"37"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 37]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 37]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 37], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 37], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 37]]
  Rendered books/show.html.erb within layouts/application (3.6ms)
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 1.0ms)
Started DELETE "/books/37" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"37"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 37]]
  [1m[36mBookAuthor Load (0.1ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 37]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 37]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 3ms (ActiveRecord: 0.9ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.654032"], ["updated_at", "2019-06-22 17:50:11.654032"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.656294"], ["updated_at", "2019-06-22 17:50:11.656294"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:11.658674"], ["updated_at", "2019-06-22 17:50:11.658674"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 38], ["author_id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:11.661917"], ["updated_at", "2019-06-22 17:50:11.661917"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 38], ["author_id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 17:50:11.665304"], ["updated_at", "2019-06-22 17:50:11.665304"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 39], ["author_id", 14]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 38]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 38]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 38]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 39]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 39]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 39]]
  Rendered books/index.html.erb within layouts/application (8.3ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.685909"], ["updated_at", "2019-06-22 17:50:11.685909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:11.688436"], ["updated_at", "2019-06-22 17:50:11.688436"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:11.690546"], ["updated_at", "2019-06-22 17:50:11.690546"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 40], ["author_id", 15]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:11.693719"], ["updated_at", "2019-06-22 17:50:11.693719"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 40], ["author_id", 16]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 17:50:11.697428"], ["updated_at", "2019-06-22 17:50:11.697428"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 41], ["author_id", 17]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 40]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 40]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 40]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 41]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 41]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 41]]
  Rendered books/index.html.erb within layouts/application (9.1ms)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 2.4ms)
Started GET "/books/40" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"40"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 40]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 40]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 40], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 40], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 40]]
  Rendered books/show.html.erb within layouts/application (3.9ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.9ms)
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (19.8ms)
Completed 200 OK in 24ms (Views: 20.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-06-22 17:50:11.762004"], ["updated_at", "2019-06-22 17:50:11.762004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:11.771628"], ["updated_at", "2019-06-22 17:50:11.771628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:11.773976"], ["updated_at", "2019-06-22 17:50:11.773976"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 42], ["author_id", 19]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 42], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.3ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 42]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 42]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 42]]
  Rendered books/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 1.5ms)
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 42], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:11.806705"], ["updated_at", "2019-06-22 17:50:11.806705"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:11.808900"], ["updated_at", "2019-06-22 17:50:11.808900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 43], ["author_id", 20]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:11.813721"], ["updated_at", "2019-06-22 17:50:11.813721"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 43], ["author_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 43], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 43]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 43]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 43]]
  Rendered books/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.5ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 43]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:11.833952"], ["updated_at", "2019-06-22 17:50:11.833952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:11.845594"], ["updated_at", "2019-06-22 17:50:11.845594"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 44], ["author_id", 22]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:11.851550"], ["updated_at", "2019-06-22 17:50:11.851550"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 44], ["author_id", 23]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 44], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 2.9ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 44]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 44]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 44]]
  Rendered books/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:11.882614"], ["updated_at", "2019-06-22 17:50:11.882614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:11.886281"], ["updated_at", "2019-06-22 17:50:11.886281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 13ms (ActiveRecord: 2.3ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-06-22 17:50:11.927701"], ["updated_at", "2019-06-22 17:50:11.927701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 45]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 45]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 45]]
  Rendered books/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:11.968614"], ["updated_at", "2019-06-22 17:50:11.968614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:11.970660"], ["updated_at", "2019-06-22 17:50:11.970660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 46], ["author_id", 26]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:11.974928"], ["updated_at", "2019-06-22 17:50:11.974928"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 46], ["author_id", 27]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 46], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 3.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:11 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 46]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 46]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 46]]
  Rendered books/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.5ms)
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:11.991206"], ["updated_at", "2019-06-22 17:50:11.991206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:11.993256"], ["updated_at", "2019-06-22 17:50:11.993256"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 47], ["author_id", 28]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:11.996714"], ["updated_at", "2019-06-22 17:50:11.996714"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 47], ["author_id", 29]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 47], ["created_at", "2019-06-22 17:50:12.000382"], ["updated_at", "2019-06-22 17:50:12.000382"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 47], ["created_at", "2019-06-22 17:50:12.002477"], ["updated_at", "2019-06-22 17:50:12.002477"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 47], ["created_at", "2019-06-22 17:50:12.004469"], ["updated_at", "2019-06-22 17:50:12.004469"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/47" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"47"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 47]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 47]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 47], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 47], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 47]]
  Rendered books/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:12.025901"], ["updated_at", "2019-06-22 17:50:12.025901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.028236"], ["updated_at", "2019-06-22 17:50:12.028236"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 48], ["author_id", 30]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:12.032041"], ["updated_at", "2019-06-22 17:50:12.032041"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 48], ["author_id", 31]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 48], ["created_at", "2019-06-22 17:50:12.035658"], ["updated_at", "2019-06-22 17:50:12.035658"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 48], ["created_at", "2019-06-22 17:50:12.037572"], ["updated_at", "2019-06-22 17:50:12.037572"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 48], ["created_at", "2019-06-22 17:50:12.039166"], ["updated_at", "2019-06-22 17:50:12.039166"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/48" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"48"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 48]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 48]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 48], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 48], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 48]]
  Rendered books/show.html.erb within layouts/application (6.0ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.4ms)
Completed 200 OK in 5ms (Views: 3.1ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 1.0ms)
Started GET "/" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.080181"], ["updated_at", "2019-06-22 17:50:12.080181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.082489"], ["updated_at", "2019-06-22 17:50:12.082489"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.084634"], ["updated_at", "2019-06-22 17:50:12.084634"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 49], ["author_id", 32]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.088250"], ["updated_at", "2019-06-22 17:50:12.088250"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 50], ["author_id", 33]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 49], ["created_at", "2019-06-22 17:50:12.091668"], ["updated_at", "2019-06-22 17:50:12.091668"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 50], ["created_at", "2019-06-22 17:50:12.093493"], ["updated_at", "2019-06-22 17:50:12.093493"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/49" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"49"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 49]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 49]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 49], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 49], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 49]]
  Rendered books/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.2ms)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.5ms)
Started DELETE "/reviews/74" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"74"}
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 74]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.7ms)
Started GET "/reviews" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.132891"], ["updated_at", "2019-06-22 17:50:12.132891"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.135308"], ["updated_at", "2019-06-22 17:50:12.135308"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 51], ["author_id", 34]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/51" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"51"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 51]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 51]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 51], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 51], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 51]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.9ms)
Started GET "/books/51/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"51"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 10ms (Views: 6.9ms | ActiveRecord: 0.2ms)
Started POST "/books/51/reviews" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"51"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 51], ["created_at", "2019-06-22 17:50:12.168129"], ["updated_at", "2019-06-22 17:50:12.168129"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/51
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
Started GET "/books/51" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"51"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 51]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 51]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 51], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 51], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 51]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.185343"], ["updated_at", "2019-06-22 17:50:12.185343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.187995"], ["updated_at", "2019-06-22 17:50:12.187995"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 52], ["author_id", 35]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/52" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"52"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 52]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 52]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 52], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 52], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 52]]
  Rendered books/show.html.erb within layouts/application (4.0ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 1.0ms)
Started GET "/books/52/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"52"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.1ms)
Started POST "/books/52/reviews" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"52"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 52], ["created_at", "2019-06-22 17:50:12.210016"], ["updated_at", "2019-06-22 17:50:12.210016"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/52
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/52" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"52"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 52]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 52]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 52], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 52], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 52]]
  Rendered books/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.2ms)
Started GET "/books/52/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"52"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.1ms)
Started POST "/books/52/reviews" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"52"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/52
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/books/52" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"52"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 52]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 52]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 52], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 52], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 52]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.242297"], ["updated_at", "2019-06-22 17:50:12.242297"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.244808"], ["updated_at", "2019-06-22 17:50:12.244808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.247231"], ["updated_at", "2019-06-22 17:50:12.247231"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 53], ["author_id", 36]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.250769"], ["updated_at", "2019-06-22 17:50:12.250769"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 54], ["author_id", 37]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 53], ["created_at", "2019-06-22 17:50:12.254266"], ["updated_at", "2019-06-22 17:50:12.254266"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 54], ["created_at", "2019-06-22 17:50:12.256005"], ["updated_at", "2019-06-22 17:50:12.256005"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 53], ["created_at", "2019-06-22 17:50:12.257585"], ["updated_at", "2019-06-22 17:50:12.257585"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/53" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"53"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 53]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 53]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 53], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 53], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 53]]
  Rendered books/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.281720"], ["updated_at", "2019-06-22 17:50:12.281720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.283900"], ["updated_at", "2019-06-22 17:50:12.283900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.286246"], ["updated_at", "2019-06-22 17:50:12.286246"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 55], ["author_id", 38]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.289882"], ["updated_at", "2019-06-22 17:50:12.289882"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 56], ["author_id", 39]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 55], ["created_at", "2019-06-22 17:50:12.293228"], ["updated_at", "2019-06-22 17:50:12.293228"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 56], ["created_at", "2019-06-22 17:50:12.295066"], ["updated_at", "2019-06-22 17:50:12.295066"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 55], ["created_at", "2019-06-22 17:50:12.296920"], ["updated_at", "2019-06-22 17:50:12.296920"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/55" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"55"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 55]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 55]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 55], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 55], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 55]]
  Rendered books/show.html.erb within layouts/application (4.7ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.316820"], ["updated_at", "2019-06-22 17:50:12.316820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.318907"], ["updated_at", "2019-06-22 17:50:12.318907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 57], ["created_at", "2019-06-20 17:50:12.319977"], ["updated_at", "2019-06-22 17:50:12.324656"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 58], ["created_at", "2019-06-19 17:50:12.326143"], ["updated_at", "2019-06-22 17:50:12.327347"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.342948"], ["updated_at", "2019-06-22 17:50:12.342948"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.345271"], ["updated_at", "2019-06-22 17:50:12.345271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 59], ["created_at", "2019-06-20 17:50:12.346292"], ["updated_at", "2019-06-22 17:50:12.347698"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 60], ["created_at", "2019-06-19 17:50:12.348768"], ["updated_at", "2019-06-22 17:50:12.349904"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.4ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.364984"], ["updated_at", "2019-06-22 17:50:12.364984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.367177"], ["updated_at", "2019-06-22 17:50:12.367177"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 61], ["author_id", 40]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 61], ["created_at", "2019-06-22 17:50:12.370987"], ["updated_at", "2019-06-22 17:50:12.370987"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 61]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 61]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 61]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 61]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 61]]
  Rendered books/index.html.erb within layouts/application (7.8ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 1.8ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.4ms)
Started GET "/books/61" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"61"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 61]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 61]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 61], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 61], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 61]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.4ms)
Started GET "/authors/40" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"40"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 40]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 61], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 61], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 61], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 61], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 61], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 61]]
  Rendered authors/show.html.erb within layouts/application (7.5ms)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 0.8ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:12 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", ""], ["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.493622"], ["updated_at", "2019-06-22 17:50:12.493622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.495992"], ["updated_at", "2019-06-22 17:50:12.495992"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 62], ["author_id", 41]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 62], ["created_at", "2019-06-22 17:50:12.500034"], ["updated_at", "2019-06-22 17:50:12.500034"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 62], ["created_at", "2019-06-22 17:50:12.502173"], ["updated_at", "2019-06-22 17:50:12.502173"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 62]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:12.506173"], ["updated_at", "2019-06-22 17:50:12.506173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.509186"], ["updated_at", "2019-06-22 17:50:12.509186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.511145"], ["updated_at", "2019-06-22 17:50:12.511145"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 64], ["author_id", 42]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 64], ["created_at", "2019-06-22 17:50:12.515204"], ["updated_at", "2019-06-22 17:50:12.515204"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 64], ["created_at", "2019-06-22 17:50:12.516981"], ["updated_at", "2019-06-22 17:50:12.516981"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 64]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.520644"], ["updated_at", "2019-06-22 17:50:12.520644"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 65], ["created_at", "2019-06-22 17:50:12.522711"], ["updated_at", "2019-06-22 17:50:12.522711"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 65], ["created_at", "2019-06-22 17:50:12.524402"], ["updated_at", "2019-06-22 17:50:12.524402"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 65], ["created_at", "2019-06-22 17:50:12.526234"], ["updated_at", "2019-06-22 17:50:12.526234"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 65], ["created_at", "2019-06-22 17:50:12.528009"], ["updated_at", "2019-06-22 17:50:12.528009"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 65], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.532694"], ["updated_at", "2019-06-22 17:50:12.532694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 66], ["created_at", "2019-06-22 17:50:12.534866"], ["updated_at", "2019-06-22 17:50:12.534866"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 66], ["created_at", "2019-06-22 17:50:12.537042"], ["updated_at", "2019-06-22 17:50:12.537042"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 66], ["created_at", "2019-06-22 17:50:12.538707"], ["updated_at", "2019-06-22 17:50:12.538707"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 66], ["created_at", "2019-06-22 17:50:12.540285"], ["updated_at", "2019-06-22 17:50:12.540285"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 66], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.544185"], ["updated_at", "2019-06-22 17:50:12.544185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 67], ["created_at", "2019-06-22 17:50:12.546172"], ["updated_at", "2019-06-22 17:50:12.546172"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 67], ["created_at", "2019-06-22 17:50:12.548238"], ["updated_at", "2019-06-22 17:50:12.548238"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 67], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.552134"], ["updated_at", "2019-06-22 17:50:12.552134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.554187"], ["updated_at", "2019-06-22 17:50:12.554187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.556139"], ["updated_at", "2019-06-22 17:50:12.556139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.559874"], ["updated_at", "2019-06-22 17:50:12.559874"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.561992"], ["updated_at", "2019-06-22 17:50:12.561992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.564157"], ["updated_at", "2019-06-22 17:50:12.564157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.568283"], ["updated_at", "2019-06-22 17:50:12.568283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.570280"], ["updated_at", "2019-06-22 17:50:12.570280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 74], ["created_at", "2019-06-22 17:50:12.572091"], ["updated_at", "2019-06-22 17:50:12.572091"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 74], ["created_at", "2019-06-22 17:50:12.573828"], ["updated_at", "2019-06-22 17:50:12.573828"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 75], ["created_at", "2019-06-22 17:50:12.575806"], ["updated_at", "2019-06-22 17:50:12.575806"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (75, 74)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.581448"], ["updated_at", "2019-06-22 17:50:12.581448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.583825"], ["updated_at", "2019-06-22 17:50:12.583825"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 76], ["created_at", "2019-06-22 17:50:12.586340"], ["updated_at", "2019-06-22 17:50:12.586340"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 76], ["created_at", "2019-06-22 17:50:12.588422"], ["updated_at", "2019-06-22 17:50:12.588422"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 77], ["created_at", "2019-06-22 17:50:12.590278"], ["updated_at", "2019-06-22 17:50:12.590278"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (76, 77)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.594871"], ["updated_at", "2019-06-22 17:50:12.594871"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.597198"], ["updated_at", "2019-06-22 17:50:12.597198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.599265"], ["updated_at", "2019-06-22 17:50:12.599265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.601573"], ["updated_at", "2019-06-22 17:50:12.601573"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 78], ["created_at", "2019-06-22 17:50:12.603507"], ["updated_at", "2019-06-22 17:50:12.603507"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 79], ["created_at", "2019-06-22 17:50:12.605308"], ["updated_at", "2019-06-22 17:50:12.605308"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 80], ["created_at", "2019-06-22 17:50:12.607018"], ["updated_at", "2019-06-22 17:50:12.607018"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 81], ["created_at", "2019-06-22 17:50:12.608739"], ["updated_at", "2019-06-22 17:50:12.608739"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.612874"], ["updated_at", "2019-06-22 17:50:12.612874"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.615445"], ["updated_at", "2019-06-22 17:50:12.615445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.617510"], ["updated_at", "2019-06-22 17:50:12.617510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.619837"], ["updated_at", "2019-06-22 17:50:12.619837"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 82], ["created_at", "2019-06-22 17:50:12.621813"], ["updated_at", "2019-06-22 17:50:12.621813"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 83], ["created_at", "2019-06-22 17:50:12.623734"], ["updated_at", "2019-06-22 17:50:12.623734"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 84], ["created_at", "2019-06-22 17:50:12.625480"], ["updated_at", "2019-06-22 17:50:12.625480"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 85], ["created_at", "2019-06-22 17:50:12.627354"], ["updated_at", "2019-06-22 17:50:12.627354"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.632172"], ["updated_at", "2019-06-22 17:50:12.632172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.634565"], ["updated_at", "2019-06-22 17:50:12.634565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.636518"], ["updated_at", "2019-06-22 17:50:12.636518"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.638589"], ["updated_at", "2019-06-22 17:50:12.638589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 86], ["created_at", "2019-06-22 17:50:12.640681"], ["updated_at", "2019-06-22 17:50:12.640681"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 87], ["created_at", "2019-06-22 17:50:12.642711"], ["updated_at", "2019-06-22 17:50:12.642711"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 88], ["created_at", "2019-06-22 17:50:12.644627"], ["updated_at", "2019-06-22 17:50:12.644627"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 89], ["created_at", "2019-06-22 17:50:12.646970"], ["updated_at", "2019-06-22 17:50:12.646970"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.651249"], ["updated_at", "2019-06-22 17:50:12.651249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.653336"], ["updated_at", "2019-06-22 17:50:12.653336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.655292"], ["updated_at", "2019-06-22 17:50:12.655292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.657261"], ["updated_at", "2019-06-22 17:50:12.657261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 90], ["created_at", "2019-06-22 17:50:12.659102"], ["updated_at", "2019-06-22 17:50:12.659102"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 91], ["created_at", "2019-06-22 17:50:12.660904"], ["updated_at", "2019-06-22 17:50:12.660904"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 92], ["created_at", "2019-06-22 17:50:12.662709"], ["updated_at", "2019-06-22 17:50:12.662709"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 93], ["created_at", "2019-06-22 17:50:12.665077"], ["updated_at", "2019-06-22 17:50:12.665077"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.672877"], ["updated_at", "2019-06-22 17:50:12.672877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:12.675357"], ["updated_at", "2019-06-22 17:50:12.675357"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 94], ["author_id", 43]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 94], ["created_at", "2019-06-22 17:50:12.679044"], ["updated_at", "2019-06-22 17:50:12.679044"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.682748"], ["updated_at", "2019-06-22 17:50:12.682748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.685151"], ["updated_at", "2019-06-22 17:50:12.685151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.687174"], ["updated_at", "2019-06-22 17:50:12.687174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.689203"], ["updated_at", "2019-06-22 17:50:12.689203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 95], ["created_at", "2019-06-22 17:50:12.691092"], ["updated_at", "2019-06-22 17:50:12.691092"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 96], ["created_at", "2019-06-22 17:50:12.692964"], ["updated_at", "2019-06-22 17:50:12.692964"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 97], ["created_at", "2019-06-22 17:50:12.694710"], ["updated_at", "2019-06-22 17:50:12.694710"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 98], ["created_at", "2019-06-22 17:50:12.696932"], ["updated_at", "2019-06-22 17:50:12.696932"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 95], ["created_at", "2019-06-22 17:50:12.699059"], ["updated_at", "2019-06-22 17:50:12.699059"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 96], ["created_at", "2019-06-22 17:50:12.700885"], ["updated_at", "2019-06-22 17:50:12.700885"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 97], ["created_at", "2019-06-22 17:50:12.702822"], ["updated_at", "2019-06-22 17:50:12.702822"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 95], ["created_at", "2019-06-22 17:50:12.704739"], ["updated_at", "2019-06-22 17:50:12.704739"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 96], ["created_at", "2019-06-22 17:50:12.706359"], ["updated_at", "2019-06-22 17:50:12.706359"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 95], ["created_at", "2019-06-22 17:50:12.707946"], ["updated_at", "2019-06-22 17:50:12.707946"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.714993"], ["updated_at", "2019-06-22 17:50:12.714993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 99], ["created_at", "2019-06-20 17:50:12.716107"], ["updated_at", "2019-06-22 17:50:12.717236"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 99], ["created_at", "2019-06-19 17:50:12.718214"], ["updated_at", "2019-06-22 17:50:12.719106"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 99], ["created_at", "2019-06-18 17:50:12.720105"], ["updated_at", "2019-06-22 17:50:12.721021"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:12.725242"], ["updated_at", "2019-06-22 17:50:12.725242"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 100], ["created_at", "2019-06-20 17:50:12.726321"], ["updated_at", "2019-06-22 17:50:12.727349"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 100], ["created_at", "2019-06-19 17:50:12.728538"], ["updated_at", "2019-06-22 17:50:12.729362"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 100], ["created_at", "2019-06-18 17:50:12.730298"], ["updated_at", "2019-06-22 17:50:12.731060"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-06-22 17:50:17.219082"], ["updated_at", "2019-06-22 17:50:17.219082"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-06-22 17:50:17.244217"], ["updated_at", "2019-06-22 17:50:17.244217"]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 101], ["author_id", 44]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-06-22 17:50:17.255287"], ["updated_at", "2019-06-22 17:50:17.255287"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 102], ["author_id", 44]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 101]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 101]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 101]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 102]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 102]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 102]]
  Rendered books/index.html.erb within layouts/application (21.8ms)
Completed 200 OK in 30ms (Views: 23.7ms | ActiveRecord: 4.2ms)
Started GET "/authors/44" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"44"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 44]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 101], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 101]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 102], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 102]]
  Rendered authors/show.html.erb within layouts/application (7.5ms)
Completed 200 OK in 13ms (Views: 8.7ms | ActiveRecord: 1.4ms)
Started GET "/books/101" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"101"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 101]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 101]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 101], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 101], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 101]]
  Rendered books/show.html.erb within layouts/application (6.1ms)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 1.2ms)
Started GET "/authors/44" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"44"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 44]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 101], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 101]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 102], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 102]]
  Rendered authors/show.html.erb within layouts/application (6.3ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:17.349720"], ["updated_at", "2019-06-22 17:50:17.349720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:17.352047"], ["updated_at", "2019-06-22 17:50:17.352047"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 103], ["author_id", 45]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:17.357748"], ["updated_at", "2019-06-22 17:50:17.357748"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 104], ["author_id", 45]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 103], ["created_at", "2019-06-22 17:50:17.369679"], ["updated_at", "2019-06-22 17:50:17.369679"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/45" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"45"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 45]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 103], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 103], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 103], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 103], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 103], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 103]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 104], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 104]]
  Rendered authors/show.html.erb within layouts/application (13.1ms)
Completed 200 OK in 15ms (Views: 12.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-06-22 17:50:17.398432"], ["updated_at", "2019-06-22 17:50:17.398432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-06-22 17:50:17.401681"], ["updated_at", "2019-06-22 17:50:17.401681"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 105], ["author_id", 46]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-06-22 17:50:17.406690"], ["updated_at", "2019-06-22 17:50:17.406690"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 105], ["author_id", 47]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-06-22 17:50:17.413358"], ["updated_at", "2019-06-22 17:50:17.413358"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 106], ["author_id", 47]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/46" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"46"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 46]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 105], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 105]]
  Rendered authors/show.html.erb within layouts/application (4.4ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.8ms)
Started DELETE "/authors/46" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"46"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 46]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 105[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 105]]
  [1m[36mBookAuthor Load (0.3ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 105]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 52]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 53]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 105]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 46]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 46]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 16ms (ActiveRecord: 3.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 106]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 106]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 106]]
  Rendered books/index.html.erb within layouts/application (9.0ms)
Completed 200 OK in 11ms (Views: 8.1ms | ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:17.478351"], ["updated_at", "2019-06-22 17:50:17.478351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:17.480589"], ["updated_at", "2019-06-22 17:50:17.480589"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 107], ["author_id", 48]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:17.483877"], ["updated_at", "2019-06-22 17:50:17.483877"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 107], ["author_id", 49]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:17.488384"], ["updated_at", "2019-06-22 17:50:17.488384"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 108], ["author_id", 48]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 17:50:17.493080"], ["updated_at", "2019-06-22 17:50:17.493080"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 109], ["author_id", 48]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/48" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"48"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 48]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 107], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 107]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 108], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 108]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 109], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 109]]
  Rendered authors/show.html.erb within layouts/application (7.9ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:17.516474"], ["updated_at", "2019-06-22 17:50:17.516474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:17.519182"], ["updated_at", "2019-06-22 17:50:17.519182"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 110], ["author_id", 50]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:17.523000"], ["updated_at", "2019-06-22 17:50:17.523000"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 110], ["author_id", 51]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:17.528040"], ["updated_at", "2019-06-22 17:50:17.528040"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 111], ["author_id", 50]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 17:50:17.532262"], ["updated_at", "2019-06-22 17:50:17.532262"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 112], ["author_id", 50]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/50" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"50"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 50]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 110], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 110]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 111], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 111]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 112], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 112]]
  Rendered authors/show.html.erb within layouts/application (7.2ms)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.550601"], ["updated_at", "2019-06-22 17:50:17.550601"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 113], ["created_at", "2019-06-22 17:50:17.553481"], ["updated_at", "2019-06-22 17:50:17.553481"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 113], ["created_at", "2019-06-22 17:50:17.555494"], ["updated_at", "2019-06-22 17:50:17.555494"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 113], ["created_at", "2019-06-22 17:50:17.557865"], ["updated_at", "2019-06-22 17:50:17.557865"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 113], ["created_at", "2019-06-22 17:50:17.559734"], ["updated_at", "2019-06-22 17:50:17.559734"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 113]]
  Rendered books/index.html.erb within layouts/application (8.7ms)
Completed 200 OK in 10ms (Views: 7.5ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 113]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.578125"], ["updated_at", "2019-06-22 17:50:17.578125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.580348"], ["updated_at", "2019-06-22 17:50:17.580348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.582436"], ["updated_at", "2019-06-22 17:50:17.582436"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.584491"], ["updated_at", "2019-06-22 17:50:17.584491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 114], ["created_at", "2019-06-22 17:50:17.586607"], ["updated_at", "2019-06-22 17:50:17.586607"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 115], ["created_at", "2019-06-22 17:50:17.588700"], ["updated_at", "2019-06-22 17:50:17.588700"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 116], ["created_at", "2019-06-22 17:50:17.590488"], ["updated_at", "2019-06-22 17:50:17.590488"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 117], ["created_at", "2019-06-22 17:50:17.592391"], ["updated_at", "2019-06-22 17:50:17.592391"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 114], ["created_at", "2019-06-22 17:50:17.594097"], ["updated_at", "2019-06-22 17:50:17.594097"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 115], ["created_at", "2019-06-22 17:50:17.595792"], ["updated_at", "2019-06-22 17:50:17.595792"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 116], ["created_at", "2019-06-22 17:50:17.597426"], ["updated_at", "2019-06-22 17:50:17.597426"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 114], ["created_at", "2019-06-22 17:50:17.599522"], ["updated_at", "2019-06-22 17:50:17.599522"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 115], ["created_at", "2019-06-22 17:50:17.601405"], ["updated_at", "2019-06-22 17:50:17.601405"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 114], ["created_at", "2019-06-22 17:50:17.603702"], ["updated_at", "2019-06-22 17:50:17.603702"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 115]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 117]]
  Rendered books/index.html.erb within layouts/application (21.1ms)
Completed 200 OK in 22ms (Views: 17.3ms | ActiveRecord: 4.6ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 114]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 114]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 115]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 115]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 116]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 116]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 117]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 117]]
  Rendered books/index.html.erb within layouts/application (18.8ms)
Completed 200 OK in 20ms (Views: 15.3ms | ActiveRecord: 4.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.655301"], ["updated_at", "2019-06-22 17:50:17.655301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.657438"], ["updated_at", "2019-06-22 17:50:17.657438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.659448"], ["updated_at", "2019-06-22 17:50:17.659448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.661424"], ["updated_at", "2019-06-22 17:50:17.661424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 118], ["created_at", "2019-06-22 17:50:17.663451"], ["updated_at", "2019-06-22 17:50:17.663451"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 119], ["created_at", "2019-06-22 17:50:17.665513"], ["updated_at", "2019-06-22 17:50:17.665513"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 120], ["created_at", "2019-06-22 17:50:17.667493"], ["updated_at", "2019-06-22 17:50:17.667493"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 121], ["created_at", "2019-06-22 17:50:17.669408"], ["updated_at", "2019-06-22 17:50:17.669408"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 118], ["created_at", "2019-06-22 17:50:17.671069"], ["updated_at", "2019-06-22 17:50:17.671069"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 119], ["created_at", "2019-06-22 17:50:17.672862"], ["updated_at", "2019-06-22 17:50:17.672862"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 120], ["created_at", "2019-06-22 17:50:17.674605"], ["updated_at", "2019-06-22 17:50:17.674605"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 118], ["created_at", "2019-06-22 17:50:17.676274"], ["updated_at", "2019-06-22 17:50:17.676274"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 119], ["created_at", "2019-06-22 17:50:17.677922"], ["updated_at", "2019-06-22 17:50:17.677922"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 118], ["created_at", "2019-06-22 17:50:17.679599"], ["updated_at", "2019-06-22 17:50:17.679599"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 118]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 119]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 121]]
  Rendered books/index.html.erb within layouts/application (18.4ms)
Completed 200 OK in 20ms (Views: 15.1ms | ActiveRecord: 4.1ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 121]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 121]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 120]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 120]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 119]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 119]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 118]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 118]]
  Rendered books/index.html.erb within layouts/application (18.8ms)
Completed 200 OK in 20ms (Views: 15.4ms | ActiveRecord: 4.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.728458"], ["updated_at", "2019-06-22 17:50:17.728458"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.730674"], ["updated_at", "2019-06-22 17:50:17.730674"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.732691"], ["updated_at", "2019-06-22 17:50:17.732691"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.735116"], ["updated_at", "2019-06-22 17:50:17.735116"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 122], ["created_at", "2019-06-22 17:50:17.737538"], ["updated_at", "2019-06-22 17:50:17.737538"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 123], ["created_at", "2019-06-22 17:50:17.739567"], ["updated_at", "2019-06-22 17:50:17.739567"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 124], ["created_at", "2019-06-22 17:50:17.741535"], ["updated_at", "2019-06-22 17:50:17.741535"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 125], ["created_at", "2019-06-22 17:50:17.743571"], ["updated_at", "2019-06-22 17:50:17.743571"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 122], ["created_at", "2019-06-22 17:50:17.745485"], ["updated_at", "2019-06-22 17:50:17.745485"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 123], ["created_at", "2019-06-22 17:50:17.747133"], ["updated_at", "2019-06-22 17:50:17.747133"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 124], ["created_at", "2019-06-22 17:50:17.748959"], ["updated_at", "2019-06-22 17:50:17.748959"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 122], ["created_at", "2019-06-22 17:50:17.750708"], ["updated_at", "2019-06-22 17:50:17.750708"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 123], ["created_at", "2019-06-22 17:50:17.752526"], ["updated_at", "2019-06-22 17:50:17.752526"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 122], ["created_at", "2019-06-22 17:50:17.754321"], ["updated_at", "2019-06-22 17:50:17.754321"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 125]]
  Rendered books/index.html.erb within layouts/application (20.6ms)
Completed 200 OK in 22ms (Views: 16.9ms | ActiveRecord: 4.4ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 125]]
  Rendered books/index.html.erb within layouts/application (18.5ms)
Completed 200 OK in 20ms (Views: 15.3ms | ActiveRecord: 4.0ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 125]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 125]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 124]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 124]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 123]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 123]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 122]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 122]]
  Rendered books/index.html.erb within layouts/application (18.5ms)
Completed 200 OK in 20ms (Views: 15.5ms | ActiveRecord: 3.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.828737"], ["updated_at", "2019-06-22 17:50:17.828737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.831210"], ["updated_at", "2019-06-22 17:50:17.831210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.835893"], ["updated_at", "2019-06-22 17:50:17.835893"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.838229"], ["updated_at", "2019-06-22 17:50:17.838229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 126], ["created_at", "2019-06-22 17:50:17.840274"], ["updated_at", "2019-06-22 17:50:17.840274"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 127], ["created_at", "2019-06-22 17:50:17.842190"], ["updated_at", "2019-06-22 17:50:17.842190"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 128], ["created_at", "2019-06-22 17:50:17.843921"], ["updated_at", "2019-06-22 17:50:17.843921"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 129], ["created_at", "2019-06-22 17:50:17.845751"], ["updated_at", "2019-06-22 17:50:17.845751"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 126], ["created_at", "2019-06-22 17:50:17.847405"], ["updated_at", "2019-06-22 17:50:17.847405"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 127], ["created_at", "2019-06-22 17:50:17.849069"], ["updated_at", "2019-06-22 17:50:17.849069"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 128], ["created_at", "2019-06-22 17:50:17.850703"], ["updated_at", "2019-06-22 17:50:17.850703"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 126], ["created_at", "2019-06-22 17:50:17.852291"], ["updated_at", "2019-06-22 17:50:17.852291"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 127], ["created_at", "2019-06-22 17:50:17.854293"], ["updated_at", "2019-06-22 17:50:17.854293"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 126], ["created_at", "2019-06-22 17:50:17.856308"], ["updated_at", "2019-06-22 17:50:17.856308"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 129]]
  Rendered books/index.html.erb within layouts/application (20.1ms)
Completed 200 OK in 21ms (Views: 16.6ms | ActiveRecord: 4.2ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (126, 127, 128, 129)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 129]]
  Rendered books/index.html.erb within layouts/application (17.5ms)
Completed 200 OK in 21ms (Views: 14.6ms | ActiveRecord: 4.3ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (129, 128, 127, 126)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 129]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 129]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 128]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 128]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 127]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 127]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 126]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 126]]
  Rendered books/index.html.erb within layouts/application (16.1ms)
Completed 200 OK in 19ms (Views: 13.4ms | ActiveRecord: 4.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.929374"], ["updated_at", "2019-06-22 17:50:17.929374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.931543"], ["updated_at", "2019-06-22 17:50:17.931543"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.933621"], ["updated_at", "2019-06-22 17:50:17.933621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.936114"], ["updated_at", "2019-06-22 17:50:17.936114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 130], ["created_at", "2019-06-22 17:50:17.938331"], ["updated_at", "2019-06-22 17:50:17.938331"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 131], ["created_at", "2019-06-22 17:50:17.940404"], ["updated_at", "2019-06-22 17:50:17.940404"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 132], ["created_at", "2019-06-22 17:50:17.942235"], ["updated_at", "2019-06-22 17:50:17.942235"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 133], ["created_at", "2019-06-22 17:50:17.944113"], ["updated_at", "2019-06-22 17:50:17.944113"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 130], ["created_at", "2019-06-22 17:50:17.945941"], ["updated_at", "2019-06-22 17:50:17.945941"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 131], ["created_at", "2019-06-22 17:50:17.947793"], ["updated_at", "2019-06-22 17:50:17.947793"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 132], ["created_at", "2019-06-22 17:50:17.949604"], ["updated_at", "2019-06-22 17:50:17.949604"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 130], ["created_at", "2019-06-22 17:50:17.951382"], ["updated_at", "2019-06-22 17:50:17.951382"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 131], ["created_at", "2019-06-22 17:50:17.953004"], ["updated_at", "2019-06-22 17:50:17.953004"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 130], ["created_at", "2019-06-22 17:50:17.954689"], ["updated_at", "2019-06-22 17:50:17.954689"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:17 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 130]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 131]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 132]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 133]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 132]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 131]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 130]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 130]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 130]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 131]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 131]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 131]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 132]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 132]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 132]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 133]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 133]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 133]]
  Rendered books/index.html.erb within layouts/application (19.7ms)
Completed 200 OK in 21ms (Views: 16.2ms | ActiveRecord: 4.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 130]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 131]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 132]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:17.988256"], ["updated_at", "2019-06-22 17:50:17.988256"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:17.990603"], ["updated_at", "2019-06-22 17:50:17.990603"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 134], ["author_id", 52]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 134], ["created_at", "2019-06-22 17:50:17.994308"], ["updated_at", "2019-06-22 17:50:17.994308"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 134], ["created_at", "2019-06-22 17:50:17.996164"], ["updated_at", "2019-06-22 17:50:17.996164"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 134], ["created_at", "2019-06-22 17:50:17.997796"], ["updated_at", "2019-06-22 17:50:17.997796"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 134], ["created_at", "2019-06-22 17:50:17.999518"], ["updated_at", "2019-06-22 17:50:17.999518"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/134" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"134"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 134], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 134]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 134]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 134], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 134], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 134]]
  Rendered books/show.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.016684"], ["updated_at", "2019-06-22 17:50:18.016684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.018928"], ["updated_at", "2019-06-22 17:50:18.018928"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 135], ["author_id", 53]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 135], ["created_at", "2019-06-22 17:50:18.023322"], ["updated_at", "2019-06-22 17:50:18.023322"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 135], ["created_at", "2019-06-22 17:50:18.025121"], ["updated_at", "2019-06-22 17:50:18.025121"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 135], ["created_at", "2019-06-22 17:50:18.026781"], ["updated_at", "2019-06-22 17:50:18.026781"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 135], ["created_at", "2019-06-22 17:50:18.028434"], ["updated_at", "2019-06-22 17:50:18.028434"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/135" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"135"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 135]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 135]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 135], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 135], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 135]]
  Rendered books/show.html.erb within layouts/application (6.6ms)
Completed 200 OK in 8ms (Views: 6.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.046435"], ["updated_at", "2019-06-22 17:50:18.046435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.048712"], ["updated_at", "2019-06-22 17:50:18.048712"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 136], ["author_id", 54]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 136], ["created_at", "2019-06-22 17:50:18.052260"], ["updated_at", "2019-06-22 17:50:18.052260"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 136], ["created_at", "2019-06-22 17:50:18.054167"], ["updated_at", "2019-06-22 17:50:18.054167"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 136], ["created_at", "2019-06-22 17:50:18.055937"], ["updated_at", "2019-06-22 17:50:18.055937"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 136], ["created_at", "2019-06-22 17:50:18.057644"], ["updated_at", "2019-06-22 17:50:18.057644"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/136" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"136"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 136]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 136]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 136], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 136], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 136]]
  Rendered books/show.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 136]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-06-22 17:50:18.072889"], ["updated_at", "2019-06-22 17:50:18.072889"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/137" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"137"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 137]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 137]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 137], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 137], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 137]]
  Rendered books/show.html.erb within layouts/application (4.6ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.2ms)
Started DELETE "/books/137" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"137"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 137]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 137]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 137]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.6ms)
Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.098397"], ["updated_at", "2019-06-22 17:50:18.098397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.100619"], ["updated_at", "2019-06-22 17:50:18.100619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.103234"], ["updated_at", "2019-06-22 17:50:18.103234"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 138], ["author_id", 55]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:18.106781"], ["updated_at", "2019-06-22 17:50:18.106781"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 138], ["author_id", 56]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 17:50:18.110363"], ["updated_at", "2019-06-22 17:50:18.110363"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 139], ["author_id", 57]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 138]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 138]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 138]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 139]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 139]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 139]]
  Rendered books/index.html.erb within layouts/application (9.0ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.132327"], ["updated_at", "2019-06-22 17:50:18.132327"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.134804"], ["updated_at", "2019-06-22 17:50:18.134804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.137577"], ["updated_at", "2019-06-22 17:50:18.137577"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 140], ["author_id", 58]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:18.141763"], ["updated_at", "2019-06-22 17:50:18.141763"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 140], ["author_id", 59]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 17:50:18.145289"], ["updated_at", "2019-06-22 17:50:18.145289"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 141], ["author_id", 60]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 140]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 140]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 140]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 141]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 141]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 141]]
  Rendered books/index.html.erb within layouts/application (9.6ms)
Completed 200 OK in 11ms (Views: 7.8ms | ActiveRecord: 2.5ms)
Started GET "/books/140" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"140"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 140], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 140]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 140]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 140], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 140], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 140]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 1.2ms)
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (12.2ms)
Completed 200 OK in 15ms (Views: 12.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-06-22 17:50:18.198674"], ["updated_at", "2019-06-22 17:50:18.198674"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:18.207189"], ["updated_at", "2019-06-22 17:50:18.207189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:18.209503"], ["updated_at", "2019-06-22 17:50:18.209503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 142], ["author_id", 62]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 142], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.2ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 142]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 142]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 142]]
  Rendered books/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.7ms)
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 142], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:18.243178"], ["updated_at", "2019-06-22 17:50:18.243178"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:18.245407"], ["updated_at", "2019-06-22 17:50:18.245407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 143], ["author_id", 63]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:18.250258"], ["updated_at", "2019-06-22 17:50:18.250258"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 143], ["author_id", 64]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 143]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 143]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 143]]
  Rendered books/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 1.5ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:18.270663"], ["updated_at", "2019-06-22 17:50:18.270663"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:18.282536"], ["updated_at", "2019-06-22 17:50:18.282536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 144], ["author_id", 65]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:18.287921"], ["updated_at", "2019-06-22 17:50:18.287921"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 144], ["author_id", 66]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 144], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 13ms (ActiveRecord: 2.8ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 144]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 144]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 144]]
  Rendered books/index.html.erb within layouts/application (6.6ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:18.320413"], ["updated_at", "2019-06-22 17:50:18.320413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:18.323709"], ["updated_at", "2019-06-22 17:50:18.323709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-06-22 17:50:18.365859"], ["updated_at", "2019-06-22 17:50:18.365859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 8ms (ActiveRecord: 1.3ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 145]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 145]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 145]]
  Rendered books/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:18.408092"], ["updated_at", "2019-06-22 17:50:18.408092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:18.410336"], ["updated_at", "2019-06-22 17:50:18.410336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 146], ["author_id", 69]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:18.415028"], ["updated_at", "2019-06-22 17:50:18.415028"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 146], ["author_id", 70]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 146], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 146]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 146]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 146]]
  Rendered books/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 1.5ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:18.430779"], ["updated_at", "2019-06-22 17:50:18.430779"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.432799"], ["updated_at", "2019-06-22 17:50:18.432799"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 147], ["author_id", 71]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:18.436400"], ["updated_at", "2019-06-22 17:50:18.436400"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 147], ["author_id", 72]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 147], ["created_at", "2019-06-22 17:50:18.439857"], ["updated_at", "2019-06-22 17:50:18.439857"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 147], ["created_at", "2019-06-22 17:50:18.442260"], ["updated_at", "2019-06-22 17:50:18.442260"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 147], ["created_at", "2019-06-22 17:50:18.444081"], ["updated_at", "2019-06-22 17:50:18.444081"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/147" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"147"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 147], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 147]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 147]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 147], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 147], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 147]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:18.465549"], ["updated_at", "2019-06-22 17:50:18.465549"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.467919"], ["updated_at", "2019-06-22 17:50:18.467919"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 148], ["author_id", 73]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:18.471587"], ["updated_at", "2019-06-22 17:50:18.471587"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 148], ["author_id", 74]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 148], ["created_at", "2019-06-22 17:50:18.475471"], ["updated_at", "2019-06-22 17:50:18.475471"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 148], ["created_at", "2019-06-22 17:50:18.477327"], ["updated_at", "2019-06-22 17:50:18.477327"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 148], ["created_at", "2019-06-22 17:50:18.478891"], ["updated_at", "2019-06-22 17:50:18.478891"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/148" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"148"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 148]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 148]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 148], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 148], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 148]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.3ms)
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 1.0ms)
Started GET "/" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.517966"], ["updated_at", "2019-06-22 17:50:18.517966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.520050"], ["updated_at", "2019-06-22 17:50:18.520050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.522212"], ["updated_at", "2019-06-22 17:50:18.522212"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 149], ["author_id", 75]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.525682"], ["updated_at", "2019-06-22 17:50:18.525682"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 150], ["author_id", 76]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 149], ["created_at", "2019-06-22 17:50:18.529078"], ["updated_at", "2019-06-22 17:50:18.529078"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 150], ["created_at", "2019-06-22 17:50:18.530879"], ["updated_at", "2019-06-22 17:50:18.530879"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/149" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"149"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 149]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 149]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 149], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 149], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 149]]
  Rendered books/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.4ms)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.6ms)
Started DELETE "/reviews/215" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"215"}
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.6ms)
Started GET "/reviews" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.565800"], ["updated_at", "2019-06-22 17:50:18.565800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.567980"], ["updated_at", "2019-06-22 17:50:18.567980"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 151], ["author_id", 77]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/151" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"151"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 151]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 151]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 151], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 151], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 151]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 1.0ms)
Started GET "/books/151/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"151"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (3.2ms)
Completed 200 OK in 6ms (Views: 3.9ms | ActiveRecord: 0.2ms)
Started POST "/books/151/reviews" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"151"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 151], ["created_at", "2019-06-22 17:50:18.595688"], ["updated_at", "2019-06-22 17:50:18.595688"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/151
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/151" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"151"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 151]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 151]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 151], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 151], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 151]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.613776"], ["updated_at", "2019-06-22 17:50:18.613776"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.615845"], ["updated_at", "2019-06-22 17:50:18.615845"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 152], ["author_id", 78]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/152" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"152"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 152]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 152]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 152], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 152], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 152]]
  Rendered books/show.html.erb within layouts/application (4.0ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 1.0ms)
Started GET "/books/152/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"152"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.1ms)
Started POST "/books/152/reviews" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"152"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 152], ["created_at", "2019-06-22 17:50:18.638499"], ["updated_at", "2019-06-22 17:50:18.638499"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/152
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
Started GET "/books/152" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"152"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 152]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 152]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 152], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 152], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 152]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.9ms)
Started GET "/books/152/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"152"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.1ms)
Started POST "/books/152/reviews" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"152"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/152
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/books/152" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"152"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 152]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 152]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 152], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 152], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 152]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.669204"], ["updated_at", "2019-06-22 17:50:18.669204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.671505"], ["updated_at", "2019-06-22 17:50:18.671505"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.673599"], ["updated_at", "2019-06-22 17:50:18.673599"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 153], ["author_id", 79]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.677405"], ["updated_at", "2019-06-22 17:50:18.677405"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 154], ["author_id", 80]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 153], ["created_at", "2019-06-22 17:50:18.681103"], ["updated_at", "2019-06-22 17:50:18.681103"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 154], ["created_at", "2019-06-22 17:50:18.682816"], ["updated_at", "2019-06-22 17:50:18.682816"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 153], ["created_at", "2019-06-22 17:50:18.684402"], ["updated_at", "2019-06-22 17:50:18.684402"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/153" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"153"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 153], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 153]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 153]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 153], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 153], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 153]]
  Rendered books/show.html.erb within layouts/application (4.7ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 153], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 154], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.709018"], ["updated_at", "2019-06-22 17:50:18.709018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.711427"], ["updated_at", "2019-06-22 17:50:18.711427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.713692"], ["updated_at", "2019-06-22 17:50:18.713692"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 155], ["author_id", 81]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.717476"], ["updated_at", "2019-06-22 17:50:18.717476"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 156], ["author_id", 82]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 155], ["created_at", "2019-06-22 17:50:18.721375"], ["updated_at", "2019-06-22 17:50:18.721375"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 156], ["created_at", "2019-06-22 17:50:18.723194"], ["updated_at", "2019-06-22 17:50:18.723194"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 155], ["created_at", "2019-06-22 17:50:18.725172"], ["updated_at", "2019-06-22 17:50:18.725172"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/155" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"155"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 155]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 155]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 155], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 155], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 155]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 156], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.745438"], ["updated_at", "2019-06-22 17:50:18.745438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.747702"], ["updated_at", "2019-06-22 17:50:18.747702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 157], ["created_at", "2019-06-20 17:50:18.748679"], ["updated_at", "2019-06-22 17:50:18.749806"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 158], ["created_at", "2019-06-19 17:50:18.751002"], ["updated_at", "2019-06-22 17:50:18.752498"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 158], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.5ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.6ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 158], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.768512"], ["updated_at", "2019-06-22 17:50:18.768512"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.771098"], ["updated_at", "2019-06-22 17:50:18.771098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 159], ["created_at", "2019-06-20 17:50:18.772096"], ["updated_at", "2019-06-22 17:50:18.773151"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 160], ["created_at", "2019-06-19 17:50:18.774160"], ["updated_at", "2019-06-22 17:50:18.775050"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 159], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 159], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.790353"], ["updated_at", "2019-06-22 17:50:18.790353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.792943"], ["updated_at", "2019-06-22 17:50:18.792943"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 161], ["author_id", 83]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 161], ["created_at", "2019-06-22 17:50:18.796595"], ["updated_at", "2019-06-22 17:50:18.796595"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 161]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 161]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 161]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 161]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 161]]
  Rendered books/index.html.erb within layouts/application (7.9ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 1.9ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.4ms)
Started GET "/books/161" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"161"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 161]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 161]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 161], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 161], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 161]]
  Rendered books/show.html.erb within layouts/application (4.7ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.4ms)
Started GET "/authors/83" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"83"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 83]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 161], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 161], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 161], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 161], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 161], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 161]]
  Rendered authors/show.html.erb within layouts/application (5.8ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:18 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", ""], ["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.922997"], ["updated_at", "2019-06-22 17:50:18.922997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.925337"], ["updated_at", "2019-06-22 17:50:18.925337"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 162], ["author_id", 84]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 162], ["created_at", "2019-06-22 17:50:18.928919"], ["updated_at", "2019-06-22 17:50:18.928919"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 162], ["created_at", "2019-06-22 17:50:18.930616"], ["updated_at", "2019-06-22 17:50:18.930616"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 162]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:18.934461"], ["updated_at", "2019-06-22 17:50:18.934461"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.938131"], ["updated_at", "2019-06-22 17:50:18.938131"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:18.940334"], ["updated_at", "2019-06-22 17:50:18.940334"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 164], ["author_id", 85]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 164], ["created_at", "2019-06-22 17:50:18.944233"], ["updated_at", "2019-06-22 17:50:18.944233"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 164], ["created_at", "2019-06-22 17:50:18.945953"], ["updated_at", "2019-06-22 17:50:18.945953"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 164]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.949783"], ["updated_at", "2019-06-22 17:50:18.949783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 165], ["created_at", "2019-06-22 17:50:18.951889"], ["updated_at", "2019-06-22 17:50:18.951889"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 165], ["created_at", "2019-06-22 17:50:18.953576"], ["updated_at", "2019-06-22 17:50:18.953576"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 165], ["created_at", "2019-06-22 17:50:18.955380"], ["updated_at", "2019-06-22 17:50:18.955380"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 165], ["created_at", "2019-06-22 17:50:18.957245"], ["updated_at", "2019-06-22 17:50:18.957245"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 165], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.961956"], ["updated_at", "2019-06-22 17:50:18.961956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 166], ["created_at", "2019-06-22 17:50:18.964180"], ["updated_at", "2019-06-22 17:50:18.964180"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 166], ["created_at", "2019-06-22 17:50:18.966034"], ["updated_at", "2019-06-22 17:50:18.966034"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 166], ["created_at", "2019-06-22 17:50:18.968006"], ["updated_at", "2019-06-22 17:50:18.968006"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 166], ["created_at", "2019-06-22 17:50:18.969775"], ["updated_at", "2019-06-22 17:50:18.969775"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 166], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.974163"], ["updated_at", "2019-06-22 17:50:18.974163"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 167], ["created_at", "2019-06-22 17:50:18.976560"], ["updated_at", "2019-06-22 17:50:18.976560"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 167], ["created_at", "2019-06-22 17:50:18.978381"], ["updated_at", "2019-06-22 17:50:18.978381"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 167], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.982525"], ["updated_at", "2019-06-22 17:50:18.982525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.984580"], ["updated_at", "2019-06-22 17:50:18.984580"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.986494"], ["updated_at", "2019-06-22 17:50:18.986494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.990243"], ["updated_at", "2019-06-22 17:50:18.990243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.992283"], ["updated_at", "2019-06-22 17:50:18.992283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.994553"], ["updated_at", "2019-06-22 17:50:18.994553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:18.998311"], ["updated_at", "2019-06-22 17:50:18.998311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.000299"], ["updated_at", "2019-06-22 17:50:19.000299"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 174], ["created_at", "2019-06-22 17:50:19.002436"], ["updated_at", "2019-06-22 17:50:19.002436"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 174], ["created_at", "2019-06-22 17:50:19.004383"], ["updated_at", "2019-06-22 17:50:19.004383"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 175], ["created_at", "2019-06-22 17:50:19.006335"], ["updated_at", "2019-06-22 17:50:19.006335"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (175, 174)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.011604"], ["updated_at", "2019-06-22 17:50:19.011604"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.013656"], ["updated_at", "2019-06-22 17:50:19.013656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 176], ["created_at", "2019-06-22 17:50:19.015578"], ["updated_at", "2019-06-22 17:50:19.015578"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 176], ["created_at", "2019-06-22 17:50:19.017329"], ["updated_at", "2019-06-22 17:50:19.017329"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 177], ["created_at", "2019-06-22 17:50:19.019311"], ["updated_at", "2019-06-22 17:50:19.019311"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (176, 177)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.024299"], ["updated_at", "2019-06-22 17:50:19.024299"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.026326"], ["updated_at", "2019-06-22 17:50:19.026326"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.028226"], ["updated_at", "2019-06-22 17:50:19.028226"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.030166"], ["updated_at", "2019-06-22 17:50:19.030166"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 178], ["created_at", "2019-06-22 17:50:19.032602"], ["updated_at", "2019-06-22 17:50:19.032602"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 179], ["created_at", "2019-06-22 17:50:19.034830"], ["updated_at", "2019-06-22 17:50:19.034830"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 180], ["created_at", "2019-06-22 17:50:19.036825"], ["updated_at", "2019-06-22 17:50:19.036825"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 181], ["created_at", "2019-06-22 17:50:19.038632"], ["updated_at", "2019-06-22 17:50:19.038632"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.043243"], ["updated_at", "2019-06-22 17:50:19.043243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.045380"], ["updated_at", "2019-06-22 17:50:19.045380"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.047317"], ["updated_at", "2019-06-22 17:50:19.047317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.049225"], ["updated_at", "2019-06-22 17:50:19.049225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 182], ["created_at", "2019-06-22 17:50:19.051077"], ["updated_at", "2019-06-22 17:50:19.051077"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 183], ["created_at", "2019-06-22 17:50:19.053004"], ["updated_at", "2019-06-22 17:50:19.053004"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 184], ["created_at", "2019-06-22 17:50:19.054806"], ["updated_at", "2019-06-22 17:50:19.054806"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 185], ["created_at", "2019-06-22 17:50:19.056558"], ["updated_at", "2019-06-22 17:50:19.056558"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.060689"], ["updated_at", "2019-06-22 17:50:19.060689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.062791"], ["updated_at", "2019-06-22 17:50:19.062791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.064818"], ["updated_at", "2019-06-22 17:50:19.064818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.066978"], ["updated_at", "2019-06-22 17:50:19.066978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 186], ["created_at", "2019-06-22 17:50:19.069173"], ["updated_at", "2019-06-22 17:50:19.069173"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 187], ["created_at", "2019-06-22 17:50:19.071229"], ["updated_at", "2019-06-22 17:50:19.071229"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 188], ["created_at", "2019-06-22 17:50:19.073211"], ["updated_at", "2019-06-22 17:50:19.073211"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 189], ["created_at", "2019-06-22 17:50:19.075135"], ["updated_at", "2019-06-22 17:50:19.075135"], ["user", "Pam"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.080011"], ["updated_at", "2019-06-22 17:50:19.080011"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.082103"], ["updated_at", "2019-06-22 17:50:19.082103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.084035"], ["updated_at", "2019-06-22 17:50:19.084035"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.086329"], ["updated_at", "2019-06-22 17:50:19.086329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 190], ["created_at", "2019-06-22 17:50:19.088406"], ["updated_at", "2019-06-22 17:50:19.088406"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 191], ["created_at", "2019-06-22 17:50:19.090457"], ["updated_at", "2019-06-22 17:50:19.090457"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 192], ["created_at", "2019-06-22 17:50:19.092598"], ["updated_at", "2019-06-22 17:50:19.092598"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 193], ["created_at", "2019-06-22 17:50:19.094493"], ["updated_at", "2019-06-22 17:50:19.094493"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.101589"], ["updated_at", "2019-06-22 17:50:19.101589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:19.103957"], ["updated_at", "2019-06-22 17:50:19.103957"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 194], ["author_id", 86]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 194], ["created_at", "2019-06-22 17:50:19.107684"], ["updated_at", "2019-06-22 17:50:19.107684"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.111005"], ["updated_at", "2019-06-22 17:50:19.111005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.113410"], ["updated_at", "2019-06-22 17:50:19.113410"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.115586"], ["updated_at", "2019-06-22 17:50:19.115586"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.117537"], ["updated_at", "2019-06-22 17:50:19.117537"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 195], ["created_at", "2019-06-22 17:50:19.119789"], ["updated_at", "2019-06-22 17:50:19.119789"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 196], ["created_at", "2019-06-22 17:50:19.121830"], ["updated_at", "2019-06-22 17:50:19.121830"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 197], ["created_at", "2019-06-22 17:50:19.123697"], ["updated_at", "2019-06-22 17:50:19.123697"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 198], ["created_at", "2019-06-22 17:50:19.125772"], ["updated_at", "2019-06-22 17:50:19.125772"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 195], ["created_at", "2019-06-22 17:50:19.127505"], ["updated_at", "2019-06-22 17:50:19.127505"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 196], ["created_at", "2019-06-22 17:50:19.129151"], ["updated_at", "2019-06-22 17:50:19.129151"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 197], ["created_at", "2019-06-22 17:50:19.130867"], ["updated_at", "2019-06-22 17:50:19.130867"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 195], ["created_at", "2019-06-22 17:50:19.132437"], ["updated_at", "2019-06-22 17:50:19.132437"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 196], ["created_at", "2019-06-22 17:50:19.134412"], ["updated_at", "2019-06-22 17:50:19.134412"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 195], ["created_at", "2019-06-22 17:50:19.136174"], ["updated_at", "2019-06-22 17:50:19.136174"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.142713"], ["updated_at", "2019-06-22 17:50:19.142713"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 199], ["created_at", "2019-06-20 17:50:19.143773"], ["updated_at", "2019-06-22 17:50:19.144832"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 199], ["created_at", "2019-06-19 17:50:19.145803"], ["updated_at", "2019-06-22 17:50:19.146586"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 199], ["created_at", "2019-06-18 17:50:19.147474"], ["updated_at", "2019-06-22 17:50:19.148265"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:19.151966"], ["updated_at", "2019-06-22 17:50:19.151966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 200], ["created_at", "2019-06-20 17:50:19.153008"], ["updated_at", "2019-06-22 17:50:19.154141"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 200], ["created_at", "2019-06-19 17:50:19.155160"], ["updated_at", "2019-06-22 17:50:19.156009"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 200], ["created_at", "2019-06-18 17:50:19.156918"], ["updated_at", "2019-06-22 17:50:19.157690"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-06-22 17:50:32.441866"], ["updated_at", "2019-06-22 17:50:32.441866"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-06-22 17:50:32.467501"], ["updated_at", "2019-06-22 17:50:32.467501"]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 201], ["author_id", 87]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-06-22 17:50:32.483234"], ["updated_at", "2019-06-22 17:50:32.483234"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 202], ["author_id", 87]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 201]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 201]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 201]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 202]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 202]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 202]]
  Rendered books/index.html.erb within layouts/application (23.2ms)
Completed 200 OK in 32ms (Views: 25.7ms | ActiveRecord: 4.3ms)
Started GET "/authors/87" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"87"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 87]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 201], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 201]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 202], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 202]]
  Rendered authors/show.html.erb within layouts/application (9.4ms)
Completed 200 OK in 15ms (Views: 11.0ms | ActiveRecord: 1.5ms)
Started GET "/books/201" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"201"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 201]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 201]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 201], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 201], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 201]]
  Rendered books/show.html.erb within layouts/application (9.8ms)
Completed 200 OK in 15ms (Views: 9.7ms | ActiveRecord: 1.5ms)
Started GET "/authors/87" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"87"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 87]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 201], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 201]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 202], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 202]]
  Rendered authors/show.html.erb within layouts/application (7.8ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:32.588732"], ["updated_at", "2019-06-22 17:50:32.588732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:32.592021"], ["updated_at", "2019-06-22 17:50:32.592021"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 203], ["author_id", 88]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:32.598618"], ["updated_at", "2019-06-22 17:50:32.598618"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 204], ["author_id", 88]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 203], ["created_at", "2019-06-22 17:50:32.615853"], ["updated_at", "2019-06-22 17:50:32.615853"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/88" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"88"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 88]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 203], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 203], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 203], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 203], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 203], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 203]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 204], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 204]]
  Rendered authors/show.html.erb within layouts/application (12.7ms)
Completed 200 OK in 23ms (Views: 20.0ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-06-22 17:50:32.648702"], ["updated_at", "2019-06-22 17:50:32.648702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-06-22 17:50:32.651098"], ["updated_at", "2019-06-22 17:50:32.651098"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 205], ["author_id", 89]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-06-22 17:50:32.654727"], ["updated_at", "2019-06-22 17:50:32.654727"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 205], ["author_id", 90]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-06-22 17:50:32.659038"], ["updated_at", "2019-06-22 17:50:32.659038"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 206], ["author_id", 90]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/89" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"89"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 89]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 205], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 205]]
  Rendered authors/show.html.erb within layouts/application (4.1ms)
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.9ms)
Started DELETE "/authors/89" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"89"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 89]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 205[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 205]]
  [1m[36mBookAuthor Load (0.1ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 205]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 99]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 100]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 205]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 89]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 89]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 10ms (ActiveRecord: 2.5ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 206]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 206]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 206]]
  Rendered books/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:32.701451"], ["updated_at", "2019-06-22 17:50:32.701451"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:32.703816"], ["updated_at", "2019-06-22 17:50:32.703816"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 207], ["author_id", 91]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:32.708416"], ["updated_at", "2019-06-22 17:50:32.708416"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 207], ["author_id", 92]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:32.712751"], ["updated_at", "2019-06-22 17:50:32.712751"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 208], ["author_id", 91]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 17:50:32.717249"], ["updated_at", "2019-06-22 17:50:32.717249"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 209], ["author_id", 91]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/91" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"91"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 91]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 207], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 207]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 208], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 208]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 209], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 209]]
  Rendered authors/show.html.erb within layouts/application (7.4ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 17:50:32.741223"], ["updated_at", "2019-06-22 17:50:32.741223"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 17:50:32.743461"], ["updated_at", "2019-06-22 17:50:32.743461"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 210], ["author_id", 93]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:32.746759"], ["updated_at", "2019-06-22 17:50:32.746759"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 210], ["author_id", 94]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 17:50:32.752154"], ["updated_at", "2019-06-22 17:50:32.752154"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 211], ["author_id", 93]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 17:50:32.757385"], ["updated_at", "2019-06-22 17:50:32.757385"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 212], ["author_id", 93]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/93" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"93"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 93]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 210], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 210]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 211], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 211]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 212], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 212]]
  Rendered authors/show.html.erb within layouts/application (7.5ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.775763"], ["updated_at", "2019-06-22 17:50:32.775763"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 213], ["created_at", "2019-06-22 17:50:32.778055"], ["updated_at", "2019-06-22 17:50:32.778055"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 213], ["created_at", "2019-06-22 17:50:32.779807"], ["updated_at", "2019-06-22 17:50:32.779807"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 213], ["created_at", "2019-06-22 17:50:32.781514"], ["updated_at", "2019-06-22 17:50:32.781514"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 213], ["created_at", "2019-06-22 17:50:32.783890"], ["updated_at", "2019-06-22 17:50:32.783890"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 213]]
  Rendered books/index.html.erb within layouts/application (8.4ms)
Completed 200 OK in 10ms (Views: 7.1ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 213]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.802314"], ["updated_at", "2019-06-22 17:50:32.802314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.804520"], ["updated_at", "2019-06-22 17:50:32.804520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.806496"], ["updated_at", "2019-06-22 17:50:32.806496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.809001"], ["updated_at", "2019-06-22 17:50:32.809001"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 214], ["created_at", "2019-06-22 17:50:32.811062"], ["updated_at", "2019-06-22 17:50:32.811062"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 215], ["created_at", "2019-06-22 17:50:32.812889"], ["updated_at", "2019-06-22 17:50:32.812889"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 216], ["created_at", "2019-06-22 17:50:32.814744"], ["updated_at", "2019-06-22 17:50:32.814744"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 217], ["created_at", "2019-06-22 17:50:32.816928"], ["updated_at", "2019-06-22 17:50:32.816928"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 214], ["created_at", "2019-06-22 17:50:32.818687"], ["updated_at", "2019-06-22 17:50:32.818687"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 215], ["created_at", "2019-06-22 17:50:32.820260"], ["updated_at", "2019-06-22 17:50:32.820260"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 216], ["created_at", "2019-06-22 17:50:32.822313"], ["updated_at", "2019-06-22 17:50:32.822313"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 214], ["created_at", "2019-06-22 17:50:32.824052"], ["updated_at", "2019-06-22 17:50:32.824052"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 215], ["created_at", "2019-06-22 17:50:32.825684"], ["updated_at", "2019-06-22 17:50:32.825684"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 214], ["created_at", "2019-06-22 17:50:32.827385"], ["updated_at", "2019-06-22 17:50:32.827385"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 217]]
  Rendered books/index.html.erb within layouts/application (18.1ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 4.0ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 214]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 214]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 215]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 215]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 216]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 216]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 217]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 217]]
  Rendered books/index.html.erb within layouts/application (17.8ms)
Completed 200 OK in 19ms (Views: 14.5ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.874546"], ["updated_at", "2019-06-22 17:50:32.874546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.876644"], ["updated_at", "2019-06-22 17:50:32.876644"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.878737"], ["updated_at", "2019-06-22 17:50:32.878737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.880857"], ["updated_at", "2019-06-22 17:50:32.880857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 218], ["created_at", "2019-06-22 17:50:32.882802"], ["updated_at", "2019-06-22 17:50:32.882802"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 219], ["created_at", "2019-06-22 17:50:32.884816"], ["updated_at", "2019-06-22 17:50:32.884816"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 220], ["created_at", "2019-06-22 17:50:32.886871"], ["updated_at", "2019-06-22 17:50:32.886871"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 221], ["created_at", "2019-06-22 17:50:32.888687"], ["updated_at", "2019-06-22 17:50:32.888687"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 218], ["created_at", "2019-06-22 17:50:32.890255"], ["updated_at", "2019-06-22 17:50:32.890255"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 219], ["created_at", "2019-06-22 17:50:32.891822"], ["updated_at", "2019-06-22 17:50:32.891822"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 220], ["created_at", "2019-06-22 17:50:32.893354"], ["updated_at", "2019-06-22 17:50:32.893354"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 218], ["created_at", "2019-06-22 17:50:32.894921"], ["updated_at", "2019-06-22 17:50:32.894921"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 219], ["created_at", "2019-06-22 17:50:32.896615"], ["updated_at", "2019-06-22 17:50:32.896615"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 218], ["created_at", "2019-06-22 17:50:32.898358"], ["updated_at", "2019-06-22 17:50:32.898358"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 218]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 221]]
  Rendered books/index.html.erb within layouts/application (17.7ms)
Completed 200 OK in 19ms (Views: 14.6ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 221]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 221]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 220]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 220]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 219]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 219]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 218]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 218]]
  Rendered books/index.html.erb within layouts/application (16.9ms)
Completed 200 OK in 18ms (Views: 13.9ms | ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.944335"], ["updated_at", "2019-06-22 17:50:32.944335"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.946449"], ["updated_at", "2019-06-22 17:50:32.946449"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.948378"], ["updated_at", "2019-06-22 17:50:32.948378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:32.950740"], ["updated_at", "2019-06-22 17:50:32.950740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 222], ["created_at", "2019-06-22 17:50:32.952800"], ["updated_at", "2019-06-22 17:50:32.952800"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 223], ["created_at", "2019-06-22 17:50:32.954628"], ["updated_at", "2019-06-22 17:50:32.954628"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 224], ["created_at", "2019-06-22 17:50:32.956405"], ["updated_at", "2019-06-22 17:50:32.956405"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 225], ["created_at", "2019-06-22 17:50:32.958352"], ["updated_at", "2019-06-22 17:50:32.958352"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 222], ["created_at", "2019-06-22 17:50:32.960094"], ["updated_at", "2019-06-22 17:50:32.960094"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 223], ["created_at", "2019-06-22 17:50:32.961914"], ["updated_at", "2019-06-22 17:50:32.961914"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 224], ["created_at", "2019-06-22 17:50:32.963740"], ["updated_at", "2019-06-22 17:50:32.963740"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 222], ["created_at", "2019-06-22 17:50:32.965540"], ["updated_at", "2019-06-22 17:50:32.965540"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 223], ["created_at", "2019-06-22 17:50:32.967371"], ["updated_at", "2019-06-22 17:50:32.967371"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 222], ["created_at", "2019-06-22 17:50:32.969091"], ["updated_at", "2019-06-22 17:50:32.969091"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 225]]
  Rendered books/index.html.erb within layouts/application (22.1ms)
Completed 200 OK in 23ms (Views: 18.8ms | ActiveRecord: 4.1ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-06-22 11:50:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 225]]
  Rendered books/index.html.erb within layouts/application (19.0ms)
Completed 200 OK in 20ms (Views: 14.6ms | ActiveRecord: 5.0ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 225]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 225]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 224]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 224]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 223]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 223]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 222]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 222]]
  Rendered books/index.html.erb within layouts/application (17.4ms)
Completed 200 OK in 18ms (Views: 14.2ms | ActiveRecord: 3.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.042365"], ["updated_at", "2019-06-22 17:50:33.042365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.044459"], ["updated_at", "2019-06-22 17:50:33.044459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.046309"], ["updated_at", "2019-06-22 17:50:33.046309"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.048273"], ["updated_at", "2019-06-22 17:50:33.048273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 226], ["created_at", "2019-06-22 17:50:33.050221"], ["updated_at", "2019-06-22 17:50:33.050221"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 227], ["created_at", "2019-06-22 17:50:33.051983"], ["updated_at", "2019-06-22 17:50:33.051983"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 228], ["created_at", "2019-06-22 17:50:33.053683"], ["updated_at", "2019-06-22 17:50:33.053683"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 229], ["created_at", "2019-06-22 17:50:33.055512"], ["updated_at", "2019-06-22 17:50:33.055512"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 226], ["created_at", "2019-06-22 17:50:33.057059"], ["updated_at", "2019-06-22 17:50:33.057059"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 227], ["created_at", "2019-06-22 17:50:33.058599"], ["updated_at", "2019-06-22 17:50:33.058599"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 228], ["created_at", "2019-06-22 17:50:33.060135"], ["updated_at", "2019-06-22 17:50:33.060135"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 226], ["created_at", "2019-06-22 17:50:33.061668"], ["updated_at", "2019-06-22 17:50:33.061668"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 227], ["created_at", "2019-06-22 17:50:33.063187"], ["updated_at", "2019-06-22 17:50:33.063187"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 226], ["created_at", "2019-06-22 17:50:33.064721"], ["updated_at", "2019-06-22 17:50:33.064721"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 229]]
  Rendered books/index.html.erb within layouts/application (18.5ms)
Completed 200 OK in 20ms (Views: 15.0ms | ActiveRecord: 4.2ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (226, 227, 228, 229)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 229]]
  Rendered books/index.html.erb within layouts/application (16.6ms)
Completed 200 OK in 20ms (Views: 13.7ms | ActiveRecord: 4.1ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (229, 228, 227, 226)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 229]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 229]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 228]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 228]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 227]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 227]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 226]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 226]]
  Rendered books/index.html.erb within layouts/application (15.9ms)
Completed 200 OK in 19ms (Views: 13.2ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.134722"], ["updated_at", "2019-06-22 17:50:33.134722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.137018"], ["updated_at", "2019-06-22 17:50:33.137018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.139074"], ["updated_at", "2019-06-22 17:50:33.139074"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.141092"], ["updated_at", "2019-06-22 17:50:33.141092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 230], ["created_at", "2019-06-22 17:50:33.143116"], ["updated_at", "2019-06-22 17:50:33.143116"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 231], ["created_at", "2019-06-22 17:50:33.144927"], ["updated_at", "2019-06-22 17:50:33.144927"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 232], ["created_at", "2019-06-22 17:50:33.146741"], ["updated_at", "2019-06-22 17:50:33.146741"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 233], ["created_at", "2019-06-22 17:50:33.148546"], ["updated_at", "2019-06-22 17:50:33.148546"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 230], ["created_at", "2019-06-22 17:50:33.150221"], ["updated_at", "2019-06-22 17:50:33.150221"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 231], ["created_at", "2019-06-22 17:50:33.151852"], ["updated_at", "2019-06-22 17:50:33.151852"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 232], ["created_at", "2019-06-22 17:50:33.153510"], ["updated_at", "2019-06-22 17:50:33.153510"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 230], ["created_at", "2019-06-22 17:50:33.155112"], ["updated_at", "2019-06-22 17:50:33.155112"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 231], ["created_at", "2019-06-22 17:50:33.156670"], ["updated_at", "2019-06-22 17:50:33.156670"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 230], ["created_at", "2019-06-22 17:50:33.158216"], ["updated_at", "2019-06-22 17:50:33.158216"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 230]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 231]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 232]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 233]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 232]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 231]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 230]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 230]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 230]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 231]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 231]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 231]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 232]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 232]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 232]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 233]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 233]]
  Rendered books/index.html.erb within layouts/application (17.8ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 3.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 230]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 231]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 232]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.189868"], ["updated_at", "2019-06-22 17:50:33.189868"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.192082"], ["updated_at", "2019-06-22 17:50:33.192082"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 234], ["author_id", 95]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 234], ["created_at", "2019-06-22 17:50:33.195409"], ["updated_at", "2019-06-22 17:50:33.195409"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 234], ["created_at", "2019-06-22 17:50:33.197141"], ["updated_at", "2019-06-22 17:50:33.197141"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 234], ["created_at", "2019-06-22 17:50:33.199096"], ["updated_at", "2019-06-22 17:50:33.199096"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 234], ["created_at", "2019-06-22 17:50:33.200895"], ["updated_at", "2019-06-22 17:50:33.200895"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/234" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"234"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 234]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 234], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 234], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 234]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.216493"], ["updated_at", "2019-06-22 17:50:33.216493"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.218728"], ["updated_at", "2019-06-22 17:50:33.218728"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 235], ["author_id", 96]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 235], ["created_at", "2019-06-22 17:50:33.222741"], ["updated_at", "2019-06-22 17:50:33.222741"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 235], ["created_at", "2019-06-22 17:50:33.224738"], ["updated_at", "2019-06-22 17:50:33.224738"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 235], ["created_at", "2019-06-22 17:50:33.226460"], ["updated_at", "2019-06-22 17:50:33.226460"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 235], ["created_at", "2019-06-22 17:50:33.228205"], ["updated_at", "2019-06-22 17:50:33.228205"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/235" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"235"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 235]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 235]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 235], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 235], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 235]]
  Rendered books/show.html.erb within layouts/application (5.8ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.244218"], ["updated_at", "2019-06-22 17:50:33.244218"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.246318"], ["updated_at", "2019-06-22 17:50:33.246318"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 236], ["author_id", 97]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 236], ["created_at", "2019-06-22 17:50:33.249767"], ["updated_at", "2019-06-22 17:50:33.249767"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 236], ["created_at", "2019-06-22 17:50:33.251409"], ["updated_at", "2019-06-22 17:50:33.251409"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 236], ["created_at", "2019-06-22 17:50:33.253094"], ["updated_at", "2019-06-22 17:50:33.253094"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 236], ["created_at", "2019-06-22 17:50:33.254747"], ["updated_at", "2019-06-22 17:50:33.254747"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/236" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"236"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 236], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 236]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 236]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 236], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 236], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 236]]
  Rendered books/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 236]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-06-22 17:50:33.268477"], ["updated_at", "2019-06-22 17:50:33.268477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/237" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"237"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 237], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 237]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 237]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 237], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 237], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 237]]
  Rendered books/show.html.erb within layouts/application (3.7ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 1.0ms)
Started DELETE "/books/237" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"237"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 237], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 237]]
  [1m[36mBookAuthor Load (0.1ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 237]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 237]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.291296"], ["updated_at", "2019-06-22 17:50:33.291296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.293379"], ["updated_at", "2019-06-22 17:50:33.293379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.295428"], ["updated_at", "2019-06-22 17:50:33.295428"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 238], ["author_id", 98]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:33.298937"], ["updated_at", "2019-06-22 17:50:33.298937"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 238], ["author_id", 99]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 17:50:33.302465"], ["updated_at", "2019-06-22 17:50:33.302465"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 239], ["author_id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 238]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 238]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 238]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 239]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 239]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 239]]
  Rendered books/index.html.erb within layouts/application (8.2ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.325416"], ["updated_at", "2019-06-22 17:50:33.325416"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.327527"], ["updated_at", "2019-06-22 17:50:33.327527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.329609"], ["updated_at", "2019-06-22 17:50:33.329609"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 240], ["author_id", 101]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:33.332970"], ["updated_at", "2019-06-22 17:50:33.332970"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 240], ["author_id", 102]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 17:50:33.336420"], ["updated_at", "2019-06-22 17:50:33.336420"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 241], ["author_id", 103]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 240]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 240]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 240]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 241]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 241]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 241]]
  Rendered books/index.html.erb within layouts/application (8.2ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 2.1ms)
Started GET "/books/240" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"240"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 240]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 240]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 240], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 240], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 240]]
  Rendered books/show.html.erb within layouts/application (3.9ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.9ms)
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (9.8ms)
Completed 200 OK in 12ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-06-22 17:50:33.384390"], ["updated_at", "2019-06-22 17:50:33.384390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:33.392311"], ["updated_at", "2019-06-22 17:50:33.392311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:33.394863"], ["updated_at", "2019-06-22 17:50:33.394863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 242], ["author_id", 105]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 242], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.5ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 242]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 242]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 242]]
  Rendered books/index.html.erb within layouts/application (6.1ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.7ms)
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 242], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:33.428696"], ["updated_at", "2019-06-22 17:50:33.428696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:33.430943"], ["updated_at", "2019-06-22 17:50:33.430943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 243], ["author_id", 106]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:33.435459"], ["updated_at", "2019-06-22 17:50:33.435459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 243], ["author_id", 107]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 243], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 243]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 243]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 243]]
  Rendered books/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.5ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 243]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:33.456578"], ["updated_at", "2019-06-22 17:50:33.456578"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 17:50:33.467926"], ["updated_at", "2019-06-22 17:50:33.467926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 244], ["author_id", 108]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:33.473639"], ["updated_at", "2019-06-22 17:50:33.473639"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 244], ["author_id", 109]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 244], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 13ms (ActiveRecord: 2.7ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 244]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 244]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 244]]
  Rendered books/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:33.504915"], ["updated_at", "2019-06-22 17:50:33.504915"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:33.508481"], ["updated_at", "2019-06-22 17:50:33.508481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 10ms (ActiveRecord: 1.5ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-06-22 17:50:33.550177"], ["updated_at", "2019-06-22 17:50:33.550177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 10ms (ActiveRecord: 1.6ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 245]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 245]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 245]]
  Rendered books/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:33.592420"], ["updated_at", "2019-06-22 17:50:33.592420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 17:50:33.594634"], ["updated_at", "2019-06-22 17:50:33.594634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 246], ["author_id", 112]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 17:50:33.599336"], ["updated_at", "2019-06-22 17:50:33.599336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 246], ["author_id", 113]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 246], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.2ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 246]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 246]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 246]]
  Rendered books/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 1.5ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:33.615629"], ["updated_at", "2019-06-22 17:50:33.615629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.618348"], ["updated_at", "2019-06-22 17:50:33.618348"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 247], ["author_id", 114]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:33.622278"], ["updated_at", "2019-06-22 17:50:33.622278"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 247], ["author_id", 115]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 247], ["created_at", "2019-06-22 17:50:33.627832"], ["updated_at", "2019-06-22 17:50:33.627832"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 247], ["created_at", "2019-06-22 17:50:33.629618"], ["updated_at", "2019-06-22 17:50:33.629618"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 247], ["created_at", "2019-06-22 17:50:33.631208"], ["updated_at", "2019-06-22 17:50:33.631208"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/247" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"247"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 247]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 247]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 247], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 247], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 247]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:33.651478"], ["updated_at", "2019-06-22 17:50:33.651478"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.653672"], ["updated_at", "2019-06-22 17:50:33.653672"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 248], ["author_id", 116]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 17:50:33.656935"], ["updated_at", "2019-06-22 17:50:33.656935"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 248], ["author_id", 117]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 248], ["created_at", "2019-06-22 17:50:33.660096"], ["updated_at", "2019-06-22 17:50:33.660096"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 248], ["created_at", "2019-06-22 17:50:33.661732"], ["updated_at", "2019-06-22 17:50:33.661732"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 248], ["created_at", "2019-06-22 17:50:33.663279"], ["updated_at", "2019-06-22 17:50:33.663279"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/248" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"248"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 248], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 248]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 248]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 248], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 248], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 248]]
  Rendered books/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.4ms)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 1.0ms)
Started GET "/" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.700106"], ["updated_at", "2019-06-22 17:50:33.700106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.702477"], ["updated_at", "2019-06-22 17:50:33.702477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.704515"], ["updated_at", "2019-06-22 17:50:33.704515"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 249], ["author_id", 118]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.708995"], ["updated_at", "2019-06-22 17:50:33.708995"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 250], ["author_id", 119]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 249], ["created_at", "2019-06-22 17:50:33.712582"], ["updated_at", "2019-06-22 17:50:33.712582"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 250], ["created_at", "2019-06-22 17:50:33.714389"], ["updated_at", "2019-06-22 17:50:33.714389"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/249" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"249"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 249], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 249]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 249]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 249], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 249], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 249]]
  Rendered books/show.html.erb within layouts/application (4.6ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 249], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 250], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.2ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.5ms)
Started DELETE "/reviews/356" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"356"}
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 356]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.7ms)
Started GET "/reviews" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.6ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.749864"], ["updated_at", "2019-06-22 17:50:33.749864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.752210"], ["updated_at", "2019-06-22 17:50:33.752210"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 251], ["author_id", 120]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/251" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"251"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 251]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 251]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 251], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 251], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 251]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 1.0ms)
Started GET "/books/251/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"251"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 7ms (Views: 4.2ms | ActiveRecord: 0.1ms)
Started POST "/books/251/reviews" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"251"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 251], ["created_at", "2019-06-22 17:50:33.779320"], ["updated_at", "2019-06-22 17:50:33.779320"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/251
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/251" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"251"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 251]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 251]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 251], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 251], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 251]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.796972"], ["updated_at", "2019-06-22 17:50:33.796972"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.799337"], ["updated_at", "2019-06-22 17:50:33.799337"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 252], ["author_id", 121]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/252" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"252"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 252]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 252], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 252], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 252]]
  Rendered books/show.html.erb within layouts/application (4.2ms)
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 1.1ms)
Started GET "/books/252/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"252"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.1ms)
Started POST "/books/252/reviews" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"252"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 252], ["created_at", "2019-06-22 17:50:33.822850"], ["updated_at", "2019-06-22 17:50:33.822850"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/252
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/252" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"252"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 252]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 252], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 252], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 252]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.2ms)
Started GET "/books/252/reviews/new" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"252"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.2ms)
Started POST "/books/252/reviews" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"252"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/252
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/books/252" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"252"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 252]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 252], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 252], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 252]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.855387"], ["updated_at", "2019-06-22 17:50:33.855387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.857469"], ["updated_at", "2019-06-22 17:50:33.857469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.859744"], ["updated_at", "2019-06-22 17:50:33.859744"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 253], ["author_id", 122]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.863390"], ["updated_at", "2019-06-22 17:50:33.863390"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 254], ["author_id", 123]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 253], ["created_at", "2019-06-22 17:50:33.867200"], ["updated_at", "2019-06-22 17:50:33.867200"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 254], ["created_at", "2019-06-22 17:50:33.869149"], ["updated_at", "2019-06-22 17:50:33.869149"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 253], ["created_at", "2019-06-22 17:50:33.870859"], ["updated_at", "2019-06-22 17:50:33.870859"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/253" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"253"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 253], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 253]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 253]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 253], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 253], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 253]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 253], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 254], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.894550"], ["updated_at", "2019-06-22 17:50:33.894550"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.896694"], ["updated_at", "2019-06-22 17:50:33.896694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.899088"], ["updated_at", "2019-06-22 17:50:33.899088"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 255], ["author_id", 124]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.902882"], ["updated_at", "2019-06-22 17:50:33.902882"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 256], ["author_id", 125]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 255], ["created_at", "2019-06-22 17:50:33.906767"], ["updated_at", "2019-06-22 17:50:33.906767"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 256], ["created_at", "2019-06-22 17:50:33.908749"], ["updated_at", "2019-06-22 17:50:33.908749"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 255], ["created_at", "2019-06-22 17:50:33.910358"], ["updated_at", "2019-06-22 17:50:33.910358"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/255" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"255"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 255]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 255]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 255], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 255], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 255]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 256], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.933258"], ["updated_at", "2019-06-22 17:50:33.933258"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.935659"], ["updated_at", "2019-06-22 17:50:33.935659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 257], ["created_at", "2019-06-20 17:50:33.936749"], ["updated_at", "2019-06-22 17:50:33.938126"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 258], ["created_at", "2019-06-19 17:50:33.939468"], ["updated_at", "2019-06-22 17:50:33.940495"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.957294"], ["updated_at", "2019-06-22 17:50:33.957294"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.959610"], ["updated_at", "2019-06-22 17:50:33.959610"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 259], ["created_at", "2019-06-20 17:50:33.960675"], ["updated_at", "2019-06-22 17:50:33.961891"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 260], ["created_at", "2019-06-19 17:50:33.963012"], ["updated_at", "2019-06-22 17:50:33.964162"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:33.979310"], ["updated_at", "2019-06-22 17:50:33.979310"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:33.981453"], ["updated_at", "2019-06-22 17:50:33.981453"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 261], ["author_id", 126]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 261], ["created_at", "2019-06-22 17:50:33.985353"], ["updated_at", "2019-06-22 17:50:33.985353"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 261]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 261]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 261]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 261]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 261]]
  Rendered books/index.html.erb within layouts/application (7.6ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 1.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.3ms)
Started GET "/books/261" for 127.0.0.1 at 2019-06-22 11:50:34 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"261"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 261]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 261]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 261], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 261], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 261]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:34 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.3ms)
Started GET "/authors/126" for 127.0.0.1 at 2019-06-22 11:50:34 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"126"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 126]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 261], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 261], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 261], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 261], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 261], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 261]]
  Rendered authors/show.html.erb within layouts/application (6.8ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 11:50:34 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", ""], ["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.107933"], ["updated_at", "2019-06-22 17:50:34.107933"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:34.110385"], ["updated_at", "2019-06-22 17:50:34.110385"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 262], ["author_id", 127]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 262], ["created_at", "2019-06-22 17:50:34.113931"], ["updated_at", "2019-06-22 17:50:34.113931"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 262], ["created_at", "2019-06-22 17:50:34.115853"], ["updated_at", "2019-06-22 17:50:34.115853"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 262]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 17:50:34.119753"], ["updated_at", "2019-06-22 17:50:34.119753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.123193"], ["updated_at", "2019-06-22 17:50:34.123193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:34.125187"], ["updated_at", "2019-06-22 17:50:34.125187"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 264], ["author_id", 128]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 264], ["created_at", "2019-06-22 17:50:34.128674"], ["updated_at", "2019-06-22 17:50:34.128674"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 264], ["created_at", "2019-06-22 17:50:34.130655"], ["updated_at", "2019-06-22 17:50:34.130655"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 264]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.135072"], ["updated_at", "2019-06-22 17:50:34.135072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 265], ["created_at", "2019-06-22 17:50:34.137297"], ["updated_at", "2019-06-22 17:50:34.137297"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 265], ["created_at", "2019-06-22 17:50:34.139073"], ["updated_at", "2019-06-22 17:50:34.139073"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 265], ["created_at", "2019-06-22 17:50:34.141015"], ["updated_at", "2019-06-22 17:50:34.141015"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 265], ["created_at", "2019-06-22 17:50:34.142783"], ["updated_at", "2019-06-22 17:50:34.142783"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 265], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.146765"], ["updated_at", "2019-06-22 17:50:34.146765"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 266], ["created_at", "2019-06-22 17:50:34.148727"], ["updated_at", "2019-06-22 17:50:34.148727"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 266], ["created_at", "2019-06-22 17:50:34.150752"], ["updated_at", "2019-06-22 17:50:34.150752"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 266], ["created_at", "2019-06-22 17:50:34.152665"], ["updated_at", "2019-06-22 17:50:34.152665"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 266], ["created_at", "2019-06-22 17:50:34.154286"], ["updated_at", "2019-06-22 17:50:34.154286"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 266], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.158657"], ["updated_at", "2019-06-22 17:50:34.158657"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 267], ["created_at", "2019-06-22 17:50:34.160687"], ["updated_at", "2019-06-22 17:50:34.160687"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 267], ["created_at", "2019-06-22 17:50:34.162374"], ["updated_at", "2019-06-22 17:50:34.162374"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 267], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.166613"], ["updated_at", "2019-06-22 17:50:34.166613"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.168772"], ["updated_at", "2019-06-22 17:50:34.168772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.170887"], ["updated_at", "2019-06-22 17:50:34.170887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.174680"], ["updated_at", "2019-06-22 17:50:34.174680"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.176833"], ["updated_at", "2019-06-22 17:50:34.176833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.179015"], ["updated_at", "2019-06-22 17:50:34.179015"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.183108"], ["updated_at", "2019-06-22 17:50:34.183108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.185199"], ["updated_at", "2019-06-22 17:50:34.185199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 274], ["created_at", "2019-06-22 17:50:34.187127"], ["updated_at", "2019-06-22 17:50:34.187127"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 274], ["created_at", "2019-06-22 17:50:34.189137"], ["updated_at", "2019-06-22 17:50:34.189137"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 275], ["created_at", "2019-06-22 17:50:34.190957"], ["updated_at", "2019-06-22 17:50:34.190957"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (275, 274)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.195742"], ["updated_at", "2019-06-22 17:50:34.195742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.197956"], ["updated_at", "2019-06-22 17:50:34.197956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 276], ["created_at", "2019-06-22 17:50:34.200169"], ["updated_at", "2019-06-22 17:50:34.200169"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 276], ["created_at", "2019-06-22 17:50:34.201978"], ["updated_at", "2019-06-22 17:50:34.201978"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 277], ["created_at", "2019-06-22 17:50:34.203803"], ["updated_at", "2019-06-22 17:50:34.203803"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (276, 277)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.208960"], ["updated_at", "2019-06-22 17:50:34.208960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.211290"], ["updated_at", "2019-06-22 17:50:34.211290"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.213373"], ["updated_at", "2019-06-22 17:50:34.213373"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.215467"], ["updated_at", "2019-06-22 17:50:34.215467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 278], ["created_at", "2019-06-22 17:50:34.217647"], ["updated_at", "2019-06-22 17:50:34.217647"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 279], ["created_at", "2019-06-22 17:50:34.219580"], ["updated_at", "2019-06-22 17:50:34.219580"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 280], ["created_at", "2019-06-22 17:50:34.221690"], ["updated_at", "2019-06-22 17:50:34.221690"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 281], ["created_at", "2019-06-22 17:50:34.223692"], ["updated_at", "2019-06-22 17:50:34.223692"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.228012"], ["updated_at", "2019-06-22 17:50:34.228012"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.230239"], ["updated_at", "2019-06-22 17:50:34.230239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.232744"], ["updated_at", "2019-06-22 17:50:34.232744"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.234808"], ["updated_at", "2019-06-22 17:50:34.234808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 282], ["created_at", "2019-06-22 17:50:34.236769"], ["updated_at", "2019-06-22 17:50:34.236769"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 283], ["created_at", "2019-06-22 17:50:34.239028"], ["updated_at", "2019-06-22 17:50:34.239028"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 284], ["created_at", "2019-06-22 17:50:34.240828"], ["updated_at", "2019-06-22 17:50:34.240828"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 285], ["created_at", "2019-06-22 17:50:34.242574"], ["updated_at", "2019-06-22 17:50:34.242574"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.246706"], ["updated_at", "2019-06-22 17:50:34.246706"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.248783"], ["updated_at", "2019-06-22 17:50:34.248783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.250907"], ["updated_at", "2019-06-22 17:50:34.250907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.253074"], ["updated_at", "2019-06-22 17:50:34.253074"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 286], ["created_at", "2019-06-22 17:50:34.254970"], ["updated_at", "2019-06-22 17:50:34.254970"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 287], ["created_at", "2019-06-22 17:50:34.256798"], ["updated_at", "2019-06-22 17:50:34.256798"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 288], ["created_at", "2019-06-22 17:50:34.258593"], ["updated_at", "2019-06-22 17:50:34.258593"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 289], ["created_at", "2019-06-22 17:50:34.260667"], ["updated_at", "2019-06-22 17:50:34.260667"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.265107"], ["updated_at", "2019-06-22 17:50:34.265107"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.267656"], ["updated_at", "2019-06-22 17:50:34.267656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.269715"], ["updated_at", "2019-06-22 17:50:34.269715"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.272394"], ["updated_at", "2019-06-22 17:50:34.272394"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 290], ["created_at", "2019-06-22 17:50:34.274394"], ["updated_at", "2019-06-22 17:50:34.274394"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 291], ["created_at", "2019-06-22 17:50:34.276244"], ["updated_at", "2019-06-22 17:50:34.276244"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 292], ["created_at", "2019-06-22 17:50:34.278216"], ["updated_at", "2019-06-22 17:50:34.278216"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 293], ["created_at", "2019-06-22 17:50:34.279947"], ["updated_at", "2019-06-22 17:50:34.279947"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.287108"], ["updated_at", "2019-06-22 17:50:34.287108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 17:50:34.291265"], ["updated_at", "2019-06-22 17:50:34.291265"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 294], ["author_id", 129]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 294], ["created_at", "2019-06-22 17:50:34.295011"], ["updated_at", "2019-06-22 17:50:34.295011"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.299143"], ["updated_at", "2019-06-22 17:50:34.299143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.301322"], ["updated_at", "2019-06-22 17:50:34.301322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.303373"], ["updated_at", "2019-06-22 17:50:34.303373"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.305335"], ["updated_at", "2019-06-22 17:50:34.305335"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 295], ["created_at", "2019-06-22 17:50:34.307391"], ["updated_at", "2019-06-22 17:50:34.307391"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 296], ["created_at", "2019-06-22 17:50:34.309560"], ["updated_at", "2019-06-22 17:50:34.309560"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 297], ["created_at", "2019-06-22 17:50:34.311433"], ["updated_at", "2019-06-22 17:50:34.311433"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 298], ["created_at", "2019-06-22 17:50:34.313299"], ["updated_at", "2019-06-22 17:50:34.313299"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 295], ["created_at", "2019-06-22 17:50:34.314862"], ["updated_at", "2019-06-22 17:50:34.314862"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 296], ["created_at", "2019-06-22 17:50:34.316773"], ["updated_at", "2019-06-22 17:50:34.316773"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 297], ["created_at", "2019-06-22 17:50:34.318480"], ["updated_at", "2019-06-22 17:50:34.318480"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 295], ["created_at", "2019-06-22 17:50:34.320065"], ["updated_at", "2019-06-22 17:50:34.320065"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 296], ["created_at", "2019-06-22 17:50:34.321969"], ["updated_at", "2019-06-22 17:50:34.321969"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 295], ["created_at", "2019-06-22 17:50:34.323890"], ["updated_at", "2019-06-22 17:50:34.323890"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.330711"], ["updated_at", "2019-06-22 17:50:34.330711"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 299], ["created_at", "2019-06-20 17:50:34.331815"], ["updated_at", "2019-06-22 17:50:34.332897"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 299], ["created_at", "2019-06-19 17:50:34.333875"], ["updated_at", "2019-06-22 17:50:34.334647"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 299], ["created_at", "2019-06-18 17:50:34.335602"], ["updated_at", "2019-06-22 17:50:34.336430"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 17:50:34.340332"], ["updated_at", "2019-06-22 17:50:34.340332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 300], ["created_at", "2019-06-20 17:50:34.341389"], ["updated_at", "2019-06-22 17:50:34.342410"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 300], ["created_at", "2019-06-19 17:50:34.343388"], ["updated_at", "2019-06-22 17:50:34.344188"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 300], ["created_at", "2019-06-18 17:50:34.345133"], ["updated_at", "2019-06-22 17:50:34.345935"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-06-22 18:08:23.873967"], ["updated_at", "2019-06-22 18:08:23.873967"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-06-22 18:08:23.904811"], ["updated_at", "2019-06-22 18:08:23.904811"]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 301], ["author_id", 130]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-06-22 18:08:23.921961"], ["updated_at", "2019-06-22 18:08:23.921961"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 302], ["author_id", 130]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:23 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 302]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 302]]
  Rendered books/index.html.erb within layouts/application (31.0ms)
Completed 200 OK in 44ms (Views: 36.1ms | ActiveRecord: 4.8ms)
Started GET "/authors/130" for 127.0.0.1 at 2019-06-22 12:08:23 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"130"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 130], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 130]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 301], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 301]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 302], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 302]]
  Rendered authors/show.html.erb within layouts/application (9.4ms)
Completed 200 OK in 16ms (Views: 11.0ms | ActiveRecord: 1.6ms)
Started GET "/books/301" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"301"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 301], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 301]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 301], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 301], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 301]]
  Rendered books/show.html.erb within layouts/application (10.0ms)
Completed 200 OK in 15ms (Views: 9.7ms | ActiveRecord: 1.3ms)
Started GET "/authors/130" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"130"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 130], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 130]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 301], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 301]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 302], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 302]]
  Rendered authors/show.html.erb within layouts/application (9.8ms)
Completed 200 OK in 12ms (Views: 9.4ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:24.059114"], ["updated_at", "2019-06-22 18:08:24.059114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:24.062306"], ["updated_at", "2019-06-22 18:08:24.062306"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 303], ["author_id", 131]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:24.069119"], ["updated_at", "2019-06-22 18:08:24.069119"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 304], ["author_id", 131]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 303], ["created_at", "2019-06-22 18:08:24.086547"], ["updated_at", "2019-06-22 18:08:24.086547"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/131" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"131"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 131]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 303], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 303], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 303], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 303], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 303], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 303]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 304], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 304]]
  Rendered authors/show.html.erb within layouts/application (13.9ms)
Completed 200 OK in 16ms (Views: 13.4ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-06-22 18:08:24.121750"], ["updated_at", "2019-06-22 18:08:24.121750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-06-22 18:08:24.123975"], ["updated_at", "2019-06-22 18:08:24.123975"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 305], ["author_id", 132]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-06-22 18:08:24.127443"], ["updated_at", "2019-06-22 18:08:24.127443"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 305], ["author_id", 133]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-06-22 18:08:24.132268"], ["updated_at", "2019-06-22 18:08:24.132268"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 306], ["author_id", 133]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/132" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"132"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 132]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 305], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 305]]
  Rendered authors/show.html.erb within layouts/application (3.6ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.9ms)
Started DELETE "/authors/132" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"132"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 132]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 305[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 305]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 305]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 146]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 147]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 305]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.1ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 132]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 132]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.6ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 306]]
  [1m[36mAuthor Load (0.5ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 306]]
  Rendered books/index.html.erb within layouts/application (7.7ms)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:24.178515"], ["updated_at", "2019-06-22 18:08:24.178515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:24.181315"], ["updated_at", "2019-06-22 18:08:24.181315"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 307], ["author_id", 134]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:24.184765"], ["updated_at", "2019-06-22 18:08:24.184765"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 307], ["author_id", 135]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:24.189299"], ["updated_at", "2019-06-22 18:08:24.189299"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 308], ["author_id", 134]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 18:08:24.193919"], ["updated_at", "2019-06-22 18:08:24.193919"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 309], ["author_id", 134]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/134" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"134"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 134], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 134]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 307], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 307]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 308], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 308]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 309], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 309]]
  Rendered authors/show.html.erb within layouts/application (7.8ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:24.219316"], ["updated_at", "2019-06-22 18:08:24.219316"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:24.221601"], ["updated_at", "2019-06-22 18:08:24.221601"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 310], ["author_id", 136]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:24.224980"], ["updated_at", "2019-06-22 18:08:24.224980"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 310], ["author_id", 137]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:24.229614"], ["updated_at", "2019-06-22 18:08:24.229614"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 311], ["author_id", 136]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 18:08:24.234464"], ["updated_at", "2019-06-22 18:08:24.234464"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 312], ["author_id", 136]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/136" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"136"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 136]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 310], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 310]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 311], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 311]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 312], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 312]]
  Rendered authors/show.html.erb within layouts/application (8.4ms)
Completed 200 OK in 10ms (Views: 7.5ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.254338"], ["updated_at", "2019-06-22 18:08:24.254338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 313], ["created_at", "2019-06-22 18:08:24.256576"], ["updated_at", "2019-06-22 18:08:24.256576"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 313], ["created_at", "2019-06-22 18:08:24.258432"], ["updated_at", "2019-06-22 18:08:24.258432"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 313], ["created_at", "2019-06-22 18:08:24.260269"], ["updated_at", "2019-06-22 18:08:24.260269"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 313], ["created_at", "2019-06-22 18:08:24.262393"], ["updated_at", "2019-06-22 18:08:24.262393"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 313]]
  Rendered books/index.html.erb within layouts/application (11.8ms)
Completed 200 OK in 13ms (Views: 10.0ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 313]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.285482"], ["updated_at", "2019-06-22 18:08:24.285482"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.288180"], ["updated_at", "2019-06-22 18:08:24.288180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.290345"], ["updated_at", "2019-06-22 18:08:24.290345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.292642"], ["updated_at", "2019-06-22 18:08:24.292642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 314], ["created_at", "2019-06-22 18:08:24.294748"], ["updated_at", "2019-06-22 18:08:24.294748"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 315], ["created_at", "2019-06-22 18:08:24.297511"], ["updated_at", "2019-06-22 18:08:24.297511"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 316], ["created_at", "2019-06-22 18:08:24.299893"], ["updated_at", "2019-06-22 18:08:24.299893"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 317], ["created_at", "2019-06-22 18:08:24.302573"], ["updated_at", "2019-06-22 18:08:24.302573"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 314], ["created_at", "2019-06-22 18:08:24.304385"], ["updated_at", "2019-06-22 18:08:24.304385"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 315], ["created_at", "2019-06-22 18:08:24.305980"], ["updated_at", "2019-06-22 18:08:24.305980"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 316], ["created_at", "2019-06-22 18:08:24.307752"], ["updated_at", "2019-06-22 18:08:24.307752"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 314], ["created_at", "2019-06-22 18:08:24.309395"], ["updated_at", "2019-06-22 18:08:24.309395"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 315], ["created_at", "2019-06-22 18:08:24.311001"], ["updated_at", "2019-06-22 18:08:24.311001"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 314], ["created_at", "2019-06-22 18:08:24.313149"], ["updated_at", "2019-06-22 18:08:24.313149"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 317]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 315]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 316]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 317]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 317]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 317]]
  Rendered books/index.html.erb within layouts/application (17.7ms)
Completed 200 OK in 19ms (Views: 14.7ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 317]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 314]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 314]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 315]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 315]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 316]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 316]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 317]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 317]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 317]]
  Rendered books/index.html.erb within layouts/application (19.0ms)
Completed 200 OK in 20ms (Views: 15.5ms | ActiveRecord: 4.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.360931"], ["updated_at", "2019-06-22 18:08:24.360931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.363011"], ["updated_at", "2019-06-22 18:08:24.363011"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.365233"], ["updated_at", "2019-06-22 18:08:24.365233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.367286"], ["updated_at", "2019-06-22 18:08:24.367286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 318], ["created_at", "2019-06-22 18:08:24.369222"], ["updated_at", "2019-06-22 18:08:24.369222"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 319], ["created_at", "2019-06-22 18:08:24.371107"], ["updated_at", "2019-06-22 18:08:24.371107"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 320], ["created_at", "2019-06-22 18:08:24.373045"], ["updated_at", "2019-06-22 18:08:24.373045"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 321], ["created_at", "2019-06-22 18:08:24.374927"], ["updated_at", "2019-06-22 18:08:24.374927"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 318], ["created_at", "2019-06-22 18:08:24.376644"], ["updated_at", "2019-06-22 18:08:24.376644"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 319], ["created_at", "2019-06-22 18:08:24.378612"], ["updated_at", "2019-06-22 18:08:24.378612"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 320], ["created_at", "2019-06-22 18:08:24.380718"], ["updated_at", "2019-06-22 18:08:24.380718"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 318], ["created_at", "2019-06-22 18:08:24.382482"], ["updated_at", "2019-06-22 18:08:24.382482"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 319], ["created_at", "2019-06-22 18:08:24.384216"], ["updated_at", "2019-06-22 18:08:24.384216"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 318], ["created_at", "2019-06-22 18:08:24.385992"], ["updated_at", "2019-06-22 18:08:24.385992"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 321]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 318]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 319]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 320]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 321]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 321]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 321]]
  Rendered books/index.html.erb within layouts/application (18.9ms)
Completed 200 OK in 20ms (Views: 15.5ms | ActiveRecord: 4.0ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 321]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 321]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 321]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 321]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 320]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 320]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 319]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 319]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 318]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 318]]
  Rendered books/index.html.erb within layouts/application (18.1ms)
Completed 200 OK in 19ms (Views: 15.0ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.434357"], ["updated_at", "2019-06-22 18:08:24.434357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.436751"], ["updated_at", "2019-06-22 18:08:24.436751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.438750"], ["updated_at", "2019-06-22 18:08:24.438750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.440854"], ["updated_at", "2019-06-22 18:08:24.440854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 322], ["created_at", "2019-06-22 18:08:24.442912"], ["updated_at", "2019-06-22 18:08:24.442912"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 323], ["created_at", "2019-06-22 18:08:24.444896"], ["updated_at", "2019-06-22 18:08:24.444896"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 324], ["created_at", "2019-06-22 18:08:24.447288"], ["updated_at", "2019-06-22 18:08:24.447288"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 325], ["created_at", "2019-06-22 18:08:24.449356"], ["updated_at", "2019-06-22 18:08:24.449356"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 322], ["created_at", "2019-06-22 18:08:24.451200"], ["updated_at", "2019-06-22 18:08:24.451200"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 323], ["created_at", "2019-06-22 18:08:24.453218"], ["updated_at", "2019-06-22 18:08:24.453218"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 324], ["created_at", "2019-06-22 18:08:24.455109"], ["updated_at", "2019-06-22 18:08:24.455109"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 322], ["created_at", "2019-06-22 18:08:24.456951"], ["updated_at", "2019-06-22 18:08:24.456951"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 323], ["created_at", "2019-06-22 18:08:24.458686"], ["updated_at", "2019-06-22 18:08:24.458686"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 322], ["created_at", "2019-06-22 18:08:24.460513"], ["updated_at", "2019-06-22 18:08:24.460513"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 325]]
  Rendered books/index.html.erb within layouts/application (23.4ms)
Completed 200 OK in 25ms (Views: 19.9ms | ActiveRecord: 4.2ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 325]]
  Rendered books/index.html.erb within layouts/application (17.5ms)
Completed 200 OK in 19ms (Views: 14.3ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 325]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 325]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 324]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 324]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 323]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 323]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 322]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 322]]
  Rendered books/index.html.erb within layouts/application (18.3ms)
Completed 200 OK in 20ms (Views: 15.4ms | ActiveRecord: 3.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.534907"], ["updated_at", "2019-06-22 18:08:24.534907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.537011"], ["updated_at", "2019-06-22 18:08:24.537011"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.538980"], ["updated_at", "2019-06-22 18:08:24.538980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.541099"], ["updated_at", "2019-06-22 18:08:24.541099"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 326], ["created_at", "2019-06-22 18:08:24.543109"], ["updated_at", "2019-06-22 18:08:24.543109"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 327], ["created_at", "2019-06-22 18:08:24.544909"], ["updated_at", "2019-06-22 18:08:24.544909"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 328], ["created_at", "2019-06-22 18:08:24.547051"], ["updated_at", "2019-06-22 18:08:24.547051"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 329], ["created_at", "2019-06-22 18:08:24.549068"], ["updated_at", "2019-06-22 18:08:24.549068"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 326], ["created_at", "2019-06-22 18:08:24.550908"], ["updated_at", "2019-06-22 18:08:24.550908"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 327], ["created_at", "2019-06-22 18:08:24.552717"], ["updated_at", "2019-06-22 18:08:24.552717"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 328], ["created_at", "2019-06-22 18:08:24.554364"], ["updated_at", "2019-06-22 18:08:24.554364"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 326], ["created_at", "2019-06-22 18:08:24.555905"], ["updated_at", "2019-06-22 18:08:24.555905"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 327], ["created_at", "2019-06-22 18:08:24.557607"], ["updated_at", "2019-06-22 18:08:24.557607"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 326], ["created_at", "2019-06-22 18:08:24.559233"], ["updated_at", "2019-06-22 18:08:24.559233"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 329]]
  Rendered books/index.html.erb within layouts/application (17.8ms)
Completed 200 OK in 19ms (Views: 14.7ms | ActiveRecord: 3.7ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (326, 327, 328, 329)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 329]]
  Rendered books/index.html.erb within layouts/application (16.6ms)
Completed 200 OK in 20ms (Views: 13.9ms | ActiveRecord: 4.0ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (329, 328, 327, 326)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 329]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 329]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 328]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 328]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 327]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 327]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 326]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 326]]
  Rendered books/index.html.erb within layouts/application (16.8ms)
Completed 200 OK in 20ms (Views: 14.0ms | ActiveRecord: 4.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.629104"], ["updated_at", "2019-06-22 18:08:24.629104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.631312"], ["updated_at", "2019-06-22 18:08:24.631312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.633347"], ["updated_at", "2019-06-22 18:08:24.633347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.635398"], ["updated_at", "2019-06-22 18:08:24.635398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 330], ["created_at", "2019-06-22 18:08:24.637388"], ["updated_at", "2019-06-22 18:08:24.637388"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 331], ["created_at", "2019-06-22 18:08:24.639388"], ["updated_at", "2019-06-22 18:08:24.639388"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 332], ["created_at", "2019-06-22 18:08:24.641415"], ["updated_at", "2019-06-22 18:08:24.641415"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 333], ["created_at", "2019-06-22 18:08:24.643412"], ["updated_at", "2019-06-22 18:08:24.643412"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 330], ["created_at", "2019-06-22 18:08:24.645416"], ["updated_at", "2019-06-22 18:08:24.645416"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 331], ["created_at", "2019-06-22 18:08:24.647564"], ["updated_at", "2019-06-22 18:08:24.647564"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 332], ["created_at", "2019-06-22 18:08:24.649366"], ["updated_at", "2019-06-22 18:08:24.649366"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 330], ["created_at", "2019-06-22 18:08:24.650942"], ["updated_at", "2019-06-22 18:08:24.650942"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 331], ["created_at", "2019-06-22 18:08:24.652520"], ["updated_at", "2019-06-22 18:08:24.652520"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 330], ["created_at", "2019-06-22 18:08:24.654300"], ["updated_at", "2019-06-22 18:08:24.654300"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 330]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 331]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 332]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 333]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 332]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 331]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 330]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 330]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 330]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 331]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 331]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 331]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 332]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 332]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 332]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 333]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 333]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 333]]
  Rendered books/index.html.erb within layouts/application (17.8ms)
Completed 200 OK in 19ms (Views: 14.7ms | ActiveRecord: 3.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 330]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 331]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 332]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.686103"], ["updated_at", "2019-06-22 18:08:24.686103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:24.688326"], ["updated_at", "2019-06-22 18:08:24.688326"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 334], ["author_id", 138]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 334], ["created_at", "2019-06-22 18:08:24.691795"], ["updated_at", "2019-06-22 18:08:24.691795"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 334], ["created_at", "2019-06-22 18:08:24.693454"], ["updated_at", "2019-06-22 18:08:24.693454"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 334], ["created_at", "2019-06-22 18:08:24.695137"], ["updated_at", "2019-06-22 18:08:24.695137"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 334], ["created_at", "2019-06-22 18:08:24.696841"], ["updated_at", "2019-06-22 18:08:24.696841"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/334" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"334"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 334]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 334]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 334], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 334], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 334]]
  Rendered books/show.html.erb within layouts/application (6.2ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.714317"], ["updated_at", "2019-06-22 18:08:24.714317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:24.716426"], ["updated_at", "2019-06-22 18:08:24.716426"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 335], ["author_id", 139]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 335], ["created_at", "2019-06-22 18:08:24.720263"], ["updated_at", "2019-06-22 18:08:24.720263"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 335], ["created_at", "2019-06-22 18:08:24.721928"], ["updated_at", "2019-06-22 18:08:24.721928"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 335], ["created_at", "2019-06-22 18:08:24.723547"], ["updated_at", "2019-06-22 18:08:24.723547"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 335], ["created_at", "2019-06-22 18:08:24.725144"], ["updated_at", "2019-06-22 18:08:24.725144"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/335" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"335"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 335]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 335]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 335], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 335], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 335]]
  Rendered books/show.html.erb within layouts/application (6.4ms)
Completed 200 OK in 8ms (Views: 6.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.743098"], ["updated_at", "2019-06-22 18:08:24.743098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:24.745335"], ["updated_at", "2019-06-22 18:08:24.745335"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 336], ["author_id", 140]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 336], ["created_at", "2019-06-22 18:08:24.749299"], ["updated_at", "2019-06-22 18:08:24.749299"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 336], ["created_at", "2019-06-22 18:08:24.751155"], ["updated_at", "2019-06-22 18:08:24.751155"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 336], ["created_at", "2019-06-22 18:08:24.752890"], ["updated_at", "2019-06-22 18:08:24.752890"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 336], ["created_at", "2019-06-22 18:08:24.754484"], ["updated_at", "2019-06-22 18:08:24.754484"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/336" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"336"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 336]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 336]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 336], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 336], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 336]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 336]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-06-22 18:08:24.769082"], ["updated_at", "2019-06-22 18:08:24.769082"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/337" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"337"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 337], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 337]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 337]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 337], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 337], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 337]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 1.2ms)
Started DELETE "/books/337" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"337"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 337], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 337]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 337]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 337]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.794088"], ["updated_at", "2019-06-22 18:08:24.794088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.796157"], ["updated_at", "2019-06-22 18:08:24.796157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:24.798322"], ["updated_at", "2019-06-22 18:08:24.798322"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 338], ["author_id", 141]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:24.801876"], ["updated_at", "2019-06-22 18:08:24.801876"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 338], ["author_id", 142]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 18:08:24.805124"], ["updated_at", "2019-06-22 18:08:24.805124"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 339], ["author_id", 143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 338]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 338]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 338]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 339]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 339]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 339]]
  Rendered books/index.html.erb within layouts/application (9.3ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.830199"], ["updated_at", "2019-06-22 18:08:24.830199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:24.832773"], ["updated_at", "2019-06-22 18:08:24.832773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:24.834855"], ["updated_at", "2019-06-22 18:08:24.834855"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 340], ["author_id", 144]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:24.838056"], ["updated_at", "2019-06-22 18:08:24.838056"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 340], ["author_id", 145]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 18:08:24.841610"], ["updated_at", "2019-06-22 18:08:24.841610"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 341], ["author_id", 146]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 340]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 340]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 340]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 341]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 341]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 341]]
  Rendered books/index.html.erb within layouts/application (9.3ms)
Completed 200 OK in 11ms (Views: 7.7ms | ActiveRecord: 2.4ms)
Started GET "/books/340" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"340"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 340], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 340]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 340]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 340], ["LIMIT", 3]]
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 340], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 340]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 1.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.9ms)
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (18.2ms)
Completed 200 OK in 22ms (Views: 19.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-06-22 18:08:24.902534"], ["updated_at", "2019-06-22 18:08:24.902534"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:24.910626"], ["updated_at", "2019-06-22 18:08:24.910626"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:24.913385"], ["updated_at", "2019-06-22 18:08:24.913385"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 342], ["author_id", 148]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 342], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.6ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 342]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 342]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 342]]
  Rendered books/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.5ms)
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 342], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:24.948057"], ["updated_at", "2019-06-22 18:08:24.948057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:24.950332"], ["updated_at", "2019-06-22 18:08:24.950332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 343], ["author_id", 149]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:24.954903"], ["updated_at", "2019-06-22 18:08:24.954903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 343], ["author_id", 150]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 343], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.2ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 343]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 343]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 343]]
  Rendered books/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.6ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 343]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:24.975901"], ["updated_at", "2019-06-22 18:08:24.975901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:24.987797"], ["updated_at", "2019-06-22 18:08:24.987797"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 344], ["author_id", 151]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:24.992847"], ["updated_at", "2019-06-22 18:08:24.992847"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 344], ["author_id", 152]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 344], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 13ms (ActiveRecord: 2.7ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:24 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 344]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 344]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 344]]
  Rendered books/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:25.024491"], ["updated_at", "2019-06-22 18:08:25.024491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:25.027739"], ["updated_at", "2019-06-22 18:08:25.027739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-06-22 18:08:25.070100"], ["updated_at", "2019-06-22 18:08:25.070100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 345]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 345]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 345]]
  Rendered books/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:25.112143"], ["updated_at", "2019-06-22 18:08:25.112143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:25.114671"], ["updated_at", "2019-06-22 18:08:25.114671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 346], ["author_id", 155]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:25.119089"], ["updated_at", "2019-06-22 18:08:25.119089"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 346], ["author_id", 156]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 346], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.3ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 346]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 346]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 346]]
  Rendered books/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.6ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:25.135807"], ["updated_at", "2019-06-22 18:08:25.135807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.138118"], ["updated_at", "2019-06-22 18:08:25.138118"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 347], ["author_id", 157]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:25.143475"], ["updated_at", "2019-06-22 18:08:25.143475"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 347], ["author_id", 158]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 347], ["created_at", "2019-06-22 18:08:25.147256"], ["updated_at", "2019-06-22 18:08:25.147256"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 347], ["created_at", "2019-06-22 18:08:25.149016"], ["updated_at", "2019-06-22 18:08:25.149016"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 347], ["created_at", "2019-06-22 18:08:25.150635"], ["updated_at", "2019-06-22 18:08:25.150635"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/347" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"347"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 347], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 347]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 347]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 347], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 347], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 347]]
  Rendered books/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:25.172390"], ["updated_at", "2019-06-22 18:08:25.172390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.174729"], ["updated_at", "2019-06-22 18:08:25.174729"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 348], ["author_id", 159]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:25.177969"], ["updated_at", "2019-06-22 18:08:25.177969"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 348], ["author_id", 160]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 348], ["created_at", "2019-06-22 18:08:25.182173"], ["updated_at", "2019-06-22 18:08:25.182173"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 348], ["created_at", "2019-06-22 18:08:25.183856"], ["updated_at", "2019-06-22 18:08:25.183856"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 348], ["created_at", "2019-06-22 18:08:25.185954"], ["updated_at", "2019-06-22 18:08:25.185954"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/348" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"348"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 348], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 348]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 348]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 348], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 348], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 348]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.5ms)
Completed 200 OK in 6ms (Views: 3.9ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (4.1ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 1.4ms)
Started GET "/" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.226887"], ["updated_at", "2019-06-22 18:08:25.226887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.229114"], ["updated_at", "2019-06-22 18:08:25.229114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.231285"], ["updated_at", "2019-06-22 18:08:25.231285"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 349], ["author_id", 161]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.234813"], ["updated_at", "2019-06-22 18:08:25.234813"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 350], ["author_id", 162]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 349], ["created_at", "2019-06-22 18:08:25.238447"], ["updated_at", "2019-06-22 18:08:25.238447"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 350], ["created_at", "2019-06-22 18:08:25.240211"], ["updated_at", "2019-06-22 18:08:25.240211"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/349" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"349"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 349], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 349]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 349]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 349], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 349], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 349]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 349], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 350], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.4ms)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 0.6ms)
Started DELETE "/reviews/497" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"497"}
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 497], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 497]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.7ms)
Started GET "/reviews" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.278180"], ["updated_at", "2019-06-22 18:08:25.278180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.280815"], ["updated_at", "2019-06-22 18:08:25.280815"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 351], ["author_id", 163]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/351" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"351"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 351], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 351]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 351]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 351], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 351], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 351]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.9ms)
Started GET "/books/351/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"351"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 351], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (4.7ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 0.2ms)
Started POST "/books/351/reviews" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"351"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 351], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 351], ["created_at", "2019-06-22 18:08:25.310509"], ["updated_at", "2019-06-22 18:08:25.310509"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/351
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
Started GET "/books/351" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"351"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 351], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 351]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 351]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 351], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 351], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 351]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.329055"], ["updated_at", "2019-06-22 18:08:25.329055"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.331324"], ["updated_at", "2019-06-22 18:08:25.331324"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 352], ["author_id", 164]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/352" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"352"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 352]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 352]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 352], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 352], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 352]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 1.1ms)
Started GET "/books/352/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"352"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.2ms)
Started POST "/books/352/reviews" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"352"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 352], ["created_at", "2019-06-22 18:08:25.355819"], ["updated_at", "2019-06-22 18:08:25.355819"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/352
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/352" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"352"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 352]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 352]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 352], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 352], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 352]]
  Rendered books/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.2ms)
Started GET "/books/352/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"352"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.2ms)
Started POST "/books/352/reviews" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"352"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/352
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/books/352" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"352"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 352]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 352]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 352], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 352], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 352]]
  Rendered books/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.388471"], ["updated_at", "2019-06-22 18:08:25.388471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.390778"], ["updated_at", "2019-06-22 18:08:25.390778"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.392841"], ["updated_at", "2019-06-22 18:08:25.392841"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 353], ["author_id", 165]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.396254"], ["updated_at", "2019-06-22 18:08:25.396254"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 354], ["author_id", 166]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 353], ["created_at", "2019-06-22 18:08:25.399952"], ["updated_at", "2019-06-22 18:08:25.399952"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 354], ["created_at", "2019-06-22 18:08:25.401757"], ["updated_at", "2019-06-22 18:08:25.401757"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 353], ["created_at", "2019-06-22 18:08:25.403316"], ["updated_at", "2019-06-22 18:08:25.403316"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/353" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"353"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 353], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 353]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 353]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 353], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 353], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 353]]
  Rendered books/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 353], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 354], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.427942"], ["updated_at", "2019-06-22 18:08:25.427942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.430604"], ["updated_at", "2019-06-22 18:08:25.430604"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.432839"], ["updated_at", "2019-06-22 18:08:25.432839"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 355], ["author_id", 167]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.437357"], ["updated_at", "2019-06-22 18:08:25.437357"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 356], ["author_id", 168]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 355], ["created_at", "2019-06-22 18:08:25.441388"], ["updated_at", "2019-06-22 18:08:25.441388"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 356], ["created_at", "2019-06-22 18:08:25.443426"], ["updated_at", "2019-06-22 18:08:25.443426"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 355], ["created_at", "2019-06-22 18:08:25.445413"], ["updated_at", "2019-06-22 18:08:25.445413"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/355" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"355"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 355]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 355]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 355], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 355], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 355]]
  Rendered books/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.468406"], ["updated_at", "2019-06-22 18:08:25.468406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.470643"], ["updated_at", "2019-06-22 18:08:25.470643"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 357], ["created_at", "2019-06-20 18:08:25.471697"], ["updated_at", "2019-06-22 18:08:25.475486"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 358], ["created_at", "2019-06-19 18:08:25.476669"], ["updated_at", "2019-06-22 18:08:25.477647"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 357], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 357], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.493223"], ["updated_at", "2019-06-22 18:08:25.493223"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.495439"], ["updated_at", "2019-06-22 18:08:25.495439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 359], ["created_at", "2019-06-20 18:08:25.496607"], ["updated_at", "2019-06-22 18:08:25.497765"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 360], ["created_at", "2019-06-19 18:08:25.498769"], ["updated_at", "2019-06-22 18:08:25.499622"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.515554"], ["updated_at", "2019-06-22 18:08:25.515554"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.518264"], ["updated_at", "2019-06-22 18:08:25.518264"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 361], ["author_id", 169]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 361], ["created_at", "2019-06-22 18:08:25.522178"], ["updated_at", "2019-06-22 18:08:25.522178"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 361]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 361]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 361]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 361]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 361]]
  Rendered books/index.html.erb within layouts/application (7.5ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 1.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.4ms)
Started GET "/books/361" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"361"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 361]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 361]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 361], ["LIMIT", 3]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 361], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 361]]
  Rendered books/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.2ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.4ms)
Started GET "/authors/169" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"169"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 169], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 169]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 361], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 361], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 361], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 361], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 361], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 361]]
  Rendered authors/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:25 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", ""], ["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.646857"], ["updated_at", "2019-06-22 18:08:25.646857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.649164"], ["updated_at", "2019-06-22 18:08:25.649164"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 362], ["author_id", 170]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 362], ["created_at", "2019-06-22 18:08:25.652577"], ["updated_at", "2019-06-22 18:08:25.652577"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 362], ["created_at", "2019-06-22 18:08:25.654189"], ["updated_at", "2019-06-22 18:08:25.654189"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 362]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:25.658030"], ["updated_at", "2019-06-22 18:08:25.658030"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.661056"], ["updated_at", "2019-06-22 18:08:25.661056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.663583"], ["updated_at", "2019-06-22 18:08:25.663583"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 364], ["author_id", 171]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 364], ["created_at", "2019-06-22 18:08:25.667294"], ["updated_at", "2019-06-22 18:08:25.667294"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 364], ["created_at", "2019-06-22 18:08:25.669337"], ["updated_at", "2019-06-22 18:08:25.669337"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 364]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.673343"], ["updated_at", "2019-06-22 18:08:25.673343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 365], ["created_at", "2019-06-22 18:08:25.675479"], ["updated_at", "2019-06-22 18:08:25.675479"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 365], ["created_at", "2019-06-22 18:08:25.677258"], ["updated_at", "2019-06-22 18:08:25.677258"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 365], ["created_at", "2019-06-22 18:08:25.679346"], ["updated_at", "2019-06-22 18:08:25.679346"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 365], ["created_at", "2019-06-22 18:08:25.681234"], ["updated_at", "2019-06-22 18:08:25.681234"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 365], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.685337"], ["updated_at", "2019-06-22 18:08:25.685337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 366], ["created_at", "2019-06-22 18:08:25.687441"], ["updated_at", "2019-06-22 18:08:25.687441"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 366], ["created_at", "2019-06-22 18:08:25.689192"], ["updated_at", "2019-06-22 18:08:25.689192"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 366], ["created_at", "2019-06-22 18:08:25.690777"], ["updated_at", "2019-06-22 18:08:25.690777"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 366], ["created_at", "2019-06-22 18:08:25.692357"], ["updated_at", "2019-06-22 18:08:25.692357"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 366], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.697018"], ["updated_at", "2019-06-22 18:08:25.697018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 367], ["created_at", "2019-06-22 18:08:25.699182"], ["updated_at", "2019-06-22 18:08:25.699182"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 367], ["created_at", "2019-06-22 18:08:25.701144"], ["updated_at", "2019-06-22 18:08:25.701144"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 367], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.706362"], ["updated_at", "2019-06-22 18:08:25.706362"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.708483"], ["updated_at", "2019-06-22 18:08:25.708483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.710525"], ["updated_at", "2019-06-22 18:08:25.710525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.714735"], ["updated_at", "2019-06-22 18:08:25.714735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.716832"], ["updated_at", "2019-06-22 18:08:25.716832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.719550"], ["updated_at", "2019-06-22 18:08:25.719550"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.723220"], ["updated_at", "2019-06-22 18:08:25.723220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.725249"], ["updated_at", "2019-06-22 18:08:25.725249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 374], ["created_at", "2019-06-22 18:08:25.727193"], ["updated_at", "2019-06-22 18:08:25.727193"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 374], ["created_at", "2019-06-22 18:08:25.729163"], ["updated_at", "2019-06-22 18:08:25.729163"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 375], ["created_at", "2019-06-22 18:08:25.731285"], ["updated_at", "2019-06-22 18:08:25.731285"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (375, 374)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.737104"], ["updated_at", "2019-06-22 18:08:25.737104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.739241"], ["updated_at", "2019-06-22 18:08:25.739241"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 376], ["created_at", "2019-06-22 18:08:25.741252"], ["updated_at", "2019-06-22 18:08:25.741252"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 376], ["created_at", "2019-06-22 18:08:25.742918"], ["updated_at", "2019-06-22 18:08:25.742918"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 377], ["created_at", "2019-06-22 18:08:25.744793"], ["updated_at", "2019-06-22 18:08:25.744793"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (376, 377)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.750103"], ["updated_at", "2019-06-22 18:08:25.750103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.752244"], ["updated_at", "2019-06-22 18:08:25.752244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.754283"], ["updated_at", "2019-06-22 18:08:25.754283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.756793"], ["updated_at", "2019-06-22 18:08:25.756793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 378], ["created_at", "2019-06-22 18:08:25.758951"], ["updated_at", "2019-06-22 18:08:25.758951"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 379], ["created_at", "2019-06-22 18:08:25.761165"], ["updated_at", "2019-06-22 18:08:25.761165"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 380], ["created_at", "2019-06-22 18:08:25.763522"], ["updated_at", "2019-06-22 18:08:25.763522"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 381], ["created_at", "2019-06-22 18:08:25.765387"], ["updated_at", "2019-06-22 18:08:25.765387"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.770215"], ["updated_at", "2019-06-22 18:08:25.770215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.772302"], ["updated_at", "2019-06-22 18:08:25.772302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.774384"], ["updated_at", "2019-06-22 18:08:25.774384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.776612"], ["updated_at", "2019-06-22 18:08:25.776612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 382], ["created_at", "2019-06-22 18:08:25.778708"], ["updated_at", "2019-06-22 18:08:25.778708"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 383], ["created_at", "2019-06-22 18:08:25.781074"], ["updated_at", "2019-06-22 18:08:25.781074"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 384], ["created_at", "2019-06-22 18:08:25.783019"], ["updated_at", "2019-06-22 18:08:25.783019"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 385], ["created_at", "2019-06-22 18:08:25.784940"], ["updated_at", "2019-06-22 18:08:25.784940"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.789129"], ["updated_at", "2019-06-22 18:08:25.789129"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.791245"], ["updated_at", "2019-06-22 18:08:25.791245"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.793407"], ["updated_at", "2019-06-22 18:08:25.793407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.795474"], ["updated_at", "2019-06-22 18:08:25.795474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 386], ["created_at", "2019-06-22 18:08:25.797444"], ["updated_at", "2019-06-22 18:08:25.797444"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 387], ["created_at", "2019-06-22 18:08:25.799434"], ["updated_at", "2019-06-22 18:08:25.799434"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 388], ["created_at", "2019-06-22 18:08:25.801362"], ["updated_at", "2019-06-22 18:08:25.801362"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 389], ["created_at", "2019-06-22 18:08:25.803259"], ["updated_at", "2019-06-22 18:08:25.803259"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.807666"], ["updated_at", "2019-06-22 18:08:25.807666"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.809929"], ["updated_at", "2019-06-22 18:08:25.809929"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.812050"], ["updated_at", "2019-06-22 18:08:25.812050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.814711"], ["updated_at", "2019-06-22 18:08:25.814711"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 390], ["created_at", "2019-06-22 18:08:25.816939"], ["updated_at", "2019-06-22 18:08:25.816939"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 391], ["created_at", "2019-06-22 18:08:25.819379"], ["updated_at", "2019-06-22 18:08:25.819379"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 392], ["created_at", "2019-06-22 18:08:25.823299"], ["updated_at", "2019-06-22 18:08:25.823299"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 393], ["created_at", "2019-06-22 18:08:25.825125"], ["updated_at", "2019-06-22 18:08:25.825125"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.831896"], ["updated_at", "2019-06-22 18:08:25.831896"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:25.834266"], ["updated_at", "2019-06-22 18:08:25.834266"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 394], ["author_id", 172]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 394], ["created_at", "2019-06-22 18:08:25.837706"], ["updated_at", "2019-06-22 18:08:25.837706"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.841387"], ["updated_at", "2019-06-22 18:08:25.841387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.843631"], ["updated_at", "2019-06-22 18:08:25.843631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.846041"], ["updated_at", "2019-06-22 18:08:25.846041"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.848077"], ["updated_at", "2019-06-22 18:08:25.848077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 395], ["created_at", "2019-06-22 18:08:25.850138"], ["updated_at", "2019-06-22 18:08:25.850138"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 396], ["created_at", "2019-06-22 18:08:25.852453"], ["updated_at", "2019-06-22 18:08:25.852453"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 397], ["created_at", "2019-06-22 18:08:25.854366"], ["updated_at", "2019-06-22 18:08:25.854366"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 398], ["created_at", "2019-06-22 18:08:25.856215"], ["updated_at", "2019-06-22 18:08:25.856215"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 395], ["created_at", "2019-06-22 18:08:25.857972"], ["updated_at", "2019-06-22 18:08:25.857972"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 396], ["created_at", "2019-06-22 18:08:25.859613"], ["updated_at", "2019-06-22 18:08:25.859613"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 397], ["created_at", "2019-06-22 18:08:25.861180"], ["updated_at", "2019-06-22 18:08:25.861180"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 395], ["created_at", "2019-06-22 18:08:25.862727"], ["updated_at", "2019-06-22 18:08:25.862727"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 396], ["created_at", "2019-06-22 18:08:25.864717"], ["updated_at", "2019-06-22 18:08:25.864717"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 395], ["created_at", "2019-06-22 18:08:25.866665"], ["updated_at", "2019-06-22 18:08:25.866665"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.873351"], ["updated_at", "2019-06-22 18:08:25.873351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 399], ["created_at", "2019-06-20 18:08:25.874438"], ["updated_at", "2019-06-22 18:08:25.875475"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 399], ["created_at", "2019-06-19 18:08:25.876461"], ["updated_at", "2019-06-22 18:08:25.877266"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 399], ["created_at", "2019-06-18 18:08:25.878224"], ["updated_at", "2019-06-22 18:08:25.879352"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:25.883432"], ["updated_at", "2019-06-22 18:08:25.883432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 400], ["created_at", "2019-06-20 18:08:25.884499"], ["updated_at", "2019-06-22 18:08:25.885520"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 400], ["created_at", "2019-06-19 18:08:25.886492"], ["updated_at", "2019-06-22 18:08:25.887297"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 400], ["created_at", "2019-06-18 18:08:25.888186"], ["updated_at", "2019-06-22 18:08:25.889047"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-06-22 18:08:31.725045"], ["updated_at", "2019-06-22 18:08:31.725045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-06-22 18:08:31.750371"], ["updated_at", "2019-06-22 18:08:31.750371"]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 401], ["author_id", 173]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-06-22 18:08:31.761662"], ["updated_at", "2019-06-22 18:08:31.761662"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 402], ["author_id", 173]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 402]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 402]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 402]]
  Rendered books/index.html.erb within layouts/application (22.9ms)
Completed 200 OK in 32ms (Views: 24.7ms | ActiveRecord: 4.5ms)
Started GET "/authors/173" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"173"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 173]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 401], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 401]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 402], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 402]]
  Rendered authors/show.html.erb within layouts/application (7.7ms)
Completed 200 OK in 14ms (Views: 9.2ms | ActiveRecord: 1.5ms)
Started GET "/books/401" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"401"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 401], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 401]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 401], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 401], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 401]]
  Rendered books/show.html.erb within layouts/application (6.6ms)
Completed 200 OK in 11ms (Views: 6.3ms | ActiveRecord: 1.5ms)
Started GET "/authors/173" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"173"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 173]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 401], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 401]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 402], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 402]]
  Rendered authors/show.html.erb within layouts/application (6.9ms)
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:31.859746"], ["updated_at", "2019-06-22 18:08:31.859746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:31.862190"], ["updated_at", "2019-06-22 18:08:31.862190"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 403], ["author_id", 174]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:31.867441"], ["updated_at", "2019-06-22 18:08:31.867441"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 404], ["author_id", 174]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 403], ["created_at", "2019-06-22 18:08:31.879051"], ["updated_at", "2019-06-22 18:08:31.879051"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/174" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"174"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 174], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 174]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 403], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 403], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 403], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 403], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 403], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 403]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 404], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 404]]
  Rendered authors/show.html.erb within layouts/application (8.8ms)
Completed 200 OK in 11ms (Views: 8.4ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-06-22 18:08:31.900560"], ["updated_at", "2019-06-22 18:08:31.900560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-06-22 18:08:31.903302"], ["updated_at", "2019-06-22 18:08:31.903302"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 405], ["author_id", 175]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-06-22 18:08:31.908129"], ["updated_at", "2019-06-22 18:08:31.908129"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 405], ["author_id", 176]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-06-22 18:08:31.913045"], ["updated_at", "2019-06-22 18:08:31.913045"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 406], ["author_id", 176]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/175" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"175"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 175], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 175]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 405], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 405]]
  Rendered authors/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.9ms)
Started DELETE "/authors/175" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"175"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 175], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 175]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 405[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 405]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 405]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 193]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 194]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 405]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.1ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 175]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 175]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 2.7ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 406]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 406]]
  Rendered books/index.html.erb within layouts/application (10.2ms)
Completed 200 OK in 12ms (Views: 8.9ms | ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:31.974351"], ["updated_at", "2019-06-22 18:08:31.974351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:31.977067"], ["updated_at", "2019-06-22 18:08:31.977067"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 407], ["author_id", 177]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:31.982282"], ["updated_at", "2019-06-22 18:08:31.982282"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 407], ["author_id", 178]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:31.988365"], ["updated_at", "2019-06-22 18:08:31.988365"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 408], ["author_id", 177]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 18:08:31.994012"], ["updated_at", "2019-06-22 18:08:31.994012"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 409], ["author_id", 177]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/177" for 127.0.0.1 at 2019-06-22 12:08:31 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"177"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 177]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 407], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 407]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 408], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 408]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 409], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 409]]
  Rendered authors/show.html.erb within layouts/application (10.6ms)
Completed 200 OK in 13ms (Views: 10.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:32.029973"], ["updated_at", "2019-06-22 18:08:32.029973"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:32.032021"], ["updated_at", "2019-06-22 18:08:32.032021"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 410], ["author_id", 179]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:32.035227"], ["updated_at", "2019-06-22 18:08:32.035227"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 410], ["author_id", 180]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:32.039371"], ["updated_at", "2019-06-22 18:08:32.039371"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 411], ["author_id", 179]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 18:08:32.043346"], ["updated_at", "2019-06-22 18:08:32.043346"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 412], ["author_id", 179]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/179" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"179"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 179]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 410], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 410]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 411], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 411]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 412], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 412]]
  Rendered authors/show.html.erb within layouts/application (7.4ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.060793"], ["updated_at", "2019-06-22 18:08:32.060793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 413], ["created_at", "2019-06-22 18:08:32.063233"], ["updated_at", "2019-06-22 18:08:32.063233"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 413], ["created_at", "2019-06-22 18:08:32.065336"], ["updated_at", "2019-06-22 18:08:32.065336"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 413], ["created_at", "2019-06-22 18:08:32.067005"], ["updated_at", "2019-06-22 18:08:32.067005"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 413], ["created_at", "2019-06-22 18:08:32.068584"], ["updated_at", "2019-06-22 18:08:32.068584"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 413]]
  Rendered books/index.html.erb within layouts/application (7.8ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 413]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.087161"], ["updated_at", "2019-06-22 18:08:32.087161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.089407"], ["updated_at", "2019-06-22 18:08:32.089407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.091330"], ["updated_at", "2019-06-22 18:08:32.091330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.093670"], ["updated_at", "2019-06-22 18:08:32.093670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 414], ["created_at", "2019-06-22 18:08:32.095732"], ["updated_at", "2019-06-22 18:08:32.095732"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 415], ["created_at", "2019-06-22 18:08:32.097608"], ["updated_at", "2019-06-22 18:08:32.097608"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 416], ["created_at", "2019-06-22 18:08:32.099494"], ["updated_at", "2019-06-22 18:08:32.099494"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 417], ["created_at", "2019-06-22 18:08:32.101496"], ["updated_at", "2019-06-22 18:08:32.101496"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 414], ["created_at", "2019-06-22 18:08:32.103155"], ["updated_at", "2019-06-22 18:08:32.103155"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 415], ["created_at", "2019-06-22 18:08:32.104743"], ["updated_at", "2019-06-22 18:08:32.104743"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 416], ["created_at", "2019-06-22 18:08:32.106395"], ["updated_at", "2019-06-22 18:08:32.106395"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 414], ["created_at", "2019-06-22 18:08:32.108158"], ["updated_at", "2019-06-22 18:08:32.108158"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 415], ["created_at", "2019-06-22 18:08:32.109835"], ["updated_at", "2019-06-22 18:08:32.109835"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 414], ["created_at", "2019-06-22 18:08:32.111454"], ["updated_at", "2019-06-22 18:08:32.111454"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 414]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 415]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 416]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 417]]
  Rendered books/index.html.erb within layouts/application (18.1ms)
Completed 200 OK in 20ms (Views: 15.0ms | ActiveRecord: 3.9ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 414]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 414]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 415]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 415]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 416]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 416]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 417]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 417]]
  Rendered books/index.html.erb within layouts/application (18.2ms)
Completed 200 OK in 19ms (Views: 14.7ms | ActiveRecord: 4.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.159476"], ["updated_at", "2019-06-22 18:08:32.159476"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.161528"], ["updated_at", "2019-06-22 18:08:32.161528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.163462"], ["updated_at", "2019-06-22 18:08:32.163462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.165406"], ["updated_at", "2019-06-22 18:08:32.165406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 418], ["created_at", "2019-06-22 18:08:32.167409"], ["updated_at", "2019-06-22 18:08:32.167409"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 419], ["created_at", "2019-06-22 18:08:32.169362"], ["updated_at", "2019-06-22 18:08:32.169362"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 420], ["created_at", "2019-06-22 18:08:32.171190"], ["updated_at", "2019-06-22 18:08:32.171190"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 421], ["created_at", "2019-06-22 18:08:32.173079"], ["updated_at", "2019-06-22 18:08:32.173079"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 418], ["created_at", "2019-06-22 18:08:32.174893"], ["updated_at", "2019-06-22 18:08:32.174893"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 419], ["created_at", "2019-06-22 18:08:32.176641"], ["updated_at", "2019-06-22 18:08:32.176641"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 420], ["created_at", "2019-06-22 18:08:32.178382"], ["updated_at", "2019-06-22 18:08:32.178382"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 418], ["created_at", "2019-06-22 18:08:32.180202"], ["updated_at", "2019-06-22 18:08:32.180202"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 419], ["created_at", "2019-06-22 18:08:32.182213"], ["updated_at", "2019-06-22 18:08:32.182213"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 418], ["created_at", "2019-06-22 18:08:32.184025"], ["updated_at", "2019-06-22 18:08:32.184025"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 418]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 419]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 420]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 421]]
  Rendered books/index.html.erb within layouts/application (18.0ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 3.9ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 421]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 421]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 420]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 420]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 419]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 419]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 418]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 418]]
  Rendered books/index.html.erb within layouts/application (18.0ms)
Completed 200 OK in 19ms (Views: 14.6ms | ActiveRecord: 4.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.230599"], ["updated_at", "2019-06-22 18:08:32.230599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.232667"], ["updated_at", "2019-06-22 18:08:32.232667"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.234908"], ["updated_at", "2019-06-22 18:08:32.234908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.237098"], ["updated_at", "2019-06-22 18:08:32.237098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 422], ["created_at", "2019-06-22 18:08:32.239152"], ["updated_at", "2019-06-22 18:08:32.239152"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 423], ["created_at", "2019-06-22 18:08:32.240987"], ["updated_at", "2019-06-22 18:08:32.240987"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 424], ["created_at", "2019-06-22 18:08:32.242731"], ["updated_at", "2019-06-22 18:08:32.242731"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 425], ["created_at", "2019-06-22 18:08:32.244702"], ["updated_at", "2019-06-22 18:08:32.244702"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 422], ["created_at", "2019-06-22 18:08:32.246539"], ["updated_at", "2019-06-22 18:08:32.246539"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 423], ["created_at", "2019-06-22 18:08:32.248278"], ["updated_at", "2019-06-22 18:08:32.248278"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 424], ["created_at", "2019-06-22 18:08:32.250192"], ["updated_at", "2019-06-22 18:08:32.250192"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 422], ["created_at", "2019-06-22 18:08:32.251951"], ["updated_at", "2019-06-22 18:08:32.251951"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 423], ["created_at", "2019-06-22 18:08:32.253600"], ["updated_at", "2019-06-22 18:08:32.253600"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 422], ["created_at", "2019-06-22 18:08:32.255298"], ["updated_at", "2019-06-22 18:08:32.255298"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 425]]
  Rendered books/index.html.erb within layouts/application (16.7ms)
Completed 200 OK in 18ms (Views: 13.9ms | ActiveRecord: 3.5ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 425]]
  Rendered books/index.html.erb within layouts/application (17.8ms)
Completed 200 OK in 19ms (Views: 14.6ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 425]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 425]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 424]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 424]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 423]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 423]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 422]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 422]]
  Rendered books/index.html.erb within layouts/application (19.2ms)
Completed 200 OK in 20ms (Views: 15.8ms | ActiveRecord: 4.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.323616"], ["updated_at", "2019-06-22 18:08:32.323616"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.325710"], ["updated_at", "2019-06-22 18:08:32.325710"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.327686"], ["updated_at", "2019-06-22 18:08:32.327686"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.329668"], ["updated_at", "2019-06-22 18:08:32.329668"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 426], ["created_at", "2019-06-22 18:08:32.332107"], ["updated_at", "2019-06-22 18:08:32.332107"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 427], ["created_at", "2019-06-22 18:08:32.334155"], ["updated_at", "2019-06-22 18:08:32.334155"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 428], ["created_at", "2019-06-22 18:08:32.336160"], ["updated_at", "2019-06-22 18:08:32.336160"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 429], ["created_at", "2019-06-22 18:08:32.338106"], ["updated_at", "2019-06-22 18:08:32.338106"], ["user", "Mills"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 426], ["created_at", "2019-06-22 18:08:32.342833"], ["updated_at", "2019-06-22 18:08:32.342833"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 427], ["created_at", "2019-06-22 18:08:32.344634"], ["updated_at", "2019-06-22 18:08:32.344634"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 428], ["created_at", "2019-06-22 18:08:32.346264"], ["updated_at", "2019-06-22 18:08:32.346264"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 426], ["created_at", "2019-06-22 18:08:32.347956"], ["updated_at", "2019-06-22 18:08:32.347956"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 427], ["created_at", "2019-06-22 18:08:32.350048"], ["updated_at", "2019-06-22 18:08:32.350048"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 426], ["created_at", "2019-06-22 18:08:32.351722"], ["updated_at", "2019-06-22 18:08:32.351722"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 429]]
  Rendered books/index.html.erb within layouts/application (19.7ms)
Completed 200 OK in 21ms (Views: 16.9ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (426, 427, 428, 429)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 429]]
  Rendered books/index.html.erb within layouts/application (16.2ms)
Completed 200 OK in 19ms (Views: 13.5ms | ActiveRecord: 3.9ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (429, 428, 427, 426)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 429]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 429]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 428]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 428]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 427]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 427]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 426]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 426]]
  Rendered books/index.html.erb within layouts/application (17.0ms)
Completed 200 OK in 20ms (Views: 14.1ms | ActiveRecord: 4.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.422808"], ["updated_at", "2019-06-22 18:08:32.422808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.424872"], ["updated_at", "2019-06-22 18:08:32.424872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.426812"], ["updated_at", "2019-06-22 18:08:32.426812"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.428734"], ["updated_at", "2019-06-22 18:08:32.428734"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 430], ["created_at", "2019-06-22 18:08:32.430616"], ["updated_at", "2019-06-22 18:08:32.430616"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 431], ["created_at", "2019-06-22 18:08:32.432435"], ["updated_at", "2019-06-22 18:08:32.432435"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 432], ["created_at", "2019-06-22 18:08:32.434139"], ["updated_at", "2019-06-22 18:08:32.434139"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 433], ["created_at", "2019-06-22 18:08:32.435871"], ["updated_at", "2019-06-22 18:08:32.435871"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 430], ["created_at", "2019-06-22 18:08:32.437385"], ["updated_at", "2019-06-22 18:08:32.437385"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 431], ["created_at", "2019-06-22 18:08:32.439146"], ["updated_at", "2019-06-22 18:08:32.439146"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 432], ["created_at", "2019-06-22 18:08:32.440725"], ["updated_at", "2019-06-22 18:08:32.440725"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 430], ["created_at", "2019-06-22 18:08:32.442276"], ["updated_at", "2019-06-22 18:08:32.442276"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 431], ["created_at", "2019-06-22 18:08:32.443794"], ["updated_at", "2019-06-22 18:08:32.443794"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 430], ["created_at", "2019-06-22 18:08:32.445451"], ["updated_at", "2019-06-22 18:08:32.445451"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 430]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 431]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 431]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 430]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 430]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 430]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 431]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 431]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 431]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 432]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 433]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 433]]
  Rendered books/index.html.erb within layouts/application (17.5ms)
Completed 200 OK in 19ms (Views: 14.5ms | ActiveRecord: 3.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 430]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 431]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 432]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.476913"], ["updated_at", "2019-06-22 18:08:32.476913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:32.478971"], ["updated_at", "2019-06-22 18:08:32.478971"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 434], ["author_id", 181]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 434], ["created_at", "2019-06-22 18:08:32.482699"], ["updated_at", "2019-06-22 18:08:32.482699"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 434], ["created_at", "2019-06-22 18:08:32.484558"], ["updated_at", "2019-06-22 18:08:32.484558"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 434], ["created_at", "2019-06-22 18:08:32.486204"], ["updated_at", "2019-06-22 18:08:32.486204"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 434], ["created_at", "2019-06-22 18:08:32.487942"], ["updated_at", "2019-06-22 18:08:32.487942"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/434" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"434"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 434], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 434]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 434]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 434], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 434], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 434]]
  Rendered books/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.503660"], ["updated_at", "2019-06-22 18:08:32.503660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:32.505730"], ["updated_at", "2019-06-22 18:08:32.505730"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 435], ["author_id", 182]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 435], ["created_at", "2019-06-22 18:08:32.509046"], ["updated_at", "2019-06-22 18:08:32.509046"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 435], ["created_at", "2019-06-22 18:08:32.511174"], ["updated_at", "2019-06-22 18:08:32.511174"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 435], ["created_at", "2019-06-22 18:08:32.512886"], ["updated_at", "2019-06-22 18:08:32.512886"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 435], ["created_at", "2019-06-22 18:08:32.514412"], ["updated_at", "2019-06-22 18:08:32.514412"], ["user", "Vince"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/435" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"435"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 435], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 435]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 435]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 435], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 435], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 435]]
  Rendered books/show.html.erb within layouts/application (5.7ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.530692"], ["updated_at", "2019-06-22 18:08:32.530692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:32.532812"], ["updated_at", "2019-06-22 18:08:32.532812"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 436], ["author_id", 183]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 436], ["created_at", "2019-06-22 18:08:32.536451"], ["updated_at", "2019-06-22 18:08:32.536451"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 436], ["created_at", "2019-06-22 18:08:32.538106"], ["updated_at", "2019-06-22 18:08:32.538106"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 436], ["created_at", "2019-06-22 18:08:32.539681"], ["updated_at", "2019-06-22 18:08:32.539681"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 436], ["created_at", "2019-06-22 18:08:32.541220"], ["updated_at", "2019-06-22 18:08:32.541220"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/436" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"436"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 436], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 436]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 436]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 436], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 436], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 436]]
  Rendered books/show.html.erb within layouts/application (5.8ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 436]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-06-22 18:08:32.555400"], ["updated_at", "2019-06-22 18:08:32.555400"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/437" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"437"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 437], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 437]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 437]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 437], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 437], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 437]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 1.0ms)
Started DELETE "/books/437" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"437"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 437], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 437]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 437]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 437]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 3ms (ActiveRecord: 0.9ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.578010"], ["updated_at", "2019-06-22 18:08:32.578010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.580154"], ["updated_at", "2019-06-22 18:08:32.580154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:32.582728"], ["updated_at", "2019-06-22 18:08:32.582728"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 438], ["author_id", 184]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:32.586584"], ["updated_at", "2019-06-22 18:08:32.586584"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 438], ["author_id", 185]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 18:08:32.591179"], ["updated_at", "2019-06-22 18:08:32.591179"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 439], ["author_id", 186]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 438]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 438]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 438]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 439]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 439]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 439]]
  Rendered books/index.html.erb within layouts/application (8.6ms)
Completed 200 OK in 10ms (Views: 7.1ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.612467"], ["updated_at", "2019-06-22 18:08:32.612467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:32.614765"], ["updated_at", "2019-06-22 18:08:32.614765"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:32.617047"], ["updated_at", "2019-06-22 18:08:32.617047"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 440], ["author_id", 187]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:32.620234"], ["updated_at", "2019-06-22 18:08:32.620234"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 440], ["author_id", 188]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 18:08:32.623959"], ["updated_at", "2019-06-22 18:08:32.623959"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 441], ["author_id", 189]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 440]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 440]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 440]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 441]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 441]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 441]]
  Rendered books/index.html.erb within layouts/application (8.6ms)
Completed 200 OK in 10ms (Views: 7.1ms | ActiveRecord: 2.2ms)
Started GET "/books/440" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"440"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 440], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 440]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 440]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 440], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 440], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 440]]
  Rendered books/show.html.erb within layouts/application (3.9ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.9ms)
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (9.8ms)
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-06-22 18:08:32.672165"], ["updated_at", "2019-06-22 18:08:32.672165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:32.680029"], ["updated_at", "2019-06-22 18:08:32.680029"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:32.682705"], ["updated_at", "2019-06-22 18:08:32.682705"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 442], ["author_id", 191]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 442], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.5ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 442]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 442]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 442]]
  Rendered books/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.6ms)
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 442], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:32.719354"], ["updated_at", "2019-06-22 18:08:32.719354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:32.721577"], ["updated_at", "2019-06-22 18:08:32.721577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 443], ["author_id", 192]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:32.726412"], ["updated_at", "2019-06-22 18:08:32.726412"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 443], ["author_id", 193]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 443], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 443]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 443]]
  [1m[36mAuthor Load (1.0ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 443]]
  Rendered books/index.html.erb within layouts/application (9.4ms)
Completed 200 OK in 11ms (Views: 8.3ms | ActiveRecord: 2.5ms)
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 443]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:32.759979"], ["updated_at", "2019-06-22 18:08:32.759979"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:32.774928"], ["updated_at", "2019-06-22 18:08:32.774928"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 444], ["author_id", 194]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:32.780877"], ["updated_at", "2019-06-22 18:08:32.780877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 444], ["author_id", 195]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 444], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 16ms (ActiveRecord: 3.2ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 444]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 444]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 444]]
  Rendered books/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 8ms (Views: 5.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:32.816551"], ["updated_at", "2019-06-22 18:08:32.816551"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:32.819813"], ["updated_at", "2019-06-22 18:08:32.819813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.9ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 10ms (ActiveRecord: 1.6ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-06-22 18:08:32.863515"], ["updated_at", "2019-06-22 18:08:32.863515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 445]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 445]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 445]]
  Rendered books/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:32.904978"], ["updated_at", "2019-06-22 18:08:32.904978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:32.907102"], ["updated_at", "2019-06-22 18:08:32.907102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 446], ["author_id", 198]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:32.911628"], ["updated_at", "2019-06-22 18:08:32.911628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 446], ["author_id", 199]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 446], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.3ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 446]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 446]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 446]]
  Rendered books/index.html.erb within layouts/application (7.1ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 1.9ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:32.930263"], ["updated_at", "2019-06-22 18:08:32.930263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:32.932603"], ["updated_at", "2019-06-22 18:08:32.932603"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 447], ["author_id", 200]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:32.935978"], ["updated_at", "2019-06-22 18:08:32.935978"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 447], ["author_id", 201]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 447], ["created_at", "2019-06-22 18:08:32.940014"], ["updated_at", "2019-06-22 18:08:32.940014"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 447], ["created_at", "2019-06-22 18:08:32.941725"], ["updated_at", "2019-06-22 18:08:32.941725"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 447], ["created_at", "2019-06-22 18:08:32.943361"], ["updated_at", "2019-06-22 18:08:32.943361"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/447" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"447"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 447], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 447]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 447]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 447], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 447], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 447]]
  Rendered books/show.html.erb within layouts/application (6.1ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:32.965141"], ["updated_at", "2019-06-22 18:08:32.965141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:32.967396"], ["updated_at", "2019-06-22 18:08:32.967396"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 448], ["author_id", 202]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:32.970765"], ["updated_at", "2019-06-22 18:08:32.970765"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 448], ["author_id", 203]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 448], ["created_at", "2019-06-22 18:08:32.973995"], ["updated_at", "2019-06-22 18:08:32.973995"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 448], ["created_at", "2019-06-22 18:08:32.975744"], ["updated_at", "2019-06-22 18:08:32.975744"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 448], ["created_at", "2019-06-22 18:08:32.977390"], ["updated_at", "2019-06-22 18:08:32.977390"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/448" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"448"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 448], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 448]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 448]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 448], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 448], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 448]]
  Rendered books/show.html.erb within layouts/application (6.4ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-06-22 12:08:32 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.4ms)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 1.0ms)
Started GET "/" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.016208"], ["updated_at", "2019-06-22 18:08:33.016208"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.018843"], ["updated_at", "2019-06-22 18:08:33.018843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.021295"], ["updated_at", "2019-06-22 18:08:33.021295"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 449], ["author_id", 204]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.025152"], ["updated_at", "2019-06-22 18:08:33.025152"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 450], ["author_id", 205]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 449], ["created_at", "2019-06-22 18:08:33.028504"], ["updated_at", "2019-06-22 18:08:33.028504"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 450], ["created_at", "2019-06-22 18:08:33.030352"], ["updated_at", "2019-06-22 18:08:33.030352"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/449" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"449"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 449], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 449]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 449]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 449], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 449], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 449]]
  Rendered books/show.html.erb within layouts/application (4.4ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 449], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 450], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.4ms)
Completed 200 OK in 10ms (Views: 6.4ms | ActiveRecord: 0.6ms)
Started DELETE "/reviews/638" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"638"}
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 638], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 638]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.6ms)
Started GET "/reviews" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.069165"], ["updated_at", "2019-06-22 18:08:33.069165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.071660"], ["updated_at", "2019-06-22 18:08:33.071660"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 451], ["author_id", 206]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/451" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"451"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 451], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 451]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 451]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 451], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 451], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 451]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 1.0ms)
Started GET "/books/451/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"451"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 451], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 7ms (Views: 4.4ms | ActiveRecord: 0.2ms)
Started POST "/books/451/reviews" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"451"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 451], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 451], ["created_at", "2019-06-22 18:08:33.099351"], ["updated_at", "2019-06-22 18:08:33.099351"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/451
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
Started GET "/books/451" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"451"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 451], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 451]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 451]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 451], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 451], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 451]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.116588"], ["updated_at", "2019-06-22 18:08:33.116588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.118798"], ["updated_at", "2019-06-22 18:08:33.118798"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 452], ["author_id", 207]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/452" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"452"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 452]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 452]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 452], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 452], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 452]]
  Rendered books/show.html.erb within layouts/application (4.4ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.1ms)
Started GET "/books/452/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"452"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.1ms)
Started POST "/books/452/reviews" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"452"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 452], ["created_at", "2019-06-22 18:08:33.142096"], ["updated_at", "2019-06-22 18:08:33.142096"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/452
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
Started GET "/books/452" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"452"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 452]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 452]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 452], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 452], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 452]]
  Rendered books/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.1ms)
Started GET "/books/452/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"452"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.1ms)
Started POST "/books/452/reviews" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"452"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/452
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/books/452" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"452"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 452]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 452]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 452], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 452], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 452]]
  Rendered books/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.173444"], ["updated_at", "2019-06-22 18:08:33.173444"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.175520"], ["updated_at", "2019-06-22 18:08:33.175520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.177829"], ["updated_at", "2019-06-22 18:08:33.177829"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 453], ["author_id", 208]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.181675"], ["updated_at", "2019-06-22 18:08:33.181675"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 454], ["author_id", 209]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 453], ["created_at", "2019-06-22 18:08:33.185050"], ["updated_at", "2019-06-22 18:08:33.185050"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 454], ["created_at", "2019-06-22 18:08:33.186827"], ["updated_at", "2019-06-22 18:08:33.186827"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 453], ["created_at", "2019-06-22 18:08:33.188510"], ["updated_at", "2019-06-22 18:08:33.188510"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/453" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"453"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 453], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 453]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 453]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 453], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 453], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 453]]
  Rendered books/show.html.erb within layouts/application (4.7ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 453], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 454], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.211948"], ["updated_at", "2019-06-22 18:08:33.211948"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.214127"], ["updated_at", "2019-06-22 18:08:33.214127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.216141"], ["updated_at", "2019-06-22 18:08:33.216141"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 455], ["author_id", 210]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.220066"], ["updated_at", "2019-06-22 18:08:33.220066"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 456], ["author_id", 211]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 455], ["created_at", "2019-06-22 18:08:33.223531"], ["updated_at", "2019-06-22 18:08:33.223531"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 456], ["created_at", "2019-06-22 18:08:33.225668"], ["updated_at", "2019-06-22 18:08:33.225668"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 455], ["created_at", "2019-06-22 18:08:33.227300"], ["updated_at", "2019-06-22 18:08:33.227300"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/455" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"455"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 455], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 455]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 455]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 455], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 455], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 455]]
  Rendered books/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 455], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 456], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.247673"], ["updated_at", "2019-06-22 18:08:33.247673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.250025"], ["updated_at", "2019-06-22 18:08:33.250025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 457], ["created_at", "2019-06-20 18:08:33.251024"], ["updated_at", "2019-06-22 18:08:33.252210"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 458], ["created_at", "2019-06-19 18:08:33.253603"], ["updated_at", "2019-06-22 18:08:33.254711"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 457], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 458], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.5ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.6ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 457], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 458], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.270600"], ["updated_at", "2019-06-22 18:08:33.270600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.272738"], ["updated_at", "2019-06-22 18:08:33.272738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 459], ["created_at", "2019-06-20 18:08:33.273725"], ["updated_at", "2019-06-22 18:08:33.274846"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 460], ["created_at", "2019-06-19 18:08:33.275917"], ["updated_at", "2019-06-22 18:08:33.276877"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 459], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 460], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 460], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 459], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.293105"], ["updated_at", "2019-06-22 18:08:33.293105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.295330"], ["updated_at", "2019-06-22 18:08:33.295330"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 461], ["author_id", 212]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 461], ["created_at", "2019-06-22 18:08:33.298778"], ["updated_at", "2019-06-22 18:08:33.298778"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 461]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 461]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 461]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 461]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 461]]
  Rendered books/index.html.erb within layouts/application (8.3ms)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 2.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 461], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.4ms)
Started GET "/books/461" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"461"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 461], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 461]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 461]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 461], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 461], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 461]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.1ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 461], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.4ms)
Started GET "/authors/212" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"212"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 212]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 461], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 461], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 461], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 461], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 461], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 461]]
  Rendered authors/show.html.erb within layouts/application (6.1ms)
Completed 200 OK in 8ms (Views: 6.2ms | ActiveRecord: 0.8ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:33 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 461], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", ""], ["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.425417"], ["updated_at", "2019-06-22 18:08:33.425417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.427699"], ["updated_at", "2019-06-22 18:08:33.427699"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 462], ["author_id", 213]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 462], ["created_at", "2019-06-22 18:08:33.431047"], ["updated_at", "2019-06-22 18:08:33.431047"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 462], ["created_at", "2019-06-22 18:08:33.432750"], ["updated_at", "2019-06-22 18:08:33.432750"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 462]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:33.436884"], ["updated_at", "2019-06-22 18:08:33.436884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.440021"], ["updated_at", "2019-06-22 18:08:33.440021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.442290"], ["updated_at", "2019-06-22 18:08:33.442290"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 464], ["author_id", 214]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 464], ["created_at", "2019-06-22 18:08:33.446038"], ["updated_at", "2019-06-22 18:08:33.446038"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 464], ["created_at", "2019-06-22 18:08:33.447628"], ["updated_at", "2019-06-22 18:08:33.447628"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 464]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.451416"], ["updated_at", "2019-06-22 18:08:33.451416"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 465], ["created_at", "2019-06-22 18:08:33.453881"], ["updated_at", "2019-06-22 18:08:33.453881"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 465], ["created_at", "2019-06-22 18:08:33.455643"], ["updated_at", "2019-06-22 18:08:33.455643"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 465], ["created_at", "2019-06-22 18:08:33.457189"], ["updated_at", "2019-06-22 18:08:33.457189"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 465], ["created_at", "2019-06-22 18:08:33.459004"], ["updated_at", "2019-06-22 18:08:33.459004"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 465], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.463141"], ["updated_at", "2019-06-22 18:08:33.463141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 466], ["created_at", "2019-06-22 18:08:33.465135"], ["updated_at", "2019-06-22 18:08:33.465135"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 466], ["created_at", "2019-06-22 18:08:33.466776"], ["updated_at", "2019-06-22 18:08:33.466776"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 466], ["created_at", "2019-06-22 18:08:33.468519"], ["updated_at", "2019-06-22 18:08:33.468519"], ["user", "Stella"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 466], ["created_at", "2019-06-22 18:08:33.470571"], ["updated_at", "2019-06-22 18:08:33.470571"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 466], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.474824"], ["updated_at", "2019-06-22 18:08:33.474824"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 467], ["created_at", "2019-06-22 18:08:33.477196"], ["updated_at", "2019-06-22 18:08:33.477196"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 467], ["created_at", "2019-06-22 18:08:33.478982"], ["updated_at", "2019-06-22 18:08:33.478982"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 467], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.482966"], ["updated_at", "2019-06-22 18:08:33.482966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.485169"], ["updated_at", "2019-06-22 18:08:33.485169"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.487615"], ["updated_at", "2019-06-22 18:08:33.487615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.491588"], ["updated_at", "2019-06-22 18:08:33.491588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.493938"], ["updated_at", "2019-06-22 18:08:33.493938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.496360"], ["updated_at", "2019-06-22 18:08:33.496360"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.500179"], ["updated_at", "2019-06-22 18:08:33.500179"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.502249"], ["updated_at", "2019-06-22 18:08:33.502249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 474], ["created_at", "2019-06-22 18:08:33.504559"], ["updated_at", "2019-06-22 18:08:33.504559"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 474], ["created_at", "2019-06-22 18:08:33.506263"], ["updated_at", "2019-06-22 18:08:33.506263"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 475], ["created_at", "2019-06-22 18:08:33.508278"], ["updated_at", "2019-06-22 18:08:33.508278"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (475, 474)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.514129"], ["updated_at", "2019-06-22 18:08:33.514129"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.516444"], ["updated_at", "2019-06-22 18:08:33.516444"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 476], ["created_at", "2019-06-22 18:08:33.518444"], ["updated_at", "2019-06-22 18:08:33.518444"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 476], ["created_at", "2019-06-22 18:08:33.520603"], ["updated_at", "2019-06-22 18:08:33.520603"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 477], ["created_at", "2019-06-22 18:08:33.522453"], ["updated_at", "2019-06-22 18:08:33.522453"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (476, 477)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.527344"], ["updated_at", "2019-06-22 18:08:33.527344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.529320"], ["updated_at", "2019-06-22 18:08:33.529320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.531319"], ["updated_at", "2019-06-22 18:08:33.531319"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.534013"], ["updated_at", "2019-06-22 18:08:33.534013"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 478], ["created_at", "2019-06-22 18:08:33.536182"], ["updated_at", "2019-06-22 18:08:33.536182"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 479], ["created_at", "2019-06-22 18:08:33.538363"], ["updated_at", "2019-06-22 18:08:33.538363"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 480], ["created_at", "2019-06-22 18:08:33.540219"], ["updated_at", "2019-06-22 18:08:33.540219"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 481], ["created_at", "2019-06-22 18:08:33.542455"], ["updated_at", "2019-06-22 18:08:33.542455"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.547475"], ["updated_at", "2019-06-22 18:08:33.547475"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.549563"], ["updated_at", "2019-06-22 18:08:33.549563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.551540"], ["updated_at", "2019-06-22 18:08:33.551540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.554057"], ["updated_at", "2019-06-22 18:08:33.554057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 482], ["created_at", "2019-06-22 18:08:33.556088"], ["updated_at", "2019-06-22 18:08:33.556088"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 483], ["created_at", "2019-06-22 18:08:33.558052"], ["updated_at", "2019-06-22 18:08:33.558052"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 484], ["created_at", "2019-06-22 18:08:33.560110"], ["updated_at", "2019-06-22 18:08:33.560110"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 485], ["created_at", "2019-06-22 18:08:33.562093"], ["updated_at", "2019-06-22 18:08:33.562093"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.566374"], ["updated_at", "2019-06-22 18:08:33.566374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.568440"], ["updated_at", "2019-06-22 18:08:33.568440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.570567"], ["updated_at", "2019-06-22 18:08:33.570567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.572795"], ["updated_at", "2019-06-22 18:08:33.572795"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 486], ["created_at", "2019-06-22 18:08:33.574751"], ["updated_at", "2019-06-22 18:08:33.574751"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 487], ["created_at", "2019-06-22 18:08:33.576550"], ["updated_at", "2019-06-22 18:08:33.576550"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 488], ["created_at", "2019-06-22 18:08:33.578284"], ["updated_at", "2019-06-22 18:08:33.578284"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 489], ["created_at", "2019-06-22 18:08:33.580292"], ["updated_at", "2019-06-22 18:08:33.580292"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.584675"], ["updated_at", "2019-06-22 18:08:33.584675"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.587086"], ["updated_at", "2019-06-22 18:08:33.587086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.589096"], ["updated_at", "2019-06-22 18:08:33.589096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.591053"], ["updated_at", "2019-06-22 18:08:33.591053"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 490], ["created_at", "2019-06-22 18:08:33.593282"], ["updated_at", "2019-06-22 18:08:33.593282"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 491], ["created_at", "2019-06-22 18:08:33.595142"], ["updated_at", "2019-06-22 18:08:33.595142"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 492], ["created_at", "2019-06-22 18:08:33.597025"], ["updated_at", "2019-06-22 18:08:33.597025"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 493], ["created_at", "2019-06-22 18:08:33.598907"], ["updated_at", "2019-06-22 18:08:33.598907"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.605647"], ["updated_at", "2019-06-22 18:08:33.605647"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:33.607896"], ["updated_at", "2019-06-22 18:08:33.607896"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 494], ["author_id", 215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 494], ["created_at", "2019-06-22 18:08:33.611237"], ["updated_at", "2019-06-22 18:08:33.611237"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.614673"], ["updated_at", "2019-06-22 18:08:33.614673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.616912"], ["updated_at", "2019-06-22 18:08:33.616912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.619558"], ["updated_at", "2019-06-22 18:08:33.619558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.621925"], ["updated_at", "2019-06-22 18:08:33.621925"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 495], ["created_at", "2019-06-22 18:08:33.624118"], ["updated_at", "2019-06-22 18:08:33.624118"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 496], ["created_at", "2019-06-22 18:08:33.626390"], ["updated_at", "2019-06-22 18:08:33.626390"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 497], ["created_at", "2019-06-22 18:08:33.628525"], ["updated_at", "2019-06-22 18:08:33.628525"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 498], ["created_at", "2019-06-22 18:08:33.630326"], ["updated_at", "2019-06-22 18:08:33.630326"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 495], ["created_at", "2019-06-22 18:08:33.631931"], ["updated_at", "2019-06-22 18:08:33.631931"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 496], ["created_at", "2019-06-22 18:08:33.633515"], ["updated_at", "2019-06-22 18:08:33.633515"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 497], ["created_at", "2019-06-22 18:08:33.635048"], ["updated_at", "2019-06-22 18:08:33.635048"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 495], ["created_at", "2019-06-22 18:08:33.636669"], ["updated_at", "2019-06-22 18:08:33.636669"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 496], ["created_at", "2019-06-22 18:08:33.638470"], ["updated_at", "2019-06-22 18:08:33.638470"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 495], ["created_at", "2019-06-22 18:08:33.640151"], ["updated_at", "2019-06-22 18:08:33.640151"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.647025"], ["updated_at", "2019-06-22 18:08:33.647025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 499], ["created_at", "2019-06-20 18:08:33.648111"], ["updated_at", "2019-06-22 18:08:33.649204"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 499], ["created_at", "2019-06-19 18:08:33.650244"], ["updated_at", "2019-06-22 18:08:33.651042"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 499], ["created_at", "2019-06-18 18:08:33.651932"], ["updated_at", "2019-06-22 18:08:33.653194"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:33.656953"], ["updated_at", "2019-06-22 18:08:33.656953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 500], ["created_at", "2019-06-20 18:08:33.658018"], ["updated_at", "2019-06-22 18:08:33.659058"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 500], ["created_at", "2019-06-19 18:08:33.660061"], ["updated_at", "2019-06-22 18:08:33.660925"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 500], ["created_at", "2019-06-18 18:08:33.661920"], ["updated_at", "2019-06-22 18:08:33.662761"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob"], ["created_at", "2019-06-22 18:08:37.934575"], ["updated_at", "2019-06-22 18:08:37.934575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "wrinkled time is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Wrinkled Time Is Tite"], ["pages", 483], ["pub_year", 1989], ["thumb_url", "Party and bullshit"], ["created_at", "2019-06-22 18:08:37.960577"], ["updated_at", "2019-06-22 18:08:37.960577"]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 501], ["author_id", 216]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "life is tite"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Life Is Tite"], ["pages", 222], ["pub_year", 1888], ["thumb_url", "fake thumbs are hard"], ["created_at", "2019-06-22 18:08:37.976466"], ["updated_at", "2019-06-22 18:08:37.976466"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 502], ["author_id", 216]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:37 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 501]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 502]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 502]]
  Rendered books/index.html.erb within layouts/application (23.3ms)
Completed 200 OK in 32ms (Views: 25.2ms | ActiveRecord: 4.4ms)
Started GET "/authors/216" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"216"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 216], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 216]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 501], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 501]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 502], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 502]]
  Rendered authors/show.html.erb within layouts/application (9.3ms)
Completed 200 OK in 15ms (Views: 10.6ms | ActiveRecord: 1.4ms)
Started GET "/books/501" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"501"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 501], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 501]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 501], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 501], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 501]]
  Rendered books/show.html.erb within layouts/application (10.1ms)
Completed 200 OK in 15ms (Views: 9.7ms | ActiveRecord: 1.5ms)
Started GET "/authors/216" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"216"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 216], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 216]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 501], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 501]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 502], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 502]]
  Rendered authors/show.html.erb within layouts/application (7.8ms)
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:38.081653"], ["updated_at", "2019-06-22 18:08:38.081653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:38.085150"], ["updated_at", "2019-06-22 18:08:38.085150"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 503], ["author_id", 217]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:38.091813"], ["updated_at", "2019-06-22 18:08:38.091813"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 504], ["author_id", 217]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 503], ["created_at", "2019-06-22 18:08:38.109239"], ["updated_at", "2019-06-22 18:08:38.109239"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/217" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"217"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 217], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 217]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 503], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 503], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 503], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 503], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 503], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 503]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 504], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 504]]
  Rendered authors/show.html.erb within layouts/application (11.8ms)
Completed 200 OK in 22ms (Views: 19.6ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Guuuurrrr"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Guuuurrrr"], ["pages", 348], ["pub_year", 1970], ["created_at", "2019-06-22 18:08:38.141560"], ["updated_at", "2019-06-22 18:08:38.141560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Person"], ["created_at", "2019-06-22 18:08:38.143938"], ["updated_at", "2019-06-22 18:08:38.143938"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 505], ["author_id", 218]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Human"], ["created_at", "2019-06-22 18:08:38.147488"], ["updated_at", "2019-06-22 18:08:38.147488"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 505], ["author_id", 219]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Nooooooo"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Nooooooo"], ["pages", 34], ["pub_year", 1999], ["created_at", "2019-06-22 18:08:38.151886"], ["updated_at", "2019-06-22 18:08:38.151886"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 506], ["author_id", 219]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/218" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"218"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 218]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 505], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 505]]
  Rendered authors/show.html.erb within layouts/application (4.1ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 0.9ms)
Started DELETE "/authors/218" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by AuthorsController#destroy as HTML
  Parameters: {"id"=>"218"}
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "books"."id" FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 218]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = 505[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 505]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 505]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 240]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "book_authors" WHERE "book_authors"."id" = $1[0m  [["id", 241]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 505]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 218]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "authors" WHERE "authors"."id" = $1[0m  [["id", 218]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.9ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 506]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 506]]
  Rendered books/index.html.erb within layouts/application (7.2ms)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:38.197067"], ["updated_at", "2019-06-22 18:08:38.197067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:38.199254"], ["updated_at", "2019-06-22 18:08:38.199254"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 507], ["author_id", 220]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:38.202605"], ["updated_at", "2019-06-22 18:08:38.202605"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 507], ["author_id", 221]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:38.206785"], ["updated_at", "2019-06-22 18:08:38.206785"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 508], ["author_id", 220]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 18:08:38.211450"], ["updated_at", "2019-06-22 18:08:38.211450"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 509], ["author_id", 220]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/220" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"220"}
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 220]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 507], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 507]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 508], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 508]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 509], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 509]]
  Rendered authors/show.html.erb within layouts/application (7.3ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "1"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "1"], ["pages", 123], ["pub_year", 1633], ["thumb_url", "http://1.bp.blogspot.com/-0Eud_yilPHE/T9YoB5EkjwI/AAAAAAAACoU/i03_cZPChjs/s1600/books_color3_1024x1024_signed_ipad.jpg"], ["created_at", "2019-06-22 18:08:38.234605"], ["updated_at", "2019-06-22 18:08:38.234605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "2 Pac"], ["created_at", "2019-06-22 18:08:38.236847"], ["updated_at", "2019-06-22 18:08:38.236847"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 510], ["author_id", 222]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:38.240291"], ["updated_at", "2019-06-22 18:08:38.240291"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 510], ["author_id", 223]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "2"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "2"], ["pages", 123], ["pub_year", 1734], ["thumb_url", "http://www.clipartsuggest.com/images/402/spanish-mission-clipart-http-www-dreamstime-com-royalty-free-stock-SbdxDC-clipart.jpg"], ["created_at", "2019-06-22 18:08:38.245877"], ["updated_at", "2019-06-22 18:08:38.245877"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 511], ["author_id", 222]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "3"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "3"], ["pages", 3567], ["pub_year", 2007], ["thumb_url", "https://imaginationsoup.net/wp-content/uploads/2016/01/chapter-books-about-zombies.jpg"], ["created_at", "2019-06-22 18:08:38.251154"], ["updated_at", "2019-06-22 18:08:38.251154"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 512], ["author_id", 222]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/authors/222" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"222"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 222]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 510], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 510]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 511], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 511]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 512], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 512]]
  Rendered authors/show.html.erb within layouts/application (8.4ms)
Completed 200 OK in 10ms (Views: 7.5ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.270373"], ["updated_at", "2019-06-22 18:08:38.270373"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 513], ["created_at", "2019-06-22 18:08:38.272547"], ["updated_at", "2019-06-22 18:08:38.272547"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 513], ["created_at", "2019-06-22 18:08:38.274359"], ["updated_at", "2019-06-22 18:08:38.274359"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 513], ["created_at", "2019-06-22 18:08:38.276329"], ["updated_at", "2019-06-22 18:08:38.276329"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 513], ["created_at", "2019-06-22 18:08:38.278966"], ["updated_at", "2019-06-22 18:08:38.278966"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 513]]
  Rendered books/index.html.erb within layouts/application (8.2ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 513]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.297996"], ["updated_at", "2019-06-22 18:08:38.297996"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.300092"], ["updated_at", "2019-06-22 18:08:38.300092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.302056"], ["updated_at", "2019-06-22 18:08:38.302056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.304296"], ["updated_at", "2019-06-22 18:08:38.304296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 514], ["created_at", "2019-06-22 18:08:38.306379"], ["updated_at", "2019-06-22 18:08:38.306379"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 515], ["created_at", "2019-06-22 18:08:38.308264"], ["updated_at", "2019-06-22 18:08:38.308264"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 516], ["created_at", "2019-06-22 18:08:38.310388"], ["updated_at", "2019-06-22 18:08:38.310388"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 517], ["created_at", "2019-06-22 18:08:38.312168"], ["updated_at", "2019-06-22 18:08:38.312168"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 514], ["created_at", "2019-06-22 18:08:38.313782"], ["updated_at", "2019-06-22 18:08:38.313782"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 515], ["created_at", "2019-06-22 18:08:38.315809"], ["updated_at", "2019-06-22 18:08:38.315809"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 516], ["created_at", "2019-06-22 18:08:38.317569"], ["updated_at", "2019-06-22 18:08:38.317569"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 514], ["created_at", "2019-06-22 18:08:38.319214"], ["updated_at", "2019-06-22 18:08:38.319214"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 515], ["created_at", "2019-06-22 18:08:38.320844"], ["updated_at", "2019-06-22 18:08:38.320844"], ["user", "Stella"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 514], ["created_at", "2019-06-22 18:08:38.325438"], ["updated_at", "2019-06-22 18:08:38.325438"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 514]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 514]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 514]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 514]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 515]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 516]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 517]]
  Rendered books/index.html.erb within layouts/application (25.1ms)
Completed 200 OK in 27ms (Views: 20.9ms | ActiveRecord: 5.5ms)
Started GET "/books?arg=highest_rated" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"highest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 514]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 514]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 514]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 514]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 515]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 515]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 516]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 516]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 517]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 517]]
  Rendered books/index.html.erb within layouts/application (24.2ms)
Completed 200 OK in 26ms (Views: 20.0ms | ActiveRecord: 5.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.396545"], ["updated_at", "2019-06-22 18:08:38.396545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.398821"], ["updated_at", "2019-06-22 18:08:38.398821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.400833"], ["updated_at", "2019-06-22 18:08:38.400833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.402735"], ["updated_at", "2019-06-22 18:08:38.402735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 518], ["created_at", "2019-06-22 18:08:38.404647"], ["updated_at", "2019-06-22 18:08:38.404647"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 519], ["created_at", "2019-06-22 18:08:38.406441"], ["updated_at", "2019-06-22 18:08:38.406441"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 520], ["created_at", "2019-06-22 18:08:38.408321"], ["updated_at", "2019-06-22 18:08:38.408321"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 521], ["created_at", "2019-06-22 18:08:38.410072"], ["updated_at", "2019-06-22 18:08:38.410072"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 518], ["created_at", "2019-06-22 18:08:38.411667"], ["updated_at", "2019-06-22 18:08:38.411667"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 519], ["created_at", "2019-06-22 18:08:38.413242"], ["updated_at", "2019-06-22 18:08:38.413242"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 520], ["created_at", "2019-06-22 18:08:38.414855"], ["updated_at", "2019-06-22 18:08:38.414855"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 518], ["created_at", "2019-06-22 18:08:38.416434"], ["updated_at", "2019-06-22 18:08:38.416434"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 519], ["created_at", "2019-06-22 18:08:38.418038"], ["updated_at", "2019-06-22 18:08:38.418038"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 518], ["created_at", "2019-06-22 18:08:38.419795"], ["updated_at", "2019-06-22 18:08:38.419795"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 518]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 521]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 518]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 518]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 518]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 519]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 521]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 521]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 521]]
  Rendered books/index.html.erb within layouts/application (17.2ms)
Completed 200 OK in 18ms (Views: 14.2ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=lowest_rated" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"lowest_rated"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 518]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 521]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 521]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 521]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 521]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 520]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 520]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 519]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 519]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 518]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 518]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 518]]
  Rendered books/index.html.erb within layouts/application (18.3ms)
Completed 200 OK in 19ms (Views: 14.9ms | ActiveRecord: 4.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.466233"], ["updated_at", "2019-06-22 18:08:38.466233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.468466"], ["updated_at", "2019-06-22 18:08:38.468466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.470640"], ["updated_at", "2019-06-22 18:08:38.470640"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.472727"], ["updated_at", "2019-06-22 18:08:38.472727"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 522], ["created_at", "2019-06-22 18:08:38.474744"], ["updated_at", "2019-06-22 18:08:38.474744"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 523], ["created_at", "2019-06-22 18:08:38.476694"], ["updated_at", "2019-06-22 18:08:38.476694"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 524], ["created_at", "2019-06-22 18:08:38.478561"], ["updated_at", "2019-06-22 18:08:38.478561"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 525], ["created_at", "2019-06-22 18:08:38.480365"], ["updated_at", "2019-06-22 18:08:38.480365"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 522], ["created_at", "2019-06-22 18:08:38.482177"], ["updated_at", "2019-06-22 18:08:38.482177"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 523], ["created_at", "2019-06-22 18:08:38.484201"], ["updated_at", "2019-06-22 18:08:38.484201"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 524], ["created_at", "2019-06-22 18:08:38.485893"], ["updated_at", "2019-06-22 18:08:38.485893"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 522], ["created_at", "2019-06-22 18:08:38.487553"], ["updated_at", "2019-06-22 18:08:38.487553"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 523], ["created_at", "2019-06-22 18:08:38.489204"], ["updated_at", "2019-06-22 18:08:38.489204"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 522], ["created_at", "2019-06-22 18:08:38.490844"], ["updated_at", "2019-06-22 18:08:38.490844"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 525]]
  Rendered books/index.html.erb within layouts/application (21.1ms)
Completed 200 OK in 23ms (Views: 18.4ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=descending_pages" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 525]]
  Rendered books/index.html.erb within layouts/application (17.5ms)
Completed 200 OK in 19ms (Views: 14.3ms | ActiveRecord: 3.8ms)
Started GET "/books?arg=ascending_pages" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_pages"}
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 525]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 525]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 524]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 524]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 523]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 523]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 522]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 522]]
  Rendered books/index.html.erb within layouts/application (16.6ms)
Completed 200 OK in 18ms (Views: 13.8ms | ActiveRecord: 3.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 1000], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.561370"], ["updated_at", "2019-06-22 18:08:38.561370"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cars"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cars"], ["pages", 700], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.563560"], ["updated_at", "2019-06-22 18:08:38.563560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Trees in Space"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Trees In Space"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.565511"], ["updated_at", "2019-06-22 18:08:38.565511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Ocean"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Ocean"], ["pages", 200], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.567408"], ["updated_at", "2019-06-22 18:08:38.567408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 526], ["created_at", "2019-06-22 18:08:38.569345"], ["updated_at", "2019-06-22 18:08:38.569345"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 527], ["created_at", "2019-06-22 18:08:38.571129"], ["updated_at", "2019-06-22 18:08:38.571129"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 528], ["created_at", "2019-06-22 18:08:38.572833"], ["updated_at", "2019-06-22 18:08:38.572833"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 529], ["created_at", "2019-06-22 18:08:38.574587"], ["updated_at", "2019-06-22 18:08:38.574587"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 526], ["created_at", "2019-06-22 18:08:38.576449"], ["updated_at", "2019-06-22 18:08:38.576449"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 527], ["created_at", "2019-06-22 18:08:38.578165"], ["updated_at", "2019-06-22 18:08:38.578165"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 528], ["created_at", "2019-06-22 18:08:38.579885"], ["updated_at", "2019-06-22 18:08:38.579885"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 526], ["created_at", "2019-06-22 18:08:38.581683"], ["updated_at", "2019-06-22 18:08:38.581683"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 527], ["created_at", "2019-06-22 18:08:38.583439"], ["updated_at", "2019-06-22 18:08:38.583439"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 526], ["created_at", "2019-06-22 18:08:38.585150"], ["updated_at", "2019-06-22 18:08:38.585150"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 529]]
  Rendered books/index.html.erb within layouts/application (17.2ms)
Completed 200 OK in 18ms (Views: 14.3ms | ActiveRecord: 3.6ms)
Started GET "/books?arg=descending_review_count" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"descending_review_count"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (526, 527, 528, 529)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 529]]
  Rendered books/index.html.erb within layouts/application (18.1ms)
Completed 200 OK in 21ms (Views: 14.9ms | ActiveRecord: 4.5ms)
Started GET "/books?arg=ascending_review_count" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Parameters: {"arg"=>"ascending_review_count"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (529, 528, 527, 526)[0m
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 529]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 529]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 528]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 528]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 527]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 527]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 526]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 526]]
  Rendered books/index.html.erb within layouts/application (17.1ms)
Completed 200 OK in 20ms (Views: 14.1ms | ActiveRecord: 4.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.656050"], ["updated_at", "2019-06-22 18:08:38.656050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.658158"], ["updated_at", "2019-06-22 18:08:38.658158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.660402"], ["updated_at", "2019-06-22 18:08:38.660402"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.662603"], ["updated_at", "2019-06-22 18:08:38.662603"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 530], ["created_at", "2019-06-22 18:08:38.664656"], ["updated_at", "2019-06-22 18:08:38.664656"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 531], ["created_at", "2019-06-22 18:08:38.666504"], ["updated_at", "2019-06-22 18:08:38.666504"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 532], ["created_at", "2019-06-22 18:08:38.668246"], ["updated_at", "2019-06-22 18:08:38.668246"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Eh."], ["full_review", "Yay"], ["book_id", 533], ["created_at", "2019-06-22 18:08:38.670043"], ["updated_at", "2019-06-22 18:08:38.670043"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 530], ["created_at", "2019-06-22 18:08:38.671724"], ["updated_at", "2019-06-22 18:08:38.671724"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 531], ["created_at", "2019-06-22 18:08:38.673284"], ["updated_at", "2019-06-22 18:08:38.673284"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 532], ["created_at", "2019-06-22 18:08:38.674934"], ["updated_at", "2019-06-22 18:08:38.674934"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 530], ["created_at", "2019-06-22 18:08:38.676807"], ["updated_at", "2019-06-22 18:08:38.676807"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Fun!"], ["full_review", "Yay"], ["book_id", 531], ["created_at", "2019-06-22 18:08:38.678516"], ["updated_at", "2019-06-22 18:08:38.678516"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 530], ["created_at", "2019-06-22 18:08:38.680034"], ["updated_at", "2019-06-22 18:08:38.680034"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 530]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 533]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 530]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 530]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 530]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 531]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 532]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 533]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 533]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 533]]
  Rendered books/index.html.erb within layouts/application (18.0ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 530]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 531]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 532]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.711244"], ["updated_at", "2019-06-22 18:08:38.711244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:38.713299"], ["updated_at", "2019-06-22 18:08:38.713299"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 534], ["author_id", 224]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 534], ["created_at", "2019-06-22 18:08:38.716914"], ["updated_at", "2019-06-22 18:08:38.716914"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 534], ["created_at", "2019-06-22 18:08:38.718573"], ["updated_at", "2019-06-22 18:08:38.718573"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 534], ["created_at", "2019-06-22 18:08:38.720239"], ["updated_at", "2019-06-22 18:08:38.720239"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 534], ["created_at", "2019-06-22 18:08:38.722031"], ["updated_at", "2019-06-22 18:08:38.722031"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/534" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"534"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 534], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 534]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 534]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 534], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 534], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 534]]
  Rendered books/show.html.erb within layouts/application (5.9ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.738776"], ["updated_at", "2019-06-22 18:08:38.738776"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:38.741061"], ["updated_at", "2019-06-22 18:08:38.741061"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 535], ["author_id", 225]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 535], ["created_at", "2019-06-22 18:08:38.744986"], ["updated_at", "2019-06-22 18:08:38.744986"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 535], ["created_at", "2019-06-22 18:08:38.746828"], ["updated_at", "2019-06-22 18:08:38.746828"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 535], ["created_at", "2019-06-22 18:08:38.748531"], ["updated_at", "2019-06-22 18:08:38.748531"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 535], ["created_at", "2019-06-22 18:08:38.750129"], ["updated_at", "2019-06-22 18:08:38.750129"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/535" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"535"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 535], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 535]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 535]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 535], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 535], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 535]]
  Rendered books/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.766204"], ["updated_at", "2019-06-22 18:08:38.766204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:38.768578"], ["updated_at", "2019-06-22 18:08:38.768578"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 536], ["author_id", 226]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 536], ["created_at", "2019-06-22 18:08:38.771990"], ["updated_at", "2019-06-22 18:08:38.771990"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Cool!"], ["full_review", "SO good"], ["book_id", 536], ["created_at", "2019-06-22 18:08:38.773819"], ["updated_at", "2019-06-22 18:08:38.773819"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Fresh!"], ["full_review", "Pretty great!"], ["book_id", 536], ["created_at", "2019-06-22 18:08:38.775591"], ["updated_at", "2019-06-22 18:08:38.775591"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Lit!"], ["full_review", "Loved it!"], ["book_id", 536], ["created_at", "2019-06-22 18:08:38.777352"], ["updated_at", "2019-06-22 18:08:38.777352"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/536" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"536"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 536], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 536]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 536]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 536], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 536], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 536]]
  Rendered books/show.html.erb within layouts/application (5.9ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 536]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Great Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Great Book"], ["pages", 4329], ["pub_year", 1874], ["created_at", "2019-06-22 18:08:38.792338"], ["updated_at", "2019-06-22 18:08:38.792338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/537" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"537"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 537], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 537]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 537]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 537], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 537], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 537]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 1.2ms)
Started DELETE "/books/537" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#destroy as HTML
  Parameters: {"id"=>"537"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 537], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 537]]
  [1m[36mBookAuthor Load (0.2ms)[0m  [1m[34mSELECT "book_authors".* FROM "book_authors" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 537]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "books" WHERE "books"."id" = $1[0m  [["id", 537]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.816602"], ["updated_at", "2019-06-22 18:08:38.816602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.818802"], ["updated_at", "2019-06-22 18:08:38.818802"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:38.821057"], ["updated_at", "2019-06-22 18:08:38.821057"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 538], ["author_id", 227]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:38.824781"], ["updated_at", "2019-06-22 18:08:38.824781"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 538], ["author_id", 228]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 18:08:38.829494"], ["updated_at", "2019-06-22 18:08:38.829494"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 539], ["author_id", 229]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 538]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 538]]
  [1m[36mAuthor Load (0.5ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 538]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 539]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 539]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 539]]
  Rendered books/index.html.erb within layouts/application (15.4ms)
Completed 200 OK in 17ms (Views: 12.6ms | ActiveRecord: 3.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.864418"], ["updated_at", "2019-06-22 18:08:38.864418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Lord of the Rings"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Lord Of The Rings"], ["pages", 1008], ["pub_year", 1954], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:38.867018"], ["updated_at", "2019-06-22 18:08:38.867018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:38.869068"], ["updated_at", "2019-06-22 18:08:38.869068"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 540], ["author_id", 230]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:38.872337"], ["updated_at", "2019-06-22 18:08:38.872337"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 540], ["author_id", 231]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bob Marley"], ["created_at", "2019-06-22 18:08:38.876859"], ["updated_at", "2019-06-22 18:08:38.876859"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 541], ["author_id", 232]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 540]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 540]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 540]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 541]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 541]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 541]]
  Rendered books/index.html.erb within layouts/application (14.9ms)
Completed 200 OK in 17ms (Views: 12.5ms | ActiveRecord: 3.7ms)
Started GET "/books/540" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"540"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 540], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 540]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 540]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 540], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 540], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 540]]
  Rendered books/show.html.erb within layouts/application (3.9ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.9ms)
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (16.0ms)
Completed 200 OK in 20ms (Views: 17.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "tupac"], ["created_at", "2019-06-22 18:08:38.946883"], ["updated_at", "2019-06-22 18:08:38.946883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:38.955598"], ["updated_at", "2019-06-22 18:08:38.955598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:38.957701"], ["updated_at", "2019-06-22 18:08:38.957701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 542], ["author_id", 234]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 542], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 11ms (ActiveRecord: 2.3ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 542]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 542]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 542]]
  Rendered books/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.6ms)
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" ORDER BY "authors"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1 ORDER BY "authors"."id" ASC LIMIT $2[0m  [["book_id", 542], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:38 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"cool book name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:38.991409"], ["updated_at", "2019-06-22 18:08:38.991409"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:38.993908"], ["updated_at", "2019-06-22 18:08:38.993908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 543], ["author_id", 235]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:38.998506"], ["updated_at", "2019-06-22 18:08:38.998506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 543], ["author_id", 236]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 543], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 15ms (ActiveRecord: 3.4ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 543]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 543]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 543]]
  Rendered books/index.html.erb within layouts/application (6.1ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.6ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 543]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:39.019153"], ["updated_at", "2019-06-22 18:08:39.019153"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Cool Book Name", "pages"=>"100", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Cool Book Name"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Cool Book Name"], ["pages", 100], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["created_at", "2019-06-22 18:08:39.030843"], ["updated_at", "2019-06-22 18:08:39.030843"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 544], ["author_id", 237]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:39.037207"], ["updated_at", "2019-06-22 18:08:39.037207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 544], ["author_id", 238]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Cool Book Name"], ["id", 544], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 3.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 544]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 544]]
  [1m[36mAuthor Load (0.4ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 544]]
  Rendered books/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "authors"."name" FROM "authors"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"1000000000", "pub_year"=>"1982", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 1000000000], ["pub_year", 1982], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:39.068856"], ["updated_at", "2019-06-22 18:08:39.068856"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:39.071899"], ["updated_at", "2019-06-22 18:08:39.071899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1", "thumb_url"=>"/path/to/image.jpg", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1], ["thumb_url", "/path/to/image.jpg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "title"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1990], ["thumb_url", "aeuifh"], ["created_at", "2019-06-22 18:08:39.113138"], ["updated_at", "2019-06-22 18:08:39.113138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"title", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"aeuifh", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Title"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "aeuifh"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Title"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 545]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 545]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 545]]
  Rendered books/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/books/new" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#new as HTML
  Rendering books/new.html.erb within layouts/application
  Rendered books/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#create as HTML
  Parameters: {"utf8"=>"✓", "book"=>{"title"=>"Book", "pages"=>"100", "pub_year"=>"1991", "thumb_url"=>"", "authors"=>"tupac, Biggie"}, "commit"=>"Add a Book"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."title" = $1 AND "books"."pages" = $2 AND "books"."pub_year" = $3 AND "books"."thumb_url" = $4 LIMIT $5[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Book"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Book"], ["pages", 100], ["pub_year", 1991], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:39.154266"], ["updated_at", "2019-06-22 18:08:39.154266"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Tupac"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tupac"], ["created_at", "2019-06-22 18:08:39.156310"], ["updated_at", "2019-06-22 18:08:39.156310"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 546], ["author_id", 241]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."name" = $1 LIMIT $2[0m  [["name", "Biggie"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Biggie"], ["created_at", "2019-06-22 18:08:39.160999"], ["updated_at", "2019-06-22 18:08:39.160999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 546], ["author_id", 242]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 AND ("books"."id" != $2) LIMIT $3[0m  [["title", "Book"], ["id", 546], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books
Completed 302 Found in 14ms (ActiveRecord: 2.9ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 546]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 546]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 546]]
  Rendered books/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.5ms)
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:39.177165"], ["updated_at", "2019-06-22 18:08:39.177165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.179267"], ["updated_at", "2019-06-22 18:08:39.179267"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 547], ["author_id", 243]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:39.182607"], ["updated_at", "2019-06-22 18:08:39.182607"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 547], ["author_id", 244]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 547], ["created_at", "2019-06-22 18:08:39.185998"], ["updated_at", "2019-06-22 18:08:39.185998"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 547], ["created_at", "2019-06-22 18:08:39.189694"], ["updated_at", "2019-06-22 18:08:39.189694"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 547], ["created_at", "2019-06-22 18:08:39.191557"], ["updated_at", "2019-06-22 18:08:39.191557"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/547" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"547"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 547], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 547]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 547]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 547], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 547], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 547]]
  Rendered books/show.html.erb within layouts/application (5.7ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:39.212393"], ["updated_at", "2019-06-22 18:08:39.212393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.214522"], ["updated_at", "2019-06-22 18:08:39.214522"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 548], ["author_id", 245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Ted Nugent"], ["created_at", "2019-06-22 18:08:39.217752"], ["updated_at", "2019-06-22 18:08:39.217752"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 548], ["author_id", 246]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Great Book!"], ["full_review", "OH my god, I love this boooooooooook!"], ["book_id", 548], ["created_at", "2019-06-22 18:08:39.220996"], ["updated_at", "2019-06-22 18:08:39.220996"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "BOOK SUCKS"], ["full_review", "Who reads in 2019???"], ["book_id", 548], ["created_at", "2019-06-22 18:08:39.222928"], ["updated_at", "2019-06-22 18:08:39.222928"], ["user", "Rob S."]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "It was ok. "], ["full_review", "I mean, I've read better."], ["book_id", 548], ["created_at", "2019-06-22 18:08:39.224688"], ["updated_at", "2019-06-22 18:08:39.224688"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/548" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"548"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 548], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 548]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 548]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 548], ["LIMIT", 3]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 548], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 548]]
  Rendered books/show.html.erb within layouts/application (6.5ms)
Completed 200 OK in 8ms (Views: 6.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.3ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 1.1ms)
Started GET "/" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by HomeController#index as HTML
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.263367"], ["updated_at", "2019-06-22 18:08:39.263367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.265969"], ["updated_at", "2019-06-22 18:08:39.265969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.268362"], ["updated_at", "2019-06-22 18:08:39.268362"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 549], ["author_id", 247]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.271792"], ["updated_at", "2019-06-22 18:08:39.271792"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 550], ["author_id", 248]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 549], ["created_at", "2019-06-22 18:08:39.275176"], ["updated_at", "2019-06-22 18:08:39.275176"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 550], ["created_at", "2019-06-22 18:08:39.277337"], ["updated_at", "2019-06-22 18:08:39.277337"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/549" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"549"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 549], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 549]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 549]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 549], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 549], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 549]]
  Rendered books/show.html.erb within layouts/application (4.4ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 549], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 550], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (4.1ms)
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 0.5ms)
Started DELETE "/reviews/779" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#destroy as HTML
  Parameters: {"id"=>"779"}
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 779], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 779]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/reviews
Completed 302 Found in 2ms (ActiveRecord: 0.7ms)
Started GET "/reviews" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" IS NULL[0m
  Rendered reviews/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.313791"], ["updated_at", "2019-06-22 18:08:39.313791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.316468"], ["updated_at", "2019-06-22 18:08:39.316468"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 551], ["author_id", 249]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/551" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"551"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 551], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 551]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 551]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 551], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 551], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 551]]
  Rendered books/show.html.erb within layouts/application (4.0ms)
Completed 200 OK in 6ms (Views: 3.8ms | ActiveRecord: 1.0ms)
Started GET "/books/551/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"551"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 551], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (3.8ms)
Completed 200 OK in 7ms (Views: 4.5ms | ActiveRecord: 0.2ms)
Started POST "/books/551/reviews" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"551"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 551], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 551], ["created_at", "2019-06-22 18:08:39.344657"], ["updated_at", "2019-06-22 18:08:39.344657"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/551
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/551" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"551"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 551], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 551]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 551]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 551], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 551], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 551]]
  Rendered books/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.362145"], ["updated_at", "2019-06-22 18:08:39.362145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.364290"], ["updated_at", "2019-06-22 18:08:39.364290"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 552], ["author_id", 250]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/552" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"552"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 552]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 552]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 552], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 552], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 552]]
  Rendered books/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.9ms)
Started GET "/books/552/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"552"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.1ms)
Started POST "/books/552/reviews" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"Mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"552"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Review of Book"], ["full_review", "OMG, love this book!!!!!!!!!!!!!!!!!!!"], ["book_id", 552], ["created_at", "2019-06-22 18:08:39.387099"], ["updated_at", "2019-06-22 18:08:39.387099"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/books/552
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
Started GET "/books/552" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"552"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 552]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 552]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 552], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 552], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 552]]
  Rendered books/show.html.erb within layouts/application (5.8ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.2ms)
Started GET "/books/552/reviews/new" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#new as HTML
  Parameters: {"book_id"=>"552"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  Rendering reviews/new.html.erb within layouts/application
  Rendered reviews/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.1ms)
Started POST "/books/552/reviews" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#create as HTML
  Parameters: {"utf8"=>"✓", "review"=>{"user"=>"mills", "heading"=>"Review of Book", "full_review"=>"OMG, love this book!!!!!!!!!!!!!!!!!!!", "score"=>"5"}, "commit"=>"Add a Review", "book_id"=>"552"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
Redirected to http://www.example.com/books/552
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/books/552" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"552"}
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 552]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 552]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 552], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 552], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 552]]
  Rendered books/show.html.erb within layouts/application (5.7ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.421261"], ["updated_at", "2019-06-22 18:08:39.421261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.423623"], ["updated_at", "2019-06-22 18:08:39.423623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.426005"], ["updated_at", "2019-06-22 18:08:39.426005"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 553], ["author_id", 251]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.430347"], ["updated_at", "2019-06-22 18:08:39.430347"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 554], ["author_id", 252]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 553], ["created_at", "2019-06-22 18:08:39.433719"], ["updated_at", "2019-06-22 18:08:39.433719"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 554], ["created_at", "2019-06-22 18:08:39.435609"], ["updated_at", "2019-06-22 18:08:39.435609"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 553], ["created_at", "2019-06-22 18:08:39.437166"], ["updated_at", "2019-06-22 18:08:39.437166"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/553" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"553"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 553], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 553]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 553]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 553], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 553], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 553]]
  Rendered books/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 553], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 554], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.461233"], ["updated_at", "2019-06-22 18:08:39.461233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.463529"], ["updated_at", "2019-06-22 18:08:39.463529"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.465641"], ["updated_at", "2019-06-22 18:08:39.465641"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 555], ["author_id", 253]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Not J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.469572"], ["updated_at", "2019-06-22 18:08:39.469572"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 556], ["author_id", 254]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 555], ["created_at", "2019-06-22 18:08:39.472931"], ["updated_at", "2019-06-22 18:08:39.472931"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not Awesome!"], ["full_review", "Boo"], ["book_id", 556], ["created_at", "2019-06-22 18:08:39.474799"], ["updated_at", "2019-06-22 18:08:39.474799"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Ehhhh"], ["full_review", "Ok, I guess."], ["book_id", 555], ["created_at", "2019-06-22 18:08:39.476614"], ["updated_at", "2019-06-22 18:08:39.476614"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books/555" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"555"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 555], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 555]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 555]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 555], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 555], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 555]]
  Rendered books/show.html.erb within layouts/application (4.9ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 555], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 556], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.497061"], ["updated_at", "2019-06-22 18:08:39.497061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.499162"], ["updated_at", "2019-06-22 18:08:39.499162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 557], ["created_at", "2019-06-20 18:08:39.500152"], ["updated_at", "2019-06-22 18:08:39.501338"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 558], ["created_at", "2019-06-19 18:08:39.502359"], ["updated_at", "2019-06-22 18:08:39.505331"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 557], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 558], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=newest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"newest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" DESC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 557], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 558], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.521264"], ["updated_at", "2019-06-22 18:08:39.521264"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 510], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.523324"], ["updated_at", "2019-06-22 18:08:39.523324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 559], ["created_at", "2019-06-20 18:08:39.524321"], ["updated_at", "2019-06-22 18:08:39.525482"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 1], ["heading", "Not good."], ["full_review", "Boo"], ["book_id", 560], ["created_at", "2019-06-19 18:08:39.526857"], ["updated_at", "2019-06-22 18:08:39.527847"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 559], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 560], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.5ms)
Started GET "/reviews?arg=oldest_reviews&name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"arg"=>"oldest_reviews", "name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1 ORDER BY "reviews"."created_at" ASC[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 560], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 559], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.542940"], ["updated_at", "2019-06-22 18:08:39.542940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.545524"], ["updated_at", "2019-06-22 18:08:39.545524"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 561], ["author_id", 255]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 561], ["created_at", "2019-06-22 18:08:39.549410"], ["updated_at", "2019-06-22 18:08:39.549410"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#index as HTML
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 561]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 561]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 561]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 561]]
  [1m[36mAuthor Load (0.3ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 561]]
  Rendered books/index.html.erb within layouts/application (7.4ms)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 1.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 561], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.4ms)
Started GET "/books/561" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by BooksController#show as HTML
  Parameters: {"id"=>"561"}
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 561], ["LIMIT", 1]]
  Rendering books/show.html.erb within layouts/application
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 561]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 561]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 561], ["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 561], ["LIMIT", 3]]
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 561]]
  Rendered books/show.html.erb within layouts/application (4.6ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 1.0ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 561], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.4ms)
Started GET "/authors/255" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by AuthorsController#show as HTML
  Parameters: {"id"=>"255"}
  [1m[36mAuthor Load (0.1ms)[0m  [1m[34mSELECT  "authors".* FROM "authors" WHERE "authors"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  Rendering authors/show.html.erb within layouts/application
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" INNER JOIN "book_authors" ON "books"."id" = "book_authors"."book_id" WHERE "book_authors"."author_id" = $1[0m  [["author_id", 255]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 561], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 561], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 561], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 561], ["LIMIT", 1]]
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 561], ["LIMIT", 1]]
  [1m[36mAuthor Load (0.2ms)[0m  [1m[34mSELECT "authors".* FROM "authors" INNER JOIN "book_authors" ON "authors"."id" = "book_authors"."author_id" WHERE "book_authors"."book_id" = $1[0m  [["book_id", 561]]
  Rendered authors/show.html.erb within layouts/application (5.3ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.7ms)
Started GET "/reviews?name=Mills" for 127.0.0.1 at 2019-06-22 12:08:39 -0600
Processing by ReviewsController#index as HTML
  Parameters: {"name"=>"Mills"}
  Rendering reviews/index.html.erb within layouts/application
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."user" = $1[0m  [["user", "Mills"]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 561], ["LIMIT", 1]]
  Rendered reviews/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", ""], ["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.670135"], ["updated_at", "2019-06-22 18:08:39.670135"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.672378"], ["updated_at", "2019-06-22 18:08:39.672378"]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 562], ["author_id", 256]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 562], ["created_at", "2019-06-22 18:08:39.676265"], ["updated_at", "2019-06-22 18:08:39.676265"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 562], ["created_at", "2019-06-22 18:08:39.678290"], ["updated_at", "2019-06-22 18:08:39.678290"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 562]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "https://i.pinimg.com/236x/cd/d1/30/cdd130816adbd2e8b70c3ed6607fdb0c--clip-art.jpg"], ["created_at", "2019-06-22 18:08:39.682572"], ["updated_at", "2019-06-22 18:08:39.682572"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.685815"], ["updated_at", "2019-06-22 18:08:39.685815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.687830"], ["updated_at", "2019-06-22 18:08:39.687830"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 564], ["author_id", 257]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 564], ["created_at", "2019-06-22 18:08:39.691376"], ["updated_at", "2019-06-22 18:08:39.691376"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 564], ["created_at", "2019-06-22 18:08:39.693382"], ["updated_at", "2019-06-22 18:08:39.693382"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."score") FROM "reviews" WHERE "reviews"."book_id" = $1[0m  [["book_id", 564]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.697328"], ["updated_at", "2019-06-22 18:08:39.697328"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 565], ["created_at", "2019-06-22 18:08:39.699284"], ["updated_at", "2019-06-22 18:08:39.699284"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 565], ["created_at", "2019-06-22 18:08:39.700953"], ["updated_at", "2019-06-22 18:08:39.700953"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 565], ["created_at", "2019-06-22 18:08:39.702487"], ["updated_at", "2019-06-22 18:08:39.702487"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 565], ["created_at", "2019-06-22 18:08:39.704476"], ["updated_at", "2019-06-22 18:08:39.704476"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 565], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.708803"], ["updated_at", "2019-06-22 18:08:39.708803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 566], ["created_at", "2019-06-22 18:08:39.711376"], ["updated_at", "2019-06-22 18:08:39.711376"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 566], ["created_at", "2019-06-22 18:08:39.713075"], ["updated_at", "2019-06-22 18:08:39.713075"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 566], ["created_at", "2019-06-22 18:08:39.714656"], ["updated_at", "2019-06-22 18:08:39.714656"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 566], ["created_at", "2019-06-22 18:08:39.716640"], ["updated_at", "2019-06-22 18:08:39.716640"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" ASC LIMIT $2[0m  [["book_id", 566], ["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.720922"], ["updated_at", "2019-06-22 18:08:39.720922"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 567], ["created_at", "2019-06-22 18:08:39.722897"], ["updated_at", "2019-06-22 18:08:39.722897"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 567], ["created_at", "2019-06-22 18:08:39.724611"], ["updated_at", "2019-06-22 18:08:39.724611"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."book_id" = $1 ORDER BY "reviews"."score" DESC LIMIT $2[0m  [["book_id", 567], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.729083"], ["updated_at", "2019-06-22 18:08:39.729083"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.731221"], ["updated_at", "2019-06-22 18:08:39.731221"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.733382"], ["updated_at", "2019-06-22 18:08:39.733382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.737446"], ["updated_at", "2019-06-22 18:08:39.737446"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.739710"], ["updated_at", "2019-06-22 18:08:39.739710"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Maybe The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Maybe The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.742104"], ["updated_at", "2019-06-22 18:08:39.742104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."pages" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.745740"], ["updated_at", "2019-06-22 18:08:39.745740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.747746"], ["updated_at", "2019-06-22 18:08:39.747746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 574], ["created_at", "2019-06-22 18:08:39.749644"], ["updated_at", "2019-06-22 18:08:39.749644"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 574], ["created_at", "2019-06-22 18:08:39.751308"], ["updated_at", "2019-06-22 18:08:39.751308"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 575], ["created_at", "2019-06-22 18:08:39.753011"], ["updated_at", "2019-06-22 18:08:39.753011"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" ASC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (575, 574)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.757689"], ["updated_at", "2019-06-22 18:08:39.757689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.759962"], ["updated_at", "2019-06-22 18:08:39.759962"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 576], ["created_at", "2019-06-22 18:08:39.762147"], ["updated_at", "2019-06-22 18:08:39.762147"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 576], ["created_at", "2019-06-22 18:08:39.763839"], ["updated_at", "2019-06-22 18:08:39.763839"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "Eh"], ["full_review", "Great book"], ["book_id", 577], ["created_at", "2019-06-22 18:08:39.765623"], ["updated_at", "2019-06-22 18:08:39.765623"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."book_id" FROM "reviews" INNER JOIN "books" ON "books"."id" = "reviews"."book_id" GROUP BY "reviews"."book_id" ORDER BY "reviews"."count" DESC[0m
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" IN (576, 577)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.770756"], ["updated_at", "2019-06-22 18:08:39.770756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.772843"], ["updated_at", "2019-06-22 18:08:39.772843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.774911"], ["updated_at", "2019-06-22 18:08:39.774911"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.776990"], ["updated_at", "2019-06-22 18:08:39.776990"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 578], ["created_at", "2019-06-22 18:08:39.779556"], ["updated_at", "2019-06-22 18:08:39.779556"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 579], ["created_at", "2019-06-22 18:08:39.781571"], ["updated_at", "2019-06-22 18:08:39.781571"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 580], ["created_at", "2019-06-22 18:08:39.783442"], ["updated_at", "2019-06-22 18:08:39.783442"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 581], ["created_at", "2019-06-22 18:08:39.785274"], ["updated_at", "2019-06-22 18:08:39.785274"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.789454"], ["updated_at", "2019-06-22 18:08:39.789454"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.791529"], ["updated_at", "2019-06-22 18:08:39.791529"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.793844"], ["updated_at", "2019-06-22 18:08:39.793844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.796206"], ["updated_at", "2019-06-22 18:08:39.796206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 582], ["created_at", "2019-06-22 18:08:39.798316"], ["updated_at", "2019-06-22 18:08:39.798316"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 583], ["created_at", "2019-06-22 18:08:39.800515"], ["updated_at", "2019-06-22 18:08:39.800515"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 584], ["created_at", "2019-06-22 18:08:39.802475"], ["updated_at", "2019-06-22 18:08:39.802475"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 585], ["created_at", "2019-06-22 18:08:39.804269"], ["updated_at", "2019-06-22 18:08:39.804269"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.808931"], ["updated_at", "2019-06-22 18:08:39.808931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.811240"], ["updated_at", "2019-06-22 18:08:39.811240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.813230"], ["updated_at", "2019-06-22 18:08:39.813230"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.815202"], ["updated_at", "2019-06-22 18:08:39.815202"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 586], ["created_at", "2019-06-22 18:08:39.817103"], ["updated_at", "2019-06-22 18:08:39.817103"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 587], ["created_at", "2019-06-22 18:08:39.818911"], ["updated_at", "2019-06-22 18:08:39.818911"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 588], ["created_at", "2019-06-22 18:08:39.820634"], ["updated_at", "2019-06-22 18:08:39.820634"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 589], ["created_at", "2019-06-22 18:08:39.822696"], ["updated_at", "2019-06-22 18:08:39.822696"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg desc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 500], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.827243"], ["updated_at", "2019-06-22 18:08:39.827243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.829613"], ["updated_at", "2019-06-22 18:08:39.829613"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Never The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Never The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.831732"], ["updated_at", "2019-06-22 18:08:39.831732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 110], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.834447"], ["updated_at", "2019-06-22 18:08:39.834447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 2], ["heading", "Couldn't dig it."], ["full_review", "Not my jam, too hard to read. Not enough pictures"], ["book_id", 590], ["created_at", "2019-06-22 18:08:39.836561"], ["updated_at", "2019-06-22 18:08:39.836561"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 3], ["heading", "BEST BOOK EVER"], ["full_review", "OMG, it was like, THE BEST BOOK. FOREVER. LITERALLY. EVER. LITERALLY."], ["book_id", 591], ["created_at", "2019-06-22 18:08:39.838548"], ["updated_at", "2019-06-22 18:08:39.838548"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 4], ["heading", "Worst"], ["full_review", "sadkjfnwieuf."], ["book_id", 592], ["created_at", "2019-06-22 18:08:39.840490"], ["updated_at", "2019-06-22 18:08:39.840490"], ["user", "Joe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Fantastic."], ["full_review", "AKsjdsi"], ["book_id", 593], ["created_at", "2019-06-22 18:08:39.842585"], ["updated_at", "2019-06-22 18:08:39.842585"], ["user", "Pam"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT books.*, avg(reviews.score) FROM "books" INNER JOIN "reviews" ON "reviews"."book_id" = "books"."id" GROUP BY "books"."id" ORDER BY avg asc[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.850122"], ["updated_at", "2019-06-22 18:08:39.850122"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "authors" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "J.R.R. Tolkien"], ["created_at", "2019-06-22 18:08:39.852570"], ["updated_at", "2019-06-22 18:08:39.852570"]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "book_authors" ("book_id", "author_id") VALUES ($1, $2) RETURNING "id"[0m  [["book_id", 594], ["author_id", 258]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 594], ["created_at", "2019-06-22 18:08:39.855999"], ["updated_at", "2019-06-22 18:08:39.855999"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.859990"], ["updated_at", "2019-06-22 18:08:39.859990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Not The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Not The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.864431"], ["updated_at", "2019-06-22 18:08:39.864431"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Sometimes The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Sometimes The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.866662"], ["updated_at", "2019-06-22 18:08:39.866662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "Almost The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Almost The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.868818"], ["updated_at", "2019-06-22 18:08:39.868818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 595], ["created_at", "2019-06-22 18:08:39.870822"], ["updated_at", "2019-06-22 18:08:39.870822"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 596], ["created_at", "2019-06-22 18:08:39.873059"], ["updated_at", "2019-06-22 18:08:39.873059"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 597], ["created_at", "2019-06-22 18:08:39.875088"], ["updated_at", "2019-06-22 18:08:39.875088"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 598], ["created_at", "2019-06-22 18:08:39.877508"], ["updated_at", "2019-06-22 18:08:39.877508"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 595], ["created_at", "2019-06-22 18:08:39.879219"], ["updated_at", "2019-06-22 18:08:39.879219"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 596], ["created_at", "2019-06-22 18:08:39.880864"], ["updated_at", "2019-06-22 18:08:39.880864"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 597], ["created_at", "2019-06-22 18:08:39.882892"], ["updated_at", "2019-06-22 18:08:39.882892"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 595], ["created_at", "2019-06-22 18:08:39.884873"], ["updated_at", "2019-06-22 18:08:39.884873"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 596], ["created_at", "2019-06-22 18:08:39.886631"], ["updated_at", "2019-06-22 18:08:39.886631"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 595], ["created_at", "2019-06-22 18:08:39.888387"], ["updated_at", "2019-06-22 18:08:39.888387"], ["user", "Vince"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  reviews.user, COUNT(*) FROM "reviews" GROUP BY "reviews"."user" ORDER BY reviews.count DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.895941"], ["updated_at", "2019-06-22 18:08:39.895941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 599], ["created_at", "2019-06-20 18:08:39.897002"], ["updated_at", "2019-06-22 18:08:39.898244"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 599], ["created_at", "2019-06-19 18:08:39.899283"], ["updated_at", "2019-06-22 18:08:39.900075"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 599], ["created_at", "2019-06-18 18:08:39.900994"], ["updated_at", "2019-06-22 18:08:39.901747"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "books" WHERE "books"."title" = $1 LIMIT $2[0m  [["title", "The Hobbit"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "pages", "pub_year", "thumb_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "The Hobbit"], ["pages", 310], ["pub_year", 1937], ["thumb_url", "this_is_a_test_url"], ["created_at", "2019-06-22 18:08:39.905374"], ["updated_at", "2019-06-22 18:08:39.905374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Awesome!"], ["full_review", "Yay"], ["book_id", 600], ["created_at", "2019-06-20 18:08:39.906421"], ["updated_at", "2019-06-22 18:08:39.907464"], ["user", "Mills"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Nice!"], ["full_review", "Yay"], ["book_id", 600], ["created_at", "2019-06-19 18:08:39.908467"], ["updated_at", "2019-06-22 18:08:39.909253"], ["user", "Rob"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "reviews" ("score", "heading", "full_review", "book_id", "created_at", "updated_at", "user") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["score", 5], ["heading", "Cool!"], ["full_review", "Yay"], ["book_id", 600], ["created_at", "2019-06-18 18:08:39.910163"], ["updated_at", "2019-06-22 18:08:39.910922"], ["user", "Stella"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" ORDER BY "reviews"."created_at" DESC[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
